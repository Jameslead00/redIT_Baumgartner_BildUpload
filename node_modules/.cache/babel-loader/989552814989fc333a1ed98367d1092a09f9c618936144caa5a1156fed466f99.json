{"ast":null,"code":"import Dexie from'dexie';export class OfflineDB extends Dexie{constructor(){super('offlineData');// Version 1 (alt)\nthis.favoriteTeams=void 0;this.posts=void 0;this.images=void 0;this.version(1).stores({favoriteTeams:'id, displayName, channels',posts:'++id, teamId, channelId, text, imageUrls, timestamp',images:'++id, postId, file'});// Version 2 (neu): 'members' zum Index hinzufügen\n// Dexie führt automatisch ein Upgrade durch\nthis.version(2).stores({favoriteTeams:'id, displayName, channels, members',posts:'++id, teamId, channelId, text, imageUrls, timestamp',images:'++id, postId, file'});// Version 3 (neu): 'channelSubFolders' hinzufügen\nthis.version(3).stores({favoriteTeams:'id, displayName, channels, members, channelSubFolders',posts:'++id, teamId, channelId, text, imageUrls, timestamp',images:'++id, postId, file'});}}export const db=new OfflineDB();","map":{"version":3,"names":["Dexie","OfflineDB","constructor","favoriteTeams","posts","images","version","stores","db"],"sources":["/home/vsts/work/1/s/src/db.ts"],"sourcesContent":["import Dexie from 'dexie';\n\nexport interface Team {\n    id: string;\n    displayName: string;\n}\n\nexport interface Channel {\n    id: string;\n    displayName: string;\n}\n\nexport interface DBMentionUser {\n    id: string;\n    displayName: string;\n}\n\nexport interface SubFolder {\n    id: string;\n    name: string;\n}\n\nexport interface FavoriteTeam {\n    id: string;\n    displayName: string;\n    channels: Channel[];\n    members?: DBMentionUser[];\n    // NEW: Map channelId -> SubFolder[]\n    channelSubFolders?: { [channelId: string]: SubFolder[] };\n}\n\nexport interface OfflinePost {\n    id?: number;\n    teamId: string;\n    channelId: string;\n    channelDisplayName: string;\n    text: string;\n    imageUrls: string[];\n    timestamp: number;\n    mentions?: DBMentionUser[];\n    subFolder?: string; // Added subFolder field\n}\n\nexport class OfflineDB extends Dexie {\n    favoriteTeams!: Dexie.Table<FavoriteTeam, string>;\n    posts!: Dexie.Table<OfflinePost, number>;\n    images!: Dexie.Table<{ id?: number; postId: number; file: File }, number>;\n\n    constructor() {\n        super('offlineData');\n        \n        // Version 1 (alt)\n        this.version(1).stores({\n            favoriteTeams: 'id, displayName, channels',\n            posts: '++id, teamId, channelId, text, imageUrls, timestamp',\n            images: '++id, postId, file'\n        });\n\n        // Version 2 (neu): 'members' zum Index hinzufügen\n        // Dexie führt automatisch ein Upgrade durch\n        this.version(2).stores({\n            favoriteTeams: 'id, displayName, channels, members', \n            posts: '++id, teamId, channelId, text, imageUrls, timestamp',\n            images: '++id, postId, file'\n        });\n\n        // Version 3 (neu): 'channelSubFolders' hinzufügen\n        this.version(3).stores({\n            favoriteTeams: 'id, displayName, channels, members, channelSubFolders', \n            posts: '++id, teamId, channelId, text, imageUrls, timestamp',\n            images: '++id, postId, file'\n        });\n    }\n}\n\nexport const db = new OfflineDB();"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CA2CzB,MAAO,MAAM,CAAAC,SAAS,QAAS,CAAAD,KAAM,CAKjCE,WAAWA,CAAA,CAAG,CACV,KAAK,CAAC,aAAa,CAAC,CAEpB;AAAA,KAPJC,aAAa,aACbC,KAAK,aACLC,MAAM,QAMF,IAAI,CAACC,OAAO,CAAC,CAAC,CAAC,CAACC,MAAM,CAAC,CACnBJ,aAAa,CAAE,2BAA2B,CAC1CC,KAAK,CAAE,qDAAqD,CAC5DC,MAAM,CAAE,oBACZ,CAAC,CAAC,CAEF;AACA;AACA,IAAI,CAACC,OAAO,CAAC,CAAC,CAAC,CAACC,MAAM,CAAC,CACnBJ,aAAa,CAAE,oCAAoC,CACnDC,KAAK,CAAE,qDAAqD,CAC5DC,MAAM,CAAE,oBACZ,CAAC,CAAC,CAEF;AACA,IAAI,CAACC,OAAO,CAAC,CAAC,CAAC,CAACC,MAAM,CAAC,CACnBJ,aAAa,CAAE,uDAAuD,CACtEC,KAAK,CAAE,qDAAqD,CAC5DC,MAAM,CAAE,oBACZ,CAAC,CAAC,CACN,CACJ,CAEA,MAAO,MAAM,CAAAG,EAAE,CAAG,GAAI,CAAAP,SAAS,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}