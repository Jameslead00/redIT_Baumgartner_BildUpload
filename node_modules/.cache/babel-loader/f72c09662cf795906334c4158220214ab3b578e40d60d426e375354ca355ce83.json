{"ast":null,"code":"(function (e, t) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define(t) : (e = \"undefined\" != typeof globalThis ? globalThis : e || self).Dexie = t();\n})(this, function () {\n  \"use strict\";\n\n  var s = function (e, t) {\n    return (s = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (e, t) {\n      e.__proto__ = t;\n    } || function (e, t) {\n      for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);\n    })(e, t);\n  };\n  var _ = function () {\n    return (_ = Object.assign || function (e) {\n      for (var t, n = 1, r = arguments.length; n < r; n++) for (var i in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);\n      return e;\n    }).apply(this, arguments);\n  };\n  function i(e, t, n) {\n    if (n || 2 === arguments.length) for (var r, i = 0, o = t.length; i < o; i++) !r && i in t || ((r = r || Array.prototype.slice.call(t, 0, i))[i] = t[i]);\n    return e.concat(r || Array.prototype.slice.call(t));\n  }\n  var f = \"undefined\" != typeof globalThis ? globalThis : \"undefined\" != typeof self ? self : \"undefined\" != typeof window ? window : global,\n    O = Object.keys,\n    x = Array.isArray;\n  function a(t, n) {\n    return \"object\" != typeof n || O(n).forEach(function (e) {\n      t[e] = n[e];\n    }), t;\n  }\n  \"undefined\" == typeof Promise || f.Promise || (f.Promise = Promise);\n  var c = Object.getPrototypeOf,\n    n = {}.hasOwnProperty;\n  function m(e, t) {\n    return n.call(e, t);\n  }\n  function r(t, n) {\n    \"function\" == typeof n && (n = n(c(t))), (\"undefined\" == typeof Reflect ? O : Reflect.ownKeys)(n).forEach(function (e) {\n      l(t, e, n[e]);\n    });\n  }\n  var u = Object.defineProperty;\n  function l(e, t, n, r) {\n    u(e, t, a(n && m(n, \"get\") && \"function\" == typeof n.get ? {\n      get: n.get,\n      set: n.set,\n      configurable: !0\n    } : {\n      value: n,\n      configurable: !0,\n      writable: !0\n    }, r));\n  }\n  function o(t) {\n    return {\n      from: function (e) {\n        return t.prototype = Object.create(e.prototype), l(t.prototype, \"constructor\", t), {\n          extend: r.bind(null, t.prototype)\n        };\n      }\n    };\n  }\n  var h = Object.getOwnPropertyDescriptor;\n  var d = [].slice;\n  function b(e, t, n) {\n    return d.call(e, t, n);\n  }\n  function p(e, t) {\n    return t(e);\n  }\n  function y(e) {\n    if (!e) throw new Error(\"Assertion Failed\");\n  }\n  function v(e) {\n    f.setImmediate ? setImmediate(e) : setTimeout(e, 0);\n  }\n  function g(e, t) {\n    if (\"string\" == typeof t && m(e, t)) return e[t];\n    if (!t) return e;\n    if (\"string\" != typeof t) {\n      for (var n = [], r = 0, i = t.length; r < i; ++r) {\n        var o = g(e, t[r]);\n        n.push(o);\n      }\n      return n;\n    }\n    var a = t.indexOf(\".\");\n    if (-1 !== a) {\n      var u = e[t.substr(0, a)];\n      return null == u ? void 0 : g(u, t.substr(a + 1));\n    }\n  }\n  function w(e, t, n) {\n    if (e && void 0 !== t && !(\"isFrozen\" in Object && Object.isFrozen(e))) if (\"string\" != typeof t && \"length\" in t) {\n      y(\"string\" != typeof n && \"length\" in n);\n      for (var r = 0, i = t.length; r < i; ++r) w(e, t[r], n[r]);\n    } else {\n      var o,\n        a,\n        u = t.indexOf(\".\");\n      -1 !== u ? (o = t.substr(0, u), \"\" === (a = t.substr(u + 1)) ? void 0 === n ? x(e) && !isNaN(parseInt(o)) ? e.splice(o, 1) : delete e[o] : e[o] = n : w(u = !(u = e[o]) || !m(e, o) ? e[o] = {} : u, a, n)) : void 0 === n ? x(e) && !isNaN(parseInt(t)) ? e.splice(t, 1) : delete e[t] : e[t] = n;\n    }\n  }\n  function k(e) {\n    var t,\n      n = {};\n    for (t in e) m(e, t) && (n[t] = e[t]);\n    return n;\n  }\n  var t = [].concat;\n  function P(e) {\n    return t.apply([], e);\n  }\n  var e = \"BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey\".split(\",\").concat(P([8, 16, 32, 64].map(function (t) {\n      return [\"Int\", \"Uint\", \"Float\"].map(function (e) {\n        return e + t + \"Array\";\n      });\n    }))).filter(function (e) {\n      return f[e];\n    }),\n    K = new Set(e.map(function (e) {\n      return f[e];\n    }));\n  var E = null;\n  function S(e) {\n    E = new WeakMap();\n    e = function e(t) {\n      if (!t || \"object\" != typeof t) return t;\n      var n = E.get(t);\n      if (n) return n;\n      if (x(t)) {\n        n = [], E.set(t, n);\n        for (var r = 0, i = t.length; r < i; ++r) n.push(e(t[r]));\n      } else if (K.has(t.constructor)) n = t;else {\n        var o,\n          a = c(t);\n        for (o in n = a === Object.prototype ? {} : Object.create(a), E.set(t, n), t) m(t, o) && (n[o] = e(t[o]));\n      }\n      return n;\n    }(e);\n    return E = null, e;\n  }\n  var j = {}.toString;\n  function A(e) {\n    return j.call(e).slice(8, -1);\n  }\n  var C = \"undefined\" != typeof Symbol ? Symbol.iterator : \"@@iterator\",\n    T = \"symbol\" == typeof C ? function (e) {\n      var t;\n      return null != e && (t = e[C]) && t.apply(e);\n    } : function () {\n      return null;\n    };\n  function I(e, t) {\n    t = e.indexOf(t);\n    return 0 <= t && e.splice(t, 1), 0 <= t;\n  }\n  var q = {};\n  function D(e) {\n    var t, n, r, i;\n    if (1 === arguments.length) {\n      if (x(e)) return e.slice();\n      if (this === q && \"string\" == typeof e) return [e];\n      if (i = T(e)) {\n        for (n = []; !(r = i.next()).done;) n.push(r.value);\n        return n;\n      }\n      if (null == e) return [e];\n      if (\"number\" != typeof (t = e.length)) return [e];\n      for (n = new Array(t); t--;) n[t] = e[t];\n      return n;\n    }\n    for (t = arguments.length, n = new Array(t); t--;) n[t] = arguments[t];\n    return n;\n  }\n  var B = \"undefined\" != typeof Symbol ? function (e) {\n      return \"AsyncFunction\" === e[Symbol.toStringTag];\n    } : function () {\n      return !1;\n    },\n    R = [\"Unknown\", \"Constraint\", \"Data\", \"TransactionInactive\", \"ReadOnly\", \"Version\", \"NotFound\", \"InvalidState\", \"InvalidAccess\", \"Abort\", \"Timeout\", \"QuotaExceeded\", \"Syntax\", \"DataClone\"],\n    F = [\"Modify\", \"Bulk\", \"OpenFailed\", \"VersionChange\", \"Schema\", \"Upgrade\", \"InvalidTable\", \"MissingAPI\", \"NoSuchDatabase\", \"InvalidArgument\", \"SubTransaction\", \"Unsupported\", \"Internal\", \"DatabaseClosed\", \"PrematureCommit\", \"ForeignAwait\"].concat(R),\n    M = {\n      VersionChanged: \"Database version changed by other database connection\",\n      DatabaseClosed: \"Database has been closed\",\n      Abort: \"Transaction aborted\",\n      TransactionInactive: \"Transaction has already completed or failed\",\n      MissingAPI: \"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb\"\n    };\n  function N(e, t) {\n    this.name = e, this.message = t;\n  }\n  function L(e, t) {\n    return e + \". Errors: \" + Object.keys(t).map(function (e) {\n      return t[e].toString();\n    }).filter(function (e, t, n) {\n      return n.indexOf(e) === t;\n    }).join(\"\\n\");\n  }\n  function U(e, t, n, r) {\n    this.failures = t, this.failedKeys = r, this.successCount = n, this.message = L(e, t);\n  }\n  function V(e, t) {\n    this.name = \"BulkError\", this.failures = Object.keys(t).map(function (e) {\n      return t[e];\n    }), this.failuresByPos = t, this.message = L(e, this.failures);\n  }\n  o(N).from(Error).extend({\n    toString: function () {\n      return this.name + \": \" + this.message;\n    }\n  }), o(U).from(N), o(V).from(N);\n  var z = F.reduce(function (e, t) {\n      return e[t] = t + \"Error\", e;\n    }, {}),\n    W = N,\n    Y = F.reduce(function (e, n) {\n      var r = n + \"Error\";\n      function t(e, t) {\n        this.name = r, e ? \"string\" == typeof e ? (this.message = \"\".concat(e).concat(t ? \"\\n \" + t : \"\"), this.inner = t || null) : \"object\" == typeof e && (this.message = \"\".concat(e.name, \" \").concat(e.message), this.inner = e) : (this.message = M[n] || r, this.inner = null);\n      }\n      return o(t).from(W), e[n] = t, e;\n    }, {});\n  Y.Syntax = SyntaxError, Y.Type = TypeError, Y.Range = RangeError;\n  var $ = R.reduce(function (e, t) {\n    return e[t + \"Error\"] = Y[t], e;\n  }, {});\n  var Q = F.reduce(function (e, t) {\n    return -1 === [\"Syntax\", \"Type\", \"Range\"].indexOf(t) && (e[t + \"Error\"] = Y[t]), e;\n  }, {});\n  function G() {}\n  function X(e) {\n    return e;\n  }\n  function H(t, n) {\n    return null == t || t === X ? n : function (e) {\n      return n(t(e));\n    };\n  }\n  function J(e, t) {\n    return function () {\n      e.apply(this, arguments), t.apply(this, arguments);\n    };\n  }\n  function Z(i, o) {\n    return i === G ? o : function () {\n      var e = i.apply(this, arguments);\n      void 0 !== e && (arguments[0] = e);\n      var t = this.onsuccess,\n        n = this.onerror;\n      this.onsuccess = null, this.onerror = null;\n      var r = o.apply(this, arguments);\n      return t && (this.onsuccess = this.onsuccess ? J(t, this.onsuccess) : t), n && (this.onerror = this.onerror ? J(n, this.onerror) : n), void 0 !== r ? r : e;\n    };\n  }\n  function ee(n, r) {\n    return n === G ? r : function () {\n      n.apply(this, arguments);\n      var e = this.onsuccess,\n        t = this.onerror;\n      this.onsuccess = this.onerror = null, r.apply(this, arguments), e && (this.onsuccess = this.onsuccess ? J(e, this.onsuccess) : e), t && (this.onerror = this.onerror ? J(t, this.onerror) : t);\n    };\n  }\n  function te(i, o) {\n    return i === G ? o : function (e) {\n      var t = i.apply(this, arguments);\n      a(e, t);\n      var n = this.onsuccess,\n        r = this.onerror;\n      this.onsuccess = null, this.onerror = null;\n      e = o.apply(this, arguments);\n      return n && (this.onsuccess = this.onsuccess ? J(n, this.onsuccess) : n), r && (this.onerror = this.onerror ? J(r, this.onerror) : r), void 0 === t ? void 0 === e ? void 0 : e : a(t, e);\n    };\n  }\n  function ne(e, t) {\n    return e === G ? t : function () {\n      return !1 !== t.apply(this, arguments) && e.apply(this, arguments);\n    };\n  }\n  function re(i, o) {\n    return i === G ? o : function () {\n      var e = i.apply(this, arguments);\n      if (e && \"function\" == typeof e.then) {\n        for (var t = this, n = arguments.length, r = new Array(n); n--;) r[n] = arguments[n];\n        return e.then(function () {\n          return o.apply(t, r);\n        });\n      }\n      return o.apply(this, arguments);\n    };\n  }\n  Q.ModifyError = U, Q.DexieError = N, Q.BulkError = V;\n  var ie = \"undefined\" != typeof location && /^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);\n  function oe(e) {\n    ie = e;\n  }\n  var ae = {},\n    ue = 100,\n    e = \"undefined\" == typeof Promise ? [] : function () {\n      var e = Promise.resolve();\n      if (\"undefined\" == typeof crypto || !crypto.subtle) return [e, c(e), e];\n      var t = crypto.subtle.digest(\"SHA-512\", new Uint8Array([0]));\n      return [t, c(t), e];\n    }(),\n    R = e[0],\n    F = e[1],\n    e = e[2],\n    F = F && F.then,\n    se = R && R.constructor,\n    ce = !!e;\n  var le = function (e, t) {\n      be.push([e, t]), he && (queueMicrotask(Se), he = !1);\n    },\n    fe = !0,\n    he = !0,\n    de = [],\n    pe = [],\n    ye = X,\n    ve = {\n      id: \"global\",\n      global: !0,\n      ref: 0,\n      unhandleds: [],\n      onunhandled: G,\n      pgp: !1,\n      env: {},\n      finalize: G\n    },\n    me = ve,\n    be = [],\n    ge = 0,\n    we = [];\n  function _e(e) {\n    if (\"object\" != typeof this) throw new TypeError(\"Promises must be constructed via new\");\n    this._listeners = [], this._lib = !1;\n    var t = this._PSD = me;\n    if (\"function\" != typeof e) {\n      if (e !== ae) throw new TypeError(\"Not a function\");\n      return this._state = arguments[1], this._value = arguments[2], void (!1 === this._state && Oe(this, this._value));\n    }\n    this._state = null, this._value = null, ++t.ref, function t(r, e) {\n      try {\n        e(function (n) {\n          if (null === r._state) {\n            if (n === r) throw new TypeError(\"A promise cannot be resolved with itself.\");\n            var e = r._lib && je();\n            n && \"function\" == typeof n.then ? t(r, function (e, t) {\n              n instanceof _e ? n._then(e, t) : n.then(e, t);\n            }) : (r._state = !0, r._value = n, Pe(r)), e && Ae();\n          }\n        }, Oe.bind(null, r));\n      } catch (e) {\n        Oe(r, e);\n      }\n    }(this, e);\n  }\n  var xe = {\n    get: function () {\n      var u = me,\n        t = Fe;\n      function e(n, r) {\n        var i = this,\n          o = !u.global && (u !== me || t !== Fe),\n          a = o && !Ue(),\n          e = new _e(function (e, t) {\n            Ke(i, new ke(Qe(n, u, o, a), Qe(r, u, o, a), e, t, u));\n          });\n        return this._consoleTask && (e._consoleTask = this._consoleTask), e;\n      }\n      return e.prototype = ae, e;\n    },\n    set: function (e) {\n      l(this, \"then\", e && e.prototype === ae ? xe : {\n        get: function () {\n          return e;\n        },\n        set: xe.set\n      });\n    }\n  };\n  function ke(e, t, n, r, i) {\n    this.onFulfilled = \"function\" == typeof e ? e : null, this.onRejected = \"function\" == typeof t ? t : null, this.resolve = n, this.reject = r, this.psd = i;\n  }\n  function Oe(e, t) {\n    var n, r;\n    pe.push(t), null === e._state && (n = e._lib && je(), t = ye(t), e._state = !1, e._value = t, r = e, de.some(function (e) {\n      return e._value === r._value;\n    }) || de.push(r), Pe(e), n && Ae());\n  }\n  function Pe(e) {\n    var t = e._listeners;\n    e._listeners = [];\n    for (var n = 0, r = t.length; n < r; ++n) Ke(e, t[n]);\n    var i = e._PSD;\n    --i.ref || i.finalize(), 0 === ge && (++ge, le(function () {\n      0 == --ge && Ce();\n    }, []));\n  }\n  function Ke(e, t) {\n    if (null !== e._state) {\n      var n = e._state ? t.onFulfilled : t.onRejected;\n      if (null === n) return (e._state ? t.resolve : t.reject)(e._value);\n      ++t.psd.ref, ++ge, le(Ee, [n, e, t]);\n    } else e._listeners.push(t);\n  }\n  function Ee(e, t, n) {\n    try {\n      var r,\n        i = t._value;\n      !t._state && pe.length && (pe = []), r = ie && t._consoleTask ? t._consoleTask.run(function () {\n        return e(i);\n      }) : e(i), t._state || -1 !== pe.indexOf(i) || function (e) {\n        var t = de.length;\n        for (; t;) if (de[--t]._value === e._value) return de.splice(t, 1);\n      }(t), n.resolve(r);\n    } catch (e) {\n      n.reject(e);\n    } finally {\n      0 == --ge && Ce(), --n.psd.ref || n.psd.finalize();\n    }\n  }\n  function Se() {\n    $e(ve, function () {\n      je() && Ae();\n    });\n  }\n  function je() {\n    var e = fe;\n    return he = fe = !1, e;\n  }\n  function Ae() {\n    var e, t, n;\n    do {\n      for (; 0 < be.length;) for (e = be, be = [], n = e.length, t = 0; t < n; ++t) {\n        var r = e[t];\n        r[0].apply(null, r[1]);\n      }\n    } while (0 < be.length);\n    he = fe = !0;\n  }\n  function Ce() {\n    var e = de;\n    de = [], e.forEach(function (e) {\n      e._PSD.onunhandled.call(null, e._value, e);\n    });\n    for (var t = we.slice(0), n = t.length; n;) t[--n]();\n  }\n  function Te(e) {\n    return new _e(ae, !1, e);\n  }\n  function Ie(n, r) {\n    var i = me;\n    return function () {\n      var e = je(),\n        t = me;\n      try {\n        return We(i, !0), n.apply(this, arguments);\n      } catch (e) {\n        r && r(e);\n      } finally {\n        We(t, !1), e && Ae();\n      }\n    };\n  }\n  r(_e.prototype, {\n    then: xe,\n    _then: function (e, t) {\n      Ke(this, new ke(null, null, e, t, me));\n    },\n    catch: function (e) {\n      if (1 === arguments.length) return this.then(null, e);\n      var t = e,\n        n = arguments[1];\n      return \"function\" == typeof t ? this.then(null, function (e) {\n        return (e instanceof t ? n : Te)(e);\n      }) : this.then(null, function (e) {\n        return (e && e.name === t ? n : Te)(e);\n      });\n    },\n    finally: function (t) {\n      return this.then(function (e) {\n        return _e.resolve(t()).then(function () {\n          return e;\n        });\n      }, function (e) {\n        return _e.resolve(t()).then(function () {\n          return Te(e);\n        });\n      });\n    },\n    timeout: function (r, i) {\n      var o = this;\n      return r < 1 / 0 ? new _e(function (e, t) {\n        var n = setTimeout(function () {\n          return t(new Y.Timeout(i));\n        }, r);\n        o.then(e, t).finally(clearTimeout.bind(null, n));\n      }) : this;\n    }\n  }), \"undefined\" != typeof Symbol && Symbol.toStringTag && l(_e.prototype, Symbol.toStringTag, \"Dexie.Promise\"), ve.env = Ye(), r(_e, {\n    all: function () {\n      var o = D.apply(null, arguments).map(Ve);\n      return new _e(function (n, r) {\n        0 === o.length && n([]);\n        var i = o.length;\n        o.forEach(function (e, t) {\n          return _e.resolve(e).then(function (e) {\n            o[t] = e, --i || n(o);\n          }, r);\n        });\n      });\n    },\n    resolve: function (n) {\n      return n instanceof _e ? n : n && \"function\" == typeof n.then ? new _e(function (e, t) {\n        n.then(e, t);\n      }) : new _e(ae, !0, n);\n    },\n    reject: Te,\n    race: function () {\n      var e = D.apply(null, arguments).map(Ve);\n      return new _e(function (t, n) {\n        e.map(function (e) {\n          return _e.resolve(e).then(t, n);\n        });\n      });\n    },\n    PSD: {\n      get: function () {\n        return me;\n      },\n      set: function (e) {\n        return me = e;\n      }\n    },\n    totalEchoes: {\n      get: function () {\n        return Fe;\n      }\n    },\n    newPSD: Ne,\n    usePSD: $e,\n    scheduler: {\n      get: function () {\n        return le;\n      },\n      set: function (e) {\n        le = e;\n      }\n    },\n    rejectionMapper: {\n      get: function () {\n        return ye;\n      },\n      set: function (e) {\n        ye = e;\n      }\n    },\n    follow: function (i, n) {\n      return new _e(function (e, t) {\n        return Ne(function (n, r) {\n          var e = me;\n          e.unhandleds = [], e.onunhandled = r, e.finalize = J(function () {\n            var t,\n              e = this;\n            t = function () {\n              0 === e.unhandleds.length ? n() : r(e.unhandleds[0]);\n            }, we.push(function e() {\n              t(), we.splice(we.indexOf(e), 1);\n            }), ++ge, le(function () {\n              0 == --ge && Ce();\n            }, []);\n          }, e.finalize), i();\n        }, n, e, t);\n      });\n    }\n  }), se && (se.allSettled && l(_e, \"allSettled\", function () {\n    var e = D.apply(null, arguments).map(Ve);\n    return new _e(function (n) {\n      0 === e.length && n([]);\n      var r = e.length,\n        i = new Array(r);\n      e.forEach(function (e, t) {\n        return _e.resolve(e).then(function (e) {\n          return i[t] = {\n            status: \"fulfilled\",\n            value: e\n          };\n        }, function (e) {\n          return i[t] = {\n            status: \"rejected\",\n            reason: e\n          };\n        }).then(function () {\n          return --r || n(i);\n        });\n      });\n    });\n  }), se.any && \"undefined\" != typeof AggregateError && l(_e, \"any\", function () {\n    var e = D.apply(null, arguments).map(Ve);\n    return new _e(function (n, r) {\n      0 === e.length && r(new AggregateError([]));\n      var i = e.length,\n        o = new Array(i);\n      e.forEach(function (e, t) {\n        return _e.resolve(e).then(function (e) {\n          return n(e);\n        }, function (e) {\n          o[t] = e, --i || r(new AggregateError(o));\n        });\n      });\n    });\n  }), se.withResolvers && (_e.withResolvers = se.withResolvers));\n  var qe = {\n      awaits: 0,\n      echoes: 0,\n      id: 0\n    },\n    De = 0,\n    Be = [],\n    Re = 0,\n    Fe = 0,\n    Me = 0;\n  function Ne(e, t, n, r) {\n    var i = me,\n      o = Object.create(i);\n    o.parent = i, o.ref = 0, o.global = !1, o.id = ++Me, ve.env, o.env = ce ? {\n      Promise: _e,\n      PromiseProp: {\n        value: _e,\n        configurable: !0,\n        writable: !0\n      },\n      all: _e.all,\n      race: _e.race,\n      allSettled: _e.allSettled,\n      any: _e.any,\n      resolve: _e.resolve,\n      reject: _e.reject\n    } : {}, t && a(o, t), ++i.ref, o.finalize = function () {\n      --this.parent.ref || this.parent.finalize();\n    };\n    r = $e(o, e, n, r);\n    return 0 === o.ref && o.finalize(), r;\n  }\n  function Le() {\n    return qe.id || (qe.id = ++De), ++qe.awaits, qe.echoes += ue, qe.id;\n  }\n  function Ue() {\n    return !!qe.awaits && (0 == --qe.awaits && (qe.id = 0), qe.echoes = qe.awaits * ue, !0);\n  }\n  function Ve(e) {\n    return qe.echoes && e && e.constructor === se ? (Le(), e.then(function (e) {\n      return Ue(), e;\n    }, function (e) {\n      return Ue(), Xe(e);\n    })) : e;\n  }\n  function ze() {\n    var e = Be[Be.length - 1];\n    Be.pop(), We(e, !1);\n  }\n  function We(e, t) {\n    var n,\n      r = me;\n    (t ? !qe.echoes || Re++ && e === me : !Re || --Re && e === me) || queueMicrotask(t ? function (e) {\n      ++Fe, qe.echoes && 0 != --qe.echoes || (qe.echoes = qe.awaits = qe.id = 0), Be.push(me), We(e, !0);\n    }.bind(null, e) : ze), e !== me && (me = e, r === ve && (ve.env = Ye()), ce && (n = ve.env.Promise, t = e.env, (r.global || e.global) && (Object.defineProperty(f, \"Promise\", t.PromiseProp), n.all = t.all, n.race = t.race, n.resolve = t.resolve, n.reject = t.reject, t.allSettled && (n.allSettled = t.allSettled), t.any && (n.any = t.any))));\n  }\n  function Ye() {\n    var e = f.Promise;\n    return ce ? {\n      Promise: e,\n      PromiseProp: Object.getOwnPropertyDescriptor(f, \"Promise\"),\n      all: e.all,\n      race: e.race,\n      allSettled: e.allSettled,\n      any: e.any,\n      resolve: e.resolve,\n      reject: e.reject\n    } : {};\n  }\n  function $e(e, t, n, r, i) {\n    var o = me;\n    try {\n      return We(e, !0), t(n, r, i);\n    } finally {\n      We(o, !1);\n    }\n  }\n  function Qe(t, n, r, i) {\n    return \"function\" != typeof t ? t : function () {\n      var e = me;\n      r && Le(), We(n, !0);\n      try {\n        return t.apply(this, arguments);\n      } finally {\n        We(e, !1), i && queueMicrotask(Ue);\n      }\n    };\n  }\n  function Ge(e) {\n    Promise === se && 0 === qe.echoes ? 0 === Re ? e() : enqueueNativeMicroTask(e) : setTimeout(e, 0);\n  }\n  -1 === (\"\" + F).indexOf(\"[native code]\") && (Le = Ue = G);\n  var Xe = _e.reject;\n  var He = String.fromCharCode(65535),\n    Je = \"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\",\n    Ze = \"String expected.\",\n    et = [],\n    tt = \"__dbnames\",\n    nt = \"readonly\",\n    rt = \"readwrite\";\n  function it(e, t) {\n    return e ? t ? function () {\n      return e.apply(this, arguments) && t.apply(this, arguments);\n    } : e : t;\n  }\n  var ot = {\n    type: 3,\n    lower: -1 / 0,\n    lowerOpen: !1,\n    upper: [[]],\n    upperOpen: !1\n  };\n  function at(t) {\n    return \"string\" != typeof t || /\\./.test(t) ? function (e) {\n      return e;\n    } : function (e) {\n      return void 0 === e[t] && t in e && delete (e = S(e))[t], e;\n    };\n  }\n  function ut() {\n    throw Y.Type(\"Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.\");\n  }\n  function st(e, t) {\n    try {\n      var n = ct(e),\n        r = ct(t);\n      if (n !== r) return \"Array\" === n ? 1 : \"Array\" === r ? -1 : \"binary\" === n ? 1 : \"binary\" === r ? -1 : \"string\" === n ? 1 : \"string\" === r ? -1 : \"Date\" === n ? 1 : \"Date\" !== r ? NaN : -1;\n      switch (n) {\n        case \"number\":\n        case \"Date\":\n        case \"string\":\n          return t < e ? 1 : e < t ? -1 : 0;\n        case \"binary\":\n          return function (e, t) {\n            for (var n = e.length, r = t.length, i = n < r ? n : r, o = 0; o < i; ++o) if (e[o] !== t[o]) return e[o] < t[o] ? -1 : 1;\n            return n === r ? 0 : n < r ? -1 : 1;\n          }(lt(e), lt(t));\n        case \"Array\":\n          return function (e, t) {\n            for (var n = e.length, r = t.length, i = n < r ? n : r, o = 0; o < i; ++o) {\n              var a = st(e[o], t[o]);\n              if (0 !== a) return a;\n            }\n            return n === r ? 0 : n < r ? -1 : 1;\n          }(e, t);\n      }\n    } catch (e) {}\n    return NaN;\n  }\n  function ct(e) {\n    var t = typeof e;\n    if (\"object\" != t) return t;\n    if (ArrayBuffer.isView(e)) return \"binary\";\n    e = A(e);\n    return \"ArrayBuffer\" === e ? \"binary\" : e;\n  }\n  function lt(e) {\n    return e instanceof Uint8Array ? e : ArrayBuffer.isView(e) ? new Uint8Array(e.buffer, e.byteOffset, e.byteLength) : new Uint8Array(e);\n  }\n  function ft(t, n, r) {\n    var e = t.schema.yProps;\n    return e ? (n && 0 < r.numFailures && (n = n.filter(function (e, t) {\n      return !r.failures[t];\n    })), Promise.all(e.map(function (e) {\n      e = e.updatesTable;\n      return n ? t.db.table(e).where(\"k\").anyOf(n).delete() : t.db.table(e).clear();\n    })).then(function () {\n      return r;\n    })) : r;\n  }\n  var ht = (dt.prototype.execute = function (e) {\n    var t = this[\"@@propmod\"];\n    if (void 0 !== t.add) {\n      var n = t.add;\n      if (x(n)) return i(i([], x(e) ? e : [], !0), n, !0).sort();\n      if (\"number\" == typeof n) return (Number(e) || 0) + n;\n      if (\"bigint\" == typeof n) try {\n        return BigInt(e) + n;\n      } catch (e) {\n        return BigInt(0) + n;\n      }\n      throw new TypeError(\"Invalid term \".concat(n));\n    }\n    if (void 0 !== t.remove) {\n      var r = t.remove;\n      if (x(r)) return x(e) ? e.filter(function (e) {\n        return !r.includes(e);\n      }).sort() : [];\n      if (\"number\" == typeof r) return Number(e) - r;\n      if (\"bigint\" == typeof r) try {\n        return BigInt(e) - r;\n      } catch (e) {\n        return BigInt(0) - r;\n      }\n      throw new TypeError(\"Invalid subtrahend \".concat(r));\n    }\n    n = null === (n = t.replacePrefix) || void 0 === n ? void 0 : n[0];\n    return n && \"string\" == typeof e && e.startsWith(n) ? t.replacePrefix[1] + e.substring(n.length) : e;\n  }, dt);\n  function dt(e) {\n    this[\"@@propmod\"] = e;\n  }\n  function pt(e, t) {\n    for (var n = O(t), r = n.length, i = !1, o = 0; o < r; ++o) {\n      var a = n[o],\n        u = t[a],\n        s = g(e, a);\n      u instanceof ht ? (w(e, a, u.execute(s)), i = !0) : s !== u && (w(e, a, u), i = !0);\n    }\n    return i;\n  }\n  var yt = (vt.prototype._trans = function (e, r, t) {\n    var n = this._tx || me.trans,\n      i = this.name,\n      o = ie && \"undefined\" != typeof console && console.createTask && console.createTask(\"Dexie: \".concat(\"readonly\" === e ? \"read\" : \"write\", \" \").concat(this.name));\n    function a(e, t, n) {\n      if (!n.schema[i]) throw new Y.NotFound(\"Table \" + i + \" not part of transaction\");\n      return r(n.idbtrans, n);\n    }\n    var u = je();\n    try {\n      var s = n && n.db._novip === this.db._novip ? n === me.trans ? n._promise(e, a, t) : Ne(function () {\n        return n._promise(e, a, t);\n      }, {\n        trans: n,\n        transless: me.transless || me\n      }) : function t(n, r, i, o) {\n        if (n.idbdb && (n._state.openComplete || me.letThrough || n._vip)) {\n          var a = n._createTransaction(r, i, n._dbSchema);\n          try {\n            a.create(), n._state.PR1398_maxLoop = 3;\n          } catch (e) {\n            return e.name === z.InvalidState && n.isOpen() && 0 < --n._state.PR1398_maxLoop ? (console.warn(\"Dexie: Need to reopen db\"), n.close({\n              disableAutoOpen: !1\n            }), n.open().then(function () {\n              return t(n, r, i, o);\n            })) : Xe(e);\n          }\n          return a._promise(r, function (e, t) {\n            return Ne(function () {\n              return me.trans = a, o(e, t, a);\n            });\n          }).then(function (e) {\n            if (\"readwrite\" === r) try {\n              a.idbtrans.commit();\n            } catch (e) {}\n            return \"readonly\" === r ? e : a._completion.then(function () {\n              return e;\n            });\n          });\n        }\n        if (n._state.openComplete) return Xe(new Y.DatabaseClosed(n._state.dbOpenError));\n        if (!n._state.isBeingOpened) {\n          if (!n._state.autoOpen) return Xe(new Y.DatabaseClosed());\n          n.open().catch(G);\n        }\n        return n._state.dbReadyPromise.then(function () {\n          return t(n, r, i, o);\n        });\n      }(this.db, e, [this.name], a);\n      return o && (s._consoleTask = o, s = s.catch(function (e) {\n        return console.trace(e), Xe(e);\n      })), s;\n    } finally {\n      u && Ae();\n    }\n  }, vt.prototype.get = function (t, e) {\n    var n = this;\n    return t && t.constructor === Object ? this.where(t).first(e) : null == t ? Xe(new Y.Type(\"Invalid argument to Table.get()\")) : this._trans(\"readonly\", function (e) {\n      return n.core.get({\n        trans: e,\n        key: t\n      }).then(function (e) {\n        return n.hook.reading.fire(e);\n      });\n    }).then(e);\n  }, vt.prototype.where = function (o) {\n    if (\"string\" == typeof o) return new this.db.WhereClause(this, o);\n    if (x(o)) return new this.db.WhereClause(this, \"[\".concat(o.join(\"+\"), \"]\"));\n    var n = O(o);\n    if (1 === n.length) return this.where(n[0]).equals(o[n[0]]);\n    var e = this.schema.indexes.concat(this.schema.primKey).filter(function (t) {\n      if (t.compound && n.every(function (e) {\n        return 0 <= t.keyPath.indexOf(e);\n      })) {\n        for (var e = 0; e < n.length; ++e) if (-1 === n.indexOf(t.keyPath[e])) return !1;\n        return !0;\n      }\n      return !1;\n    }).sort(function (e, t) {\n      return e.keyPath.length - t.keyPath.length;\n    })[0];\n    if (e && this.db._maxKey !== He) {\n      var t = e.keyPath.slice(0, n.length);\n      return this.where(t).equals(t.map(function (e) {\n        return o[e];\n      }));\n    }\n    !e && ie && console.warn(\"The query \".concat(JSON.stringify(o), \" on \").concat(this.name, \" would benefit from a \") + \"compound index [\".concat(n.join(\"+\"), \"]\"));\n    var a = this.schema.idxByName;\n    function u(e, t) {\n      return 0 === st(e, t);\n    }\n    var r = n.reduce(function (e, t) {\n        var n = e[0],\n          r = e[1],\n          e = a[t],\n          i = o[t];\n        return [n || e, n || !e ? it(r, e && e.multi ? function (e) {\n          e = g(e, t);\n          return x(e) && e.some(function (e) {\n            return u(i, e);\n          });\n        } : function (e) {\n          return u(i, g(e, t));\n        }) : r];\n      }, [null, null]),\n      t = r[0],\n      r = r[1];\n    return t ? this.where(t.name).equals(o[t.keyPath]).filter(r) : e ? this.filter(r) : this.where(n).equals(\"\");\n  }, vt.prototype.filter = function (e) {\n    return this.toCollection().and(e);\n  }, vt.prototype.count = function (e) {\n    return this.toCollection().count(e);\n  }, vt.prototype.offset = function (e) {\n    return this.toCollection().offset(e);\n  }, vt.prototype.limit = function (e) {\n    return this.toCollection().limit(e);\n  }, vt.prototype.each = function (e) {\n    return this.toCollection().each(e);\n  }, vt.prototype.toArray = function (e) {\n    return this.toCollection().toArray(e);\n  }, vt.prototype.toCollection = function () {\n    return new this.db.Collection(new this.db.WhereClause(this));\n  }, vt.prototype.orderBy = function (e) {\n    return new this.db.Collection(new this.db.WhereClause(this, x(e) ? \"[\".concat(e.join(\"+\"), \"]\") : e));\n  }, vt.prototype.reverse = function () {\n    return this.toCollection().reverse();\n  }, vt.prototype.mapToClass = function (r) {\n    var e,\n      t = this.db,\n      n = this.name;\n    function i() {\n      return null !== e && e.apply(this, arguments) || this;\n    }\n    (this.schema.mappedClass = r).prototype instanceof ut && (function (e, t) {\n      if (\"function\" != typeof t && null !== t) throw new TypeError(\"Class extends value \" + String(t) + \" is not a constructor or null\");\n      function n() {\n        this.constructor = e;\n      }\n      s(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n());\n    }(i, e = r), Object.defineProperty(i.prototype, \"db\", {\n      get: function () {\n        return t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), i.prototype.table = function () {\n      return n;\n    }, r = i);\n    for (var o = new Set(), a = r.prototype; a; a = c(a)) Object.getOwnPropertyNames(a).forEach(function (e) {\n      return o.add(e);\n    });\n    function u(e) {\n      if (!e) return e;\n      var t,\n        n = Object.create(r.prototype);\n      for (t in e) if (!o.has(t)) try {\n        n[t] = e[t];\n      } catch (e) {}\n      return n;\n    }\n    return this.schema.readHook && this.hook.reading.unsubscribe(this.schema.readHook), this.schema.readHook = u, this.hook(\"reading\", u), r;\n  }, vt.prototype.defineClass = function () {\n    return this.mapToClass(function (e) {\n      a(this, e);\n    });\n  }, vt.prototype.add = function (t, n) {\n    var r = this,\n      e = this.schema.primKey,\n      i = e.auto,\n      o = e.keyPath,\n      a = t;\n    return o && i && (a = at(o)(t)), this._trans(\"readwrite\", function (e) {\n      return r.core.mutate({\n        trans: e,\n        type: \"add\",\n        keys: null != n ? [n] : null,\n        values: [a]\n      });\n    }).then(function (e) {\n      return e.numFailures ? _e.reject(e.failures[0]) : e.lastResult;\n    }).then(function (e) {\n      if (o) try {\n        w(t, o, e);\n      } catch (e) {}\n      return e;\n    });\n  }, vt.prototype.upsert = function (r, i) {\n    var o = this,\n      a = this.schema.primKey.keyPath;\n    return this._trans(\"readwrite\", function (n) {\n      return o.core.get({\n        trans: n,\n        key: r\n      }).then(function (t) {\n        var e = null != t ? t : {};\n        return pt(e, i), a && w(e, a, r), o.core.mutate({\n          trans: n,\n          type: \"put\",\n          values: [e],\n          keys: [r],\n          upsert: !0,\n          updates: {\n            keys: [r],\n            changeSpecs: [i]\n          }\n        }).then(function (e) {\n          return e.numFailures ? _e.reject(e.failures[0]) : !!t;\n        });\n      });\n    });\n  }, vt.prototype.update = function (e, t) {\n    if (\"object\" != typeof e || x(e)) return this.where(\":id\").equals(e).modify(t);\n    e = g(e, this.schema.primKey.keyPath);\n    return void 0 === e ? Xe(new Y.InvalidArgument(\"Given object does not contain its primary key\")) : this.where(\":id\").equals(e).modify(t);\n  }, vt.prototype.put = function (t, n) {\n    var r = this,\n      e = this.schema.primKey,\n      i = e.auto,\n      o = e.keyPath,\n      a = t;\n    return o && i && (a = at(o)(t)), this._trans(\"readwrite\", function (e) {\n      return r.core.mutate({\n        trans: e,\n        type: \"put\",\n        values: [a],\n        keys: null != n ? [n] : null\n      });\n    }).then(function (e) {\n      return e.numFailures ? _e.reject(e.failures[0]) : e.lastResult;\n    }).then(function (e) {\n      if (o) try {\n        w(t, o, e);\n      } catch (e) {}\n      return e;\n    });\n  }, vt.prototype.delete = function (t) {\n    var n = this;\n    return this._trans(\"readwrite\", function (e) {\n      return n.core.mutate({\n        trans: e,\n        type: \"delete\",\n        keys: [t]\n      }).then(function (e) {\n        return ft(n, [t], e);\n      }).then(function (e) {\n        return e.numFailures ? _e.reject(e.failures[0]) : void 0;\n      });\n    });\n  }, vt.prototype.clear = function () {\n    var t = this;\n    return this._trans(\"readwrite\", function (e) {\n      return t.core.mutate({\n        trans: e,\n        type: \"deleteRange\",\n        range: ot\n      }).then(function (e) {\n        return ft(t, null, e);\n      });\n    }).then(function (e) {\n      return e.numFailures ? _e.reject(e.failures[0]) : void 0;\n    });\n  }, vt.prototype.bulkGet = function (t) {\n    var n = this;\n    return this._trans(\"readonly\", function (e) {\n      return n.core.getMany({\n        keys: t,\n        trans: e\n      }).then(function (e) {\n        return e.map(function (e) {\n          return n.hook.reading.fire(e);\n        });\n      });\n    });\n  }, vt.prototype.bulkAdd = function (r, e, t) {\n    var o = this,\n      a = Array.isArray(e) ? e : void 0,\n      u = (t = t || (a ? void 0 : e)) ? t.allKeys : void 0;\n    return this._trans(\"readwrite\", function (e) {\n      var t = o.schema.primKey,\n        n = t.auto,\n        t = t.keyPath;\n      if (t && a) throw new Y.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");\n      if (a && a.length !== r.length) throw new Y.InvalidArgument(\"Arguments objects and keys must have the same length\");\n      var i = r.length,\n        t = t && n ? r.map(at(t)) : r;\n      return o.core.mutate({\n        trans: e,\n        type: \"add\",\n        keys: a,\n        values: t,\n        wantResults: u\n      }).then(function (e) {\n        var t = e.numFailures,\n          n = e.results,\n          r = e.lastResult,\n          e = e.failures;\n        if (0 === t) return u ? n : r;\n        throw new V(\"\".concat(o.name, \".bulkAdd(): \").concat(t, \" of \").concat(i, \" operations failed\"), e);\n      });\n    });\n  }, vt.prototype.bulkPut = function (r, e, t) {\n    var o = this,\n      a = Array.isArray(e) ? e : void 0,\n      u = (t = t || (a ? void 0 : e)) ? t.allKeys : void 0;\n    return this._trans(\"readwrite\", function (e) {\n      var t = o.schema.primKey,\n        n = t.auto,\n        t = t.keyPath;\n      if (t && a) throw new Y.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");\n      if (a && a.length !== r.length) throw new Y.InvalidArgument(\"Arguments objects and keys must have the same length\");\n      var i = r.length,\n        t = t && n ? r.map(at(t)) : r;\n      return o.core.mutate({\n        trans: e,\n        type: \"put\",\n        keys: a,\n        values: t,\n        wantResults: u\n      }).then(function (e) {\n        var t = e.numFailures,\n          n = e.results,\n          r = e.lastResult,\n          e = e.failures;\n        if (0 === t) return u ? n : r;\n        throw new V(\"\".concat(o.name, \".bulkPut(): \").concat(t, \" of \").concat(i, \" operations failed\"), e);\n      });\n    });\n  }, vt.prototype.bulkUpdate = function (t) {\n    var h = this,\n      n = this.core,\n      r = t.map(function (e) {\n        return e.key;\n      }),\n      i = t.map(function (e) {\n        return e.changes;\n      }),\n      d = [];\n    return this._trans(\"readwrite\", function (e) {\n      return n.getMany({\n        trans: e,\n        keys: r,\n        cache: \"clone\"\n      }).then(function (c) {\n        var l = [],\n          f = [];\n        t.forEach(function (e, t) {\n          var n = e.key,\n            r = e.changes,\n            i = c[t];\n          if (i) {\n            for (var o = 0, a = Object.keys(r); o < a.length; o++) {\n              var u = a[o],\n                s = r[u];\n              if (u === h.schema.primKey.keyPath) {\n                if (0 !== st(s, n)) throw new Y.Constraint(\"Cannot update primary key in bulkUpdate()\");\n              } else w(i, u, s);\n            }\n            d.push(t), l.push(n), f.push(i);\n          }\n        });\n        var s = l.length;\n        return n.mutate({\n          trans: e,\n          type: \"put\",\n          keys: l,\n          values: f,\n          updates: {\n            keys: r,\n            changeSpecs: i\n          }\n        }).then(function (e) {\n          var t = e.numFailures,\n            n = e.failures;\n          if (0 === t) return s;\n          for (var r = 0, i = Object.keys(n); r < i.length; r++) {\n            var o,\n              a = i[r],\n              u = d[Number(a)];\n            null != u && (o = n[a], delete n[a], n[u] = o);\n          }\n          throw new V(\"\".concat(h.name, \".bulkUpdate(): \").concat(t, \" of \").concat(s, \" operations failed\"), n);\n        });\n      });\n    });\n  }, vt.prototype.bulkDelete = function (t) {\n    var r = this,\n      i = t.length;\n    return this._trans(\"readwrite\", function (e) {\n      return r.core.mutate({\n        trans: e,\n        type: \"delete\",\n        keys: t\n      }).then(function (e) {\n        return ft(r, t, e);\n      });\n    }).then(function (e) {\n      var t = e.numFailures,\n        n = e.lastResult,\n        e = e.failures;\n      if (0 === t) return n;\n      throw new V(\"\".concat(r.name, \".bulkDelete(): \").concat(t, \" of \").concat(i, \" operations failed\"), e);\n    });\n  }, vt);\n  function vt() {}\n  function mt(i) {\n    function t(e, t) {\n      if (t) {\n        for (var n = arguments.length, r = new Array(n - 1); --n;) r[n - 1] = arguments[n];\n        return a[e].subscribe.apply(null, r), i;\n      }\n      if (\"string\" == typeof e) return a[e];\n    }\n    var a = {};\n    t.addEventType = u;\n    for (var e = 1, n = arguments.length; e < n; ++e) u(arguments[e]);\n    return t;\n    function u(e, n, r) {\n      if (\"object\" != typeof e) {\n        var i;\n        n = n || ne;\n        var o = {\n          subscribers: [],\n          fire: r = r || G,\n          subscribe: function (e) {\n            -1 === o.subscribers.indexOf(e) && (o.subscribers.push(e), o.fire = n(o.fire, e));\n          },\n          unsubscribe: function (t) {\n            o.subscribers = o.subscribers.filter(function (e) {\n              return e !== t;\n            }), o.fire = o.subscribers.reduce(n, r);\n          }\n        };\n        return a[e] = t[e] = o;\n      }\n      O(i = e).forEach(function (e) {\n        var t = i[e];\n        if (x(t)) u(e, i[e][0], i[e][1]);else {\n          if (\"asap\" !== t) throw new Y.InvalidArgument(\"Invalid event config\");\n          var n = u(e, X, function () {\n            for (var e = arguments.length, t = new Array(e); e--;) t[e] = arguments[e];\n            n.subscribers.forEach(function (e) {\n              v(function () {\n                e.apply(null, t);\n              });\n            });\n          });\n        }\n      });\n    }\n  }\n  function bt(e, t) {\n    return o(t).from({\n      prototype: e\n    }), t;\n  }\n  function gt(e, t) {\n    return !(e.filter || e.algorithm || e.or) && (t ? e.justLimit : !e.replayFilter);\n  }\n  function wt(e, t) {\n    e.filter = it(e.filter, t);\n  }\n  function _t(e, t, n) {\n    var r = e.replayFilter;\n    e.replayFilter = r ? function () {\n      return it(r(), t());\n    } : t, e.justLimit = n && !r;\n  }\n  function xt(e, t) {\n    if (e.isPrimKey) return t.primaryKey;\n    var n = t.getIndexByKeyPath(e.index);\n    if (!n) throw new Y.Schema(\"KeyPath \" + e.index + \" on object store \" + t.name + \" is not indexed\");\n    return n;\n  }\n  function kt(e, t, n) {\n    var r = xt(e, t.schema);\n    return t.openCursor({\n      trans: n,\n      values: !e.keysOnly,\n      reverse: \"prev\" === e.dir,\n      unique: !!e.unique,\n      query: {\n        index: r,\n        range: e.range\n      }\n    });\n  }\n  function Ot(e, o, t, n) {\n    var a = e.replayFilter ? it(e.filter, e.replayFilter()) : e.filter;\n    if (e.or) {\n      var u = {},\n        r = function (e, t, n) {\n          var r, i;\n          a && !a(t, n, function (e) {\n            return t.stop(e);\n          }, function (e) {\n            return t.fail(e);\n          }) || (\"[object ArrayBuffer]\" === (i = \"\" + (r = t.primaryKey)) && (i = \"\" + new Uint8Array(r)), m(u, i) || (u[i] = !0, o(e, t, n)));\n        };\n      return Promise.all([e.or._iterate(r, t), Pt(kt(e, n, t), e.algorithm, r, !e.keysOnly && e.valueMapper)]);\n    }\n    return Pt(kt(e, n, t), it(e.algorithm, a), o, !e.keysOnly && e.valueMapper);\n  }\n  function Pt(e, r, i, o) {\n    var a = Ie(o ? function (e, t, n) {\n      return i(o(e), t, n);\n    } : i);\n    return e.then(function (n) {\n      if (n) return n.start(function () {\n        var t = function () {\n          return n.continue();\n        };\n        r && !r(n, function (e) {\n          return t = e;\n        }, function (e) {\n          n.stop(e), t = G;\n        }, function (e) {\n          n.fail(e), t = G;\n        }) || a(n.value, n, function (e) {\n          return t = e;\n        }), t();\n      });\n    });\n  }\n  var Kt = (Et.prototype._read = function (e, t) {\n    var n = this._ctx;\n    return n.error ? n.table._trans(null, Xe.bind(null, n.error)) : n.table._trans(\"readonly\", e).then(t);\n  }, Et.prototype._write = function (e) {\n    var t = this._ctx;\n    return t.error ? t.table._trans(null, Xe.bind(null, t.error)) : t.table._trans(\"readwrite\", e, \"locked\");\n  }, Et.prototype._addAlgorithm = function (e) {\n    var t = this._ctx;\n    t.algorithm = it(t.algorithm, e);\n  }, Et.prototype._iterate = function (e, t) {\n    return Ot(this._ctx, e, t, this._ctx.table.core);\n  }, Et.prototype.clone = function (e) {\n    var t = Object.create(this.constructor.prototype),\n      n = Object.create(this._ctx);\n    return e && a(n, e), t._ctx = n, t;\n  }, Et.prototype.raw = function () {\n    return this._ctx.valueMapper = null, this;\n  }, Et.prototype.each = function (t) {\n    var n = this._ctx;\n    return this._read(function (e) {\n      return Ot(n, t, e, n.table.core);\n    });\n  }, Et.prototype.count = function (e) {\n    var i = this;\n    return this._read(function (e) {\n      var t = i._ctx,\n        n = t.table.core;\n      if (gt(t, !0)) return n.count({\n        trans: e,\n        query: {\n          index: xt(t, n.schema),\n          range: t.range\n        }\n      }).then(function (e) {\n        return Math.min(e, t.limit);\n      });\n      var r = 0;\n      return Ot(t, function () {\n        return ++r, !1;\n      }, e, n).then(function () {\n        return r;\n      });\n    }).then(e);\n  }, Et.prototype.sortBy = function (e, t) {\n    var n = e.split(\".\").reverse(),\n      r = n[0],\n      i = n.length - 1;\n    function o(e, t) {\n      return t ? o(e[n[t]], t - 1) : e[r];\n    }\n    var a = \"next\" === this._ctx.dir ? 1 : -1;\n    function u(e, t) {\n      return st(o(e, i), o(t, i)) * a;\n    }\n    return this.toArray(function (e) {\n      return e.sort(u);\n    }).then(t);\n  }, Et.prototype.toArray = function (e) {\n    var o = this;\n    return this._read(function (e) {\n      var t = o._ctx;\n      if (\"next\" === t.dir && gt(t, !0) && 0 < t.limit) {\n        var n = t.valueMapper,\n          r = xt(t, t.table.core.schema);\n        return t.table.core.query({\n          trans: e,\n          limit: t.limit,\n          values: !0,\n          query: {\n            index: r,\n            range: t.range\n          }\n        }).then(function (e) {\n          e = e.result;\n          return n ? e.map(n) : e;\n        });\n      }\n      var i = [];\n      return Ot(t, function (e) {\n        return i.push(e);\n      }, e, t.table.core).then(function () {\n        return i;\n      });\n    }, e);\n  }, Et.prototype.offset = function (t) {\n    var e = this._ctx;\n    return t <= 0 || (e.offset += t, gt(e) ? _t(e, function () {\n      var n = t;\n      return function (e, t) {\n        return 0 === n || (1 === n ? --n : t(function () {\n          e.advance(n), n = 0;\n        }), !1);\n      };\n    }) : _t(e, function () {\n      var e = t;\n      return function () {\n        return --e < 0;\n      };\n    })), this;\n  }, Et.prototype.limit = function (e) {\n    return this._ctx.limit = Math.min(this._ctx.limit, e), _t(this._ctx, function () {\n      var r = e;\n      return function (e, t, n) {\n        return --r <= 0 && t(n), 0 <= r;\n      };\n    }, !0), this;\n  }, Et.prototype.until = function (r, i) {\n    return wt(this._ctx, function (e, t, n) {\n      return !r(e.value) || (t(n), i);\n    }), this;\n  }, Et.prototype.first = function (e) {\n    return this.limit(1).toArray(function (e) {\n      return e[0];\n    }).then(e);\n  }, Et.prototype.last = function (e) {\n    return this.reverse().first(e);\n  }, Et.prototype.filter = function (t) {\n    var e;\n    return wt(this._ctx, function (e) {\n      return t(e.value);\n    }), (e = this._ctx).isMatch = it(e.isMatch, t), this;\n  }, Et.prototype.and = function (e) {\n    return this.filter(e);\n  }, Et.prototype.or = function (e) {\n    return new this.db.WhereClause(this._ctx.table, e, this);\n  }, Et.prototype.reverse = function () {\n    return this._ctx.dir = \"prev\" === this._ctx.dir ? \"next\" : \"prev\", this._ondirectionchange && this._ondirectionchange(this._ctx.dir), this;\n  }, Et.prototype.desc = function () {\n    return this.reverse();\n  }, Et.prototype.eachKey = function (n) {\n    var e = this._ctx;\n    return e.keysOnly = !e.isMatch, this.each(function (e, t) {\n      n(t.key, t);\n    });\n  }, Et.prototype.eachUniqueKey = function (e) {\n    return this._ctx.unique = \"unique\", this.eachKey(e);\n  }, Et.prototype.eachPrimaryKey = function (n) {\n    var e = this._ctx;\n    return e.keysOnly = !e.isMatch, this.each(function (e, t) {\n      n(t.primaryKey, t);\n    });\n  }, Et.prototype.keys = function (e) {\n    var t = this._ctx;\n    t.keysOnly = !t.isMatch;\n    var n = [];\n    return this.each(function (e, t) {\n      n.push(t.key);\n    }).then(function () {\n      return n;\n    }).then(e);\n  }, Et.prototype.primaryKeys = function (e) {\n    var n = this._ctx;\n    if (\"next\" === n.dir && gt(n, !0) && 0 < n.limit) return this._read(function (e) {\n      var t = xt(n, n.table.core.schema);\n      return n.table.core.query({\n        trans: e,\n        values: !1,\n        limit: n.limit,\n        query: {\n          index: t,\n          range: n.range\n        }\n      });\n    }).then(function (e) {\n      return e.result;\n    }).then(e);\n    n.keysOnly = !n.isMatch;\n    var r = [];\n    return this.each(function (e, t) {\n      r.push(t.primaryKey);\n    }).then(function () {\n      return r;\n    }).then(e);\n  }, Et.prototype.uniqueKeys = function (e) {\n    return this._ctx.unique = \"unique\", this.keys(e);\n  }, Et.prototype.firstKey = function (e) {\n    return this.limit(1).keys(function (e) {\n      return e[0];\n    }).then(e);\n  }, Et.prototype.lastKey = function (e) {\n    return this.reverse().firstKey(e);\n  }, Et.prototype.distinct = function () {\n    var e = this._ctx,\n      e = e.index && e.table.schema.idxByName[e.index];\n    if (!e || !e.multi) return this;\n    var n = {};\n    return wt(this._ctx, function (e) {\n      var t = e.primaryKey.toString(),\n        e = m(n, t);\n      return n[t] = !0, !e;\n    }), this;\n  }, Et.prototype.modify = function (x) {\n    var n = this,\n      k = this._ctx;\n    return this._write(function (p) {\n      var y = \"function\" == typeof x ? x : function (e) {\n          return pt(e, x);\n        },\n        v = k.table.core,\n        e = v.schema.primaryKey,\n        m = e.outbound,\n        b = e.extractKey,\n        g = 200,\n        e = n.db._options.modifyChunkSize;\n      e && (g = \"object\" == typeof e ? e[v.name] || e[\"*\"] || 200 : e);\n      function w(e, t) {\n        var n = t.failures,\n          t = t.numFailures;\n        u += e - t;\n        for (var r = 0, i = O(n); r < i.length; r++) {\n          var o = i[r];\n          a.push(n[o]);\n        }\n      }\n      var a = [],\n        u = 0,\n        t = [],\n        _ = x === St;\n      return n.clone().primaryKeys().then(function (f) {\n        function h(s) {\n          var c = Math.min(g, f.length - s),\n            l = f.slice(s, s + c);\n          return (_ ? Promise.resolve([]) : v.getMany({\n            trans: p,\n            keys: l,\n            cache: \"immutable\"\n          })).then(function (e) {\n            var n = [],\n              t = [],\n              r = m ? [] : null,\n              i = _ ? l : [];\n            if (!_) for (var o = 0; o < c; ++o) {\n              var a = e[o],\n                u = {\n                  value: S(a),\n                  primKey: f[s + o]\n                };\n              !1 !== y.call(u, u.value, u) && (null == u.value ? i.push(f[s + o]) : m || 0 === st(b(a), b(u.value)) ? (t.push(u.value), m && r.push(f[s + o])) : (i.push(f[s + o]), n.push(u.value)));\n            }\n            return Promise.resolve(0 < n.length && v.mutate({\n              trans: p,\n              type: \"add\",\n              values: n\n            }).then(function (e) {\n              for (var t in e.failures) i.splice(parseInt(t), 1);\n              w(n.length, e);\n            })).then(function () {\n              return (0 < t.length || d && \"object\" == typeof x) && v.mutate({\n                trans: p,\n                type: \"put\",\n                keys: r,\n                values: t,\n                criteria: d,\n                changeSpec: \"function\" != typeof x && x,\n                isAdditionalChunk: 0 < s\n              }).then(function (e) {\n                return w(t.length, e);\n              });\n            }).then(function () {\n              return (0 < i.length || d && _) && v.mutate({\n                trans: p,\n                type: \"delete\",\n                keys: i,\n                criteria: d,\n                isAdditionalChunk: 0 < s\n              }).then(function (e) {\n                return ft(k.table, i, e);\n              }).then(function (e) {\n                return w(i.length, e);\n              });\n            }).then(function () {\n              return f.length > s + c && h(s + g);\n            });\n          });\n        }\n        var d = gt(k) && k.limit === 1 / 0 && (\"function\" != typeof x || _) && {\n          index: k.index,\n          range: k.range\n        };\n        return h(0).then(function () {\n          if (0 < a.length) throw new U(\"Error modifying one or more objects\", a, u, t);\n          return f.length;\n        });\n      });\n    });\n  }, Et.prototype.delete = function () {\n    var i = this._ctx,\n      n = i.range;\n    return !gt(i) || i.table.schema.yProps || !i.isPrimKey && 3 !== n.type ? this.modify(St) : this._write(function (e) {\n      var t = i.table.core.schema.primaryKey,\n        r = n;\n      return i.table.core.count({\n        trans: e,\n        query: {\n          index: t,\n          range: r\n        }\n      }).then(function (n) {\n        return i.table.core.mutate({\n          trans: e,\n          type: \"deleteRange\",\n          range: r\n        }).then(function (e) {\n          var t = e.failures,\n            e = e.numFailures;\n          if (e) throw new U(\"Could not delete some values\", Object.keys(t).map(function (e) {\n            return t[e];\n          }), n - e);\n          return n - e;\n        });\n      });\n    });\n  }, Et);\n  function Et() {}\n  var St = function (e, t) {\n    return t.value = null;\n  };\n  function jt(e, t) {\n    return e < t ? -1 : e === t ? 0 : 1;\n  }\n  function At(e, t) {\n    return t < e ? -1 : e === t ? 0 : 1;\n  }\n  function Ct(e, t, n) {\n    e = e instanceof Bt ? new e.Collection(e) : e;\n    return e._ctx.error = new (n || TypeError)(t), e;\n  }\n  function Tt(e) {\n    return new e.Collection(e, function () {\n      return Dt(\"\");\n    }).limit(0);\n  }\n  function It(e, s, n, r) {\n    var i,\n      c,\n      l,\n      f,\n      h,\n      d,\n      p,\n      y = n.length;\n    if (!n.every(function (e) {\n      return \"string\" == typeof e;\n    })) return Ct(e, Ze);\n    function t(e) {\n      i = \"next\" === e ? function (e) {\n        return e.toUpperCase();\n      } : function (e) {\n        return e.toLowerCase();\n      }, c = \"next\" === e ? function (e) {\n        return e.toLowerCase();\n      } : function (e) {\n        return e.toUpperCase();\n      }, l = \"next\" === e ? jt : At;\n      var t = n.map(function (e) {\n        return {\n          lower: c(e),\n          upper: i(e)\n        };\n      }).sort(function (e, t) {\n        return l(e.lower, t.lower);\n      });\n      f = t.map(function (e) {\n        return e.upper;\n      }), h = t.map(function (e) {\n        return e.lower;\n      }), p = \"next\" === (d = e) ? \"\" : r;\n    }\n    t(\"next\");\n    e = new e.Collection(e, function () {\n      return qt(f[0], h[y - 1] + r);\n    });\n    e._ondirectionchange = function (e) {\n      t(e);\n    };\n    var v = 0;\n    return e._addAlgorithm(function (e, t, n) {\n      var r = e.key;\n      if (\"string\" != typeof r) return !1;\n      var i = c(r);\n      if (s(i, h, v)) return !0;\n      for (var o = null, a = v; a < y; ++a) {\n        var u = function (e, t, n, r, i, o) {\n          for (var a = Math.min(e.length, r.length), u = -1, s = 0; s < a; ++s) {\n            var c = t[s];\n            if (c !== r[s]) return i(e[s], n[s]) < 0 ? e.substr(0, s) + n[s] + n.substr(s + 1) : i(e[s], r[s]) < 0 ? e.substr(0, s) + r[s] + n.substr(s + 1) : 0 <= u ? e.substr(0, u) + t[u] + n.substr(u + 1) : null;\n            i(e[s], c) < 0 && (u = s);\n          }\n          return a < r.length && \"next\" === o ? e + n.substr(e.length) : a < e.length && \"prev\" === o ? e.substr(0, n.length) : u < 0 ? null : e.substr(0, u) + r[u] + n.substr(u + 1);\n        }(r, i, f[a], h[a], l, d);\n        null === u && null === o ? v = a + 1 : (null === o || 0 < l(o, u)) && (o = u);\n      }\n      return t(null !== o ? function () {\n        e.continue(o + p);\n      } : n), !1;\n    }), e;\n  }\n  function qt(e, t, n, r) {\n    return {\n      type: 2,\n      lower: e,\n      upper: t,\n      lowerOpen: n,\n      upperOpen: r\n    };\n  }\n  function Dt(e) {\n    return {\n      type: 1,\n      lower: e,\n      upper: e\n    };\n  }\n  var Bt = (Object.defineProperty(Rt.prototype, \"Collection\", {\n    get: function () {\n      return this._ctx.table.db.Collection;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Rt.prototype.between = function (e, t, n, r) {\n    n = !1 !== n, r = !0 === r;\n    try {\n      return 0 < this._cmp(e, t) || 0 === this._cmp(e, t) && (n || r) && (!n || !r) ? Tt(this) : new this.Collection(this, function () {\n        return qt(e, t, !n, !r);\n      });\n    } catch (e) {\n      return Ct(this, Je);\n    }\n  }, Rt.prototype.equals = function (e) {\n    return null == e ? Ct(this, Je) : new this.Collection(this, function () {\n      return Dt(e);\n    });\n  }, Rt.prototype.above = function (e) {\n    return null == e ? Ct(this, Je) : new this.Collection(this, function () {\n      return qt(e, void 0, !0);\n    });\n  }, Rt.prototype.aboveOrEqual = function (e) {\n    return null == e ? Ct(this, Je) : new this.Collection(this, function () {\n      return qt(e, void 0, !1);\n    });\n  }, Rt.prototype.below = function (e) {\n    return null == e ? Ct(this, Je) : new this.Collection(this, function () {\n      return qt(void 0, e, !1, !0);\n    });\n  }, Rt.prototype.belowOrEqual = function (e) {\n    return null == e ? Ct(this, Je) : new this.Collection(this, function () {\n      return qt(void 0, e);\n    });\n  }, Rt.prototype.startsWith = function (e) {\n    return \"string\" != typeof e ? Ct(this, Ze) : this.between(e, e + He, !0, !0);\n  }, Rt.prototype.startsWithIgnoreCase = function (e) {\n    return \"\" === e ? this.startsWith(e) : It(this, function (e, t) {\n      return 0 === e.indexOf(t[0]);\n    }, [e], He);\n  }, Rt.prototype.equalsIgnoreCase = function (e) {\n    return It(this, function (e, t) {\n      return e === t[0];\n    }, [e], \"\");\n  }, Rt.prototype.anyOfIgnoreCase = function () {\n    var e = D.apply(q, arguments);\n    return 0 === e.length ? Tt(this) : It(this, function (e, t) {\n      return -1 !== t.indexOf(e);\n    }, e, \"\");\n  }, Rt.prototype.startsWithAnyOfIgnoreCase = function () {\n    var e = D.apply(q, arguments);\n    return 0 === e.length ? Tt(this) : It(this, function (t, e) {\n      return e.some(function (e) {\n        return 0 === t.indexOf(e);\n      });\n    }, e, He);\n  }, Rt.prototype.anyOf = function () {\n    var t = this,\n      i = D.apply(q, arguments),\n      o = this._cmp;\n    try {\n      i.sort(o);\n    } catch (e) {\n      return Ct(this, Je);\n    }\n    if (0 === i.length) return Tt(this);\n    var e = new this.Collection(this, function () {\n      return qt(i[0], i[i.length - 1]);\n    });\n    e._ondirectionchange = function (e) {\n      o = \"next\" === e ? t._ascending : t._descending, i.sort(o);\n    };\n    var a = 0;\n    return e._addAlgorithm(function (e, t, n) {\n      for (var r = e.key; 0 < o(r, i[a]);) if (++a === i.length) return t(n), !1;\n      return 0 === o(r, i[a]) || (t(function () {\n        e.continue(i[a]);\n      }), !1);\n    }), e;\n  }, Rt.prototype.notEqual = function (e) {\n    return this.inAnyRange([[-1 / 0, e], [e, this.db._maxKey]], {\n      includeLowers: !1,\n      includeUppers: !1\n    });\n  }, Rt.prototype.noneOf = function () {\n    var e = D.apply(q, arguments);\n    if (0 === e.length) return new this.Collection(this);\n    try {\n      e.sort(this._ascending);\n    } catch (e) {\n      return Ct(this, Je);\n    }\n    var t = e.reduce(function (e, t) {\n      return e ? e.concat([[e[e.length - 1][1], t]]) : [[-1 / 0, t]];\n    }, null);\n    return t.push([e[e.length - 1], this.db._maxKey]), this.inAnyRange(t, {\n      includeLowers: !1,\n      includeUppers: !1\n    });\n  }, Rt.prototype.inAnyRange = function (e, t) {\n    var o = this,\n      a = this._cmp,\n      u = this._ascending,\n      n = this._descending,\n      s = this._min,\n      c = this._max;\n    if (0 === e.length) return Tt(this);\n    if (!e.every(function (e) {\n      return void 0 !== e[0] && void 0 !== e[1] && u(e[0], e[1]) <= 0;\n    })) return Ct(this, \"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\", Y.InvalidArgument);\n    var r = !t || !1 !== t.includeLowers,\n      i = t && !0 === t.includeUppers;\n    var l,\n      f = u;\n    function h(e, t) {\n      return f(e[0], t[0]);\n    }\n    try {\n      (l = e.reduce(function (e, t) {\n        for (var n = 0, r = e.length; n < r; ++n) {\n          var i = e[n];\n          if (a(t[0], i[1]) < 0 && 0 < a(t[1], i[0])) {\n            i[0] = s(i[0], t[0]), i[1] = c(i[1], t[1]);\n            break;\n          }\n        }\n        return n === r && e.push(t), e;\n      }, [])).sort(h);\n    } catch (e) {\n      return Ct(this, Je);\n    }\n    var d = 0,\n      p = i ? function (e) {\n        return 0 < u(e, l[d][1]);\n      } : function (e) {\n        return 0 <= u(e, l[d][1]);\n      },\n      y = r ? function (e) {\n        return 0 < n(e, l[d][0]);\n      } : function (e) {\n        return 0 <= n(e, l[d][0]);\n      };\n    var v = p,\n      e = new this.Collection(this, function () {\n        return qt(l[0][0], l[l.length - 1][1], !r, !i);\n      });\n    return e._ondirectionchange = function (e) {\n      f = \"next\" === e ? (v = p, u) : (v = y, n), l.sort(h);\n    }, e._addAlgorithm(function (e, t, n) {\n      for (var r, i = e.key; v(i);) if (++d === l.length) return t(n), !1;\n      return !p(r = i) && !y(r) || (0 === o._cmp(i, l[d][1]) || 0 === o._cmp(i, l[d][0]) || t(function () {\n        f === u ? e.continue(l[d][0]) : e.continue(l[d][1]);\n      }), !1);\n    }), e;\n  }, Rt.prototype.startsWithAnyOf = function () {\n    var e = D.apply(q, arguments);\n    return e.every(function (e) {\n      return \"string\" == typeof e;\n    }) ? 0 === e.length ? Tt(this) : this.inAnyRange(e.map(function (e) {\n      return [e, e + He];\n    })) : Ct(this, \"startsWithAnyOf() only works with strings\");\n  }, Rt);\n  function Rt() {}\n  function Ft(t) {\n    return Ie(function (e) {\n      return Mt(e), t(e.target.error), !1;\n    });\n  }\n  function Mt(e) {\n    e.stopPropagation && e.stopPropagation(), e.preventDefault && e.preventDefault();\n  }\n  var Nt = \"storagemutated\",\n    Lt = \"x-storagemutated-1\",\n    Ut = mt(null, Nt),\n    Vt = (zt.prototype._lock = function () {\n      return y(!me.global), ++this._reculock, 1 !== this._reculock || me.global || (me.lockOwnerFor = this), this;\n    }, zt.prototype._unlock = function () {\n      if (y(!me.global), 0 == --this._reculock) for (me.global || (me.lockOwnerFor = null); 0 < this._blockedFuncs.length && !this._locked();) {\n        var e = this._blockedFuncs.shift();\n        try {\n          $e(e[1], e[0]);\n        } catch (e) {}\n      }\n      return this;\n    }, zt.prototype._locked = function () {\n      return this._reculock && me.lockOwnerFor !== this;\n    }, zt.prototype.create = function (t) {\n      var n = this;\n      if (!this.mode) return this;\n      var e = this.db.idbdb,\n        r = this.db._state.dbOpenError;\n      if (y(!this.idbtrans), !t && !e) switch (r && r.name) {\n        case \"DatabaseClosedError\":\n          throw new Y.DatabaseClosed(r);\n        case \"MissingAPIError\":\n          throw new Y.MissingAPI(r.message, r);\n        default:\n          throw new Y.OpenFailed(r);\n      }\n      if (!this.active) throw new Y.TransactionInactive();\n      return y(null === this._completion._state), (t = this.idbtrans = t || (this.db.core || e).transaction(this.storeNames, this.mode, {\n        durability: this.chromeTransactionDurability\n      })).onerror = Ie(function (e) {\n        Mt(e), n._reject(t.error);\n      }), t.onabort = Ie(function (e) {\n        Mt(e), n.active && n._reject(new Y.Abort(t.error)), n.active = !1, n.on(\"abort\").fire(e);\n      }), t.oncomplete = Ie(function () {\n        n.active = !1, n._resolve(), \"mutatedParts\" in t && Ut.storagemutated.fire(t.mutatedParts);\n      }), this;\n    }, zt.prototype._promise = function (n, r, i) {\n      var o = this;\n      if (\"readwrite\" === n && \"readwrite\" !== this.mode) return Xe(new Y.ReadOnly(\"Transaction is readonly\"));\n      if (!this.active) return Xe(new Y.TransactionInactive());\n      if (this._locked()) return new _e(function (e, t) {\n        o._blockedFuncs.push([function () {\n          o._promise(n, r, i).then(e, t);\n        }, me]);\n      });\n      if (i) return Ne(function () {\n        var e = new _e(function (e, t) {\n          o._lock();\n          var n = r(e, t, o);\n          n && n.then && n.then(e, t);\n        });\n        return e.finally(function () {\n          return o._unlock();\n        }), e._lib = !0, e;\n      });\n      var e = new _e(function (e, t) {\n        var n = r(e, t, o);\n        n && n.then && n.then(e, t);\n      });\n      return e._lib = !0, e;\n    }, zt.prototype._root = function () {\n      return this.parent ? this.parent._root() : this;\n    }, zt.prototype.waitFor = function (e) {\n      var t,\n        r = this._root(),\n        i = _e.resolve(e);\n      r._waitingFor ? r._waitingFor = r._waitingFor.then(function () {\n        return i;\n      }) : (r._waitingFor = i, r._waitingQueue = [], t = r.idbtrans.objectStore(r.storeNames[0]), function e() {\n        for (++r._spinCount; r._waitingQueue.length;) r._waitingQueue.shift()();\n        r._waitingFor && (t.get(-1 / 0).onsuccess = e);\n      }());\n      var o = r._waitingFor;\n      return new _e(function (t, n) {\n        i.then(function (e) {\n          return r._waitingQueue.push(Ie(t.bind(null, e)));\n        }, function (e) {\n          return r._waitingQueue.push(Ie(n.bind(null, e)));\n        }).finally(function () {\n          r._waitingFor === o && (r._waitingFor = null);\n        });\n      });\n    }, zt.prototype.abort = function () {\n      this.active && (this.active = !1, this.idbtrans && this.idbtrans.abort(), this._reject(new Y.Abort()));\n    }, zt.prototype.table = function (e) {\n      var t = this._memoizedTables || (this._memoizedTables = {});\n      if (m(t, e)) return t[e];\n      var n = this.schema[e];\n      if (!n) throw new Y.NotFound(\"Table \" + e + \" not part of transaction\");\n      n = new this.db.Table(e, n, this);\n      return n.core = this.db.core.table(e), t[e] = n;\n    }, zt);\n  function zt() {}\n  function Wt(e, t, n, r, i, o, a, u) {\n    return {\n      name: e,\n      keyPath: t,\n      unique: n,\n      multi: r,\n      auto: i,\n      compound: o,\n      src: (n && !a ? \"&\" : \"\") + (r ? \"*\" : \"\") + (i ? \"++\" : \"\") + Yt(t),\n      type: u\n    };\n  }\n  function Yt(e) {\n    return \"string\" == typeof e ? e : e ? \"[\" + [].join.call(e, \"+\") + \"]\" : \"\";\n  }\n  function $t(e, t, n) {\n    return {\n      name: e,\n      primKey: t,\n      indexes: n,\n      mappedClass: null,\n      idxByName: (r = function (e) {\n        return [e.name, e];\n      }, n.reduce(function (e, t, n) {\n        n = r(t, n);\n        return n && (e[n[0]] = n[1]), e;\n      }, {}))\n    };\n    var r;\n  }\n  var Qt = function (e) {\n    try {\n      return e.only([[]]), Qt = function () {\n        return [[]];\n      }, [[]];\n    } catch (e) {\n      return Qt = function () {\n        return He;\n      }, He;\n    }\n  };\n  function Gt(t) {\n    return null == t ? function () {} : \"string\" == typeof t ? 1 === (n = t).split(\".\").length ? function (e) {\n      return e[n];\n    } : function (e) {\n      return g(e, n);\n    } : function (e) {\n      return g(e, t);\n    };\n    var n;\n  }\n  function Xt(e) {\n    return [].slice.call(e);\n  }\n  var Ht = 0;\n  function Jt(e) {\n    return null == e ? \":id\" : \"string\" == typeof e ? e : \"[\".concat(e.join(\"+\"), \"]\");\n  }\n  function Zt(e, i, t) {\n    function _(e) {\n      if (3 === e.type) return null;\n      if (4 === e.type) throw new Error(\"Cannot convert never type to IDBKeyRange\");\n      var t = e.lower,\n        n = e.upper,\n        r = e.lowerOpen,\n        e = e.upperOpen;\n      return void 0 === t ? void 0 === n ? null : i.upperBound(n, !!e) : void 0 === n ? i.lowerBound(t, !!r) : i.bound(t, n, !!r, !!e);\n    }\n    function n(e) {\n      var h,\n        w = e.name;\n      return {\n        name: w,\n        schema: e,\n        mutate: function (e) {\n          var y = e.trans,\n            v = e.type,\n            m = e.keys,\n            b = e.values,\n            g = e.range;\n          return new Promise(function (t, e) {\n            t = Ie(t);\n            var n = y.objectStore(w),\n              r = null == n.keyPath,\n              i = \"put\" === v || \"add\" === v;\n            if (!i && \"delete\" !== v && \"deleteRange\" !== v) throw new Error(\"Invalid operation type: \" + v);\n            var o,\n              a = (m || b || {\n                length: 1\n              }).length;\n            if (m && b && m.length !== b.length) throw new Error(\"Given keys array must have same length as given values array.\");\n            if (0 === a) return t({\n              numFailures: 0,\n              failures: {},\n              results: [],\n              lastResult: void 0\n            });\n            function u(e) {\n              ++l, Mt(e);\n            }\n            var s = [],\n              c = [],\n              l = 0;\n            if (\"deleteRange\" === v) {\n              if (4 === g.type) return t({\n                numFailures: l,\n                failures: c,\n                results: [],\n                lastResult: void 0\n              });\n              3 === g.type ? s.push(o = n.clear()) : s.push(o = n.delete(_(g)));\n            } else {\n              var r = i ? r ? [b, m] : [b, null] : [m, null],\n                f = r[0],\n                h = r[1];\n              if (i) for (var d = 0; d < a; ++d) s.push(o = h && void 0 !== h[d] ? n[v](f[d], h[d]) : n[v](f[d])), o.onerror = u;else for (d = 0; d < a; ++d) s.push(o = n[v](f[d])), o.onerror = u;\n            }\n            function p(e) {\n              e = e.target.result, s.forEach(function (e, t) {\n                return null != e.error && (c[t] = e.error);\n              }), t({\n                numFailures: l,\n                failures: c,\n                results: \"delete\" === v ? m : s.map(function (e) {\n                  return e.result;\n                }),\n                lastResult: e\n              });\n            }\n            o.onerror = function (e) {\n              u(e), p(e);\n            }, o.onsuccess = p;\n          });\n        },\n        getMany: function (e) {\n          var f = e.trans,\n            h = e.keys;\n          return new Promise(function (t, e) {\n            t = Ie(t);\n            for (var n, r = f.objectStore(w), i = h.length, o = new Array(i), a = 0, u = 0, s = function (e) {\n                e = e.target;\n                o[e._pos] = e.result, ++u === a && t(o);\n              }, c = Ft(e), l = 0; l < i; ++l) null != h[l] && ((n = r.get(h[l]))._pos = l, n.onsuccess = s, n.onerror = c, ++a);\n            0 === a && t(o);\n          });\n        },\n        get: function (e) {\n          var r = e.trans,\n            i = e.key;\n          return new Promise(function (t, e) {\n            t = Ie(t);\n            var n = r.objectStore(w).get(i);\n            n.onsuccess = function (e) {\n              return t(e.target.result);\n            }, n.onerror = Ft(e);\n          });\n        },\n        query: (h = s, function (f) {\n          return new Promise(function (n, e) {\n            n = Ie(n);\n            var r,\n              i,\n              o,\n              t = f.trans,\n              a = f.values,\n              u = f.limit,\n              s = f.query,\n              c = u === 1 / 0 ? void 0 : u,\n              l = s.index,\n              s = s.range,\n              t = t.objectStore(w),\n              l = l.isPrimaryKey ? t : t.index(l.name),\n              s = _(s);\n            if (0 === u) return n({\n              result: []\n            });\n            h ? ((c = a ? l.getAll(s, c) : l.getAllKeys(s, c)).onsuccess = function (e) {\n              return n({\n                result: e.target.result\n              });\n            }, c.onerror = Ft(e)) : (r = 0, i = !a && \"openKeyCursor\" in l ? l.openKeyCursor(s) : l.openCursor(s), o = [], i.onsuccess = function (e) {\n              var t = i.result;\n              return t ? (o.push(a ? t.value : t.primaryKey), ++r === u ? n({\n                result: o\n              }) : void t.continue()) : n({\n                result: o\n              });\n            }, i.onerror = Ft(e));\n          });\n        }),\n        openCursor: function (e) {\n          var c = e.trans,\n            o = e.values,\n            a = e.query,\n            u = e.reverse,\n            l = e.unique;\n          return new Promise(function (t, n) {\n            t = Ie(t);\n            var e = a.index,\n              r = a.range,\n              i = c.objectStore(w),\n              i = e.isPrimaryKey ? i : i.index(e.name),\n              e = u ? l ? \"prevunique\" : \"prev\" : l ? \"nextunique\" : \"next\",\n              s = !o && \"openKeyCursor\" in i ? i.openKeyCursor(_(r), e) : i.openCursor(_(r), e);\n            s.onerror = Ft(n), s.onsuccess = Ie(function (e) {\n              var r,\n                i,\n                o,\n                a,\n                u = s.result;\n              u ? (u.___id = ++Ht, u.done = !1, r = u.continue.bind(u), i = (i = u.continuePrimaryKey) && i.bind(u), o = u.advance.bind(u), a = function () {\n                throw new Error(\"Cursor not stopped\");\n              }, u.trans = c, u.stop = u.continue = u.continuePrimaryKey = u.advance = function () {\n                throw new Error(\"Cursor not started\");\n              }, u.fail = Ie(n), u.next = function () {\n                var e = this,\n                  t = 1;\n                return this.start(function () {\n                  return t-- ? e.continue() : e.stop();\n                }).then(function () {\n                  return e;\n                });\n              }, u.start = function (e) {\n                function t() {\n                  if (s.result) try {\n                    e();\n                  } catch (e) {\n                    u.fail(e);\n                  } else u.done = !0, u.start = function () {\n                    throw new Error(\"Cursor behind last entry\");\n                  }, u.stop();\n                }\n                var n = new Promise(function (t, e) {\n                  t = Ie(t), s.onerror = Ft(e), u.fail = e, u.stop = function (e) {\n                    u.stop = u.continue = u.continuePrimaryKey = u.advance = a, t(e);\n                  };\n                });\n                return s.onsuccess = Ie(function (e) {\n                  s.onsuccess = t, t();\n                }), u.continue = r, u.continuePrimaryKey = i, u.advance = o, t(), n;\n              }, t(u)) : t(null);\n            }, n);\n          });\n        },\n        count: function (e) {\n          var t = e.query,\n            i = e.trans,\n            o = t.index,\n            a = t.range;\n          return new Promise(function (t, e) {\n            var n = i.objectStore(w),\n              r = o.isPrimaryKey ? n : n.index(o.name),\n              n = _(a),\n              r = n ? r.count(n) : r.count();\n            r.onsuccess = Ie(function (e) {\n              return t(e.target.result);\n            }), r.onerror = Ft(e);\n          });\n        }\n      };\n    }\n    var r,\n      o,\n      a,\n      u = (o = t, a = Xt((r = e).objectStoreNames), {\n        schema: {\n          name: r.name,\n          tables: a.map(function (e) {\n            return o.objectStore(e);\n          }).map(function (t) {\n            var e = t.keyPath,\n              n = t.autoIncrement,\n              r = x(e),\n              i = {},\n              n = {\n                name: t.name,\n                primaryKey: {\n                  name: null,\n                  isPrimaryKey: !0,\n                  outbound: null == e,\n                  compound: r,\n                  keyPath: e,\n                  autoIncrement: n,\n                  unique: !0,\n                  extractKey: Gt(e)\n                },\n                indexes: Xt(t.indexNames).map(function (e) {\n                  return t.index(e);\n                }).map(function (e) {\n                  var t = e.name,\n                    n = e.unique,\n                    r = e.multiEntry,\n                    e = e.keyPath,\n                    r = {\n                      name: t,\n                      compound: x(e),\n                      keyPath: e,\n                      unique: n,\n                      multiEntry: r,\n                      extractKey: Gt(e)\n                    };\n                  return i[Jt(e)] = r;\n                }),\n                getIndexByKeyPath: function (e) {\n                  return i[Jt(e)];\n                }\n              };\n            return i[\":id\"] = n.primaryKey, null != e && (i[Jt(e)] = n.primaryKey), n;\n          })\n        },\n        hasGetAll: 0 < a.length && \"getAll\" in o.objectStore(a[0]) && !(\"undefined\" != typeof navigator && /Safari/.test(navigator.userAgent) && !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) && [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604)\n      }),\n      t = u.schema,\n      s = u.hasGetAll,\n      u = t.tables.map(n),\n      c = {};\n    return u.forEach(function (e) {\n      return c[e.name] = e;\n    }), {\n      stack: \"dbcore\",\n      transaction: e.transaction.bind(e),\n      table: function (e) {\n        if (!c[e]) throw new Error(\"Table '\".concat(e, \"' not found\"));\n        return c[e];\n      },\n      MIN_KEY: -1 / 0,\n      MAX_KEY: Qt(i),\n      schema: t\n    };\n  }\n  function en(e, t, n, r) {\n    var i = n.IDBKeyRange;\n    return n.indexedDB, {\n      dbcore: (r = Zt(t, i, r), e.dbcore.reduce(function (e, t) {\n        t = t.create;\n        return _(_({}, e), t(e));\n      }, r))\n    };\n  }\n  function tn(n, e) {\n    var t = e.db,\n      e = en(n._middlewares, t, n._deps, e);\n    n.core = e.dbcore, n.tables.forEach(function (e) {\n      var t = e.name;\n      n.core.schema.tables.some(function (e) {\n        return e.name === t;\n      }) && (e.core = n.core.table(t), n[t] instanceof n.Table && (n[t].core = e.core));\n    });\n  }\n  function nn(i, e, t, o) {\n    t.forEach(function (n) {\n      var r = o[n];\n      e.forEach(function (e) {\n        var t = function e(t, n) {\n          return h(t, n) || (t = c(t)) && e(t, n);\n        }(e, n);\n        (!t || \"value\" in t && void 0 === t.value) && (e === i.Transaction.prototype || e instanceof i.Transaction ? l(e, n, {\n          get: function () {\n            return this.table(n);\n          },\n          set: function (e) {\n            u(this, n, {\n              value: e,\n              writable: !0,\n              configurable: !0,\n              enumerable: !0\n            });\n          }\n        }) : e[n] = new i.Table(n, r));\n      });\n    });\n  }\n  function rn(n, e) {\n    e.forEach(function (e) {\n      for (var t in e) e[t] instanceof n.Table && delete e[t];\n    });\n  }\n  function on(e, t) {\n    return e._cfg.version - t._cfg.version;\n  }\n  function an(n, r, i, e) {\n    var o = n._dbSchema;\n    i.objectStoreNames.contains(\"$meta\") && !o.$meta && (o.$meta = $t(\"$meta\", pn(\"\")[0], []), n._storeNames.push(\"$meta\"));\n    var a = n._createTransaction(\"readwrite\", n._storeNames, o);\n    a.create(i), a._completion.catch(e);\n    var u = a._reject.bind(a),\n      s = me.transless || me;\n    Ne(function () {\n      return me.trans = a, me.transless = s, 0 !== r ? (tn(n, i), t = r, ((e = a).storeNames.includes(\"$meta\") ? e.table(\"$meta\").get(\"version\").then(function (e) {\n        return null != e ? e : t;\n      }) : _e.resolve(t)).then(function (e) {\n        return c = e, l = a, f = i, t = [], e = (s = n)._versions, h = s._dbSchema = hn(0, s.idbdb, f), 0 !== (e = e.filter(function (e) {\n          return e._cfg.version >= c;\n        })).length ? (e.forEach(function (u) {\n          t.push(function () {\n            var t = h,\n              e = u._cfg.dbschema;\n            dn(s, t, f), dn(s, e, f), h = s._dbSchema = e;\n            var n = sn(t, e);\n            n.add.forEach(function (e) {\n              cn(f, e[0], e[1].primKey, e[1].indexes);\n            }), n.change.forEach(function (e) {\n              if (e.recreate) throw new Y.Upgrade(\"Not yet support for changing primary key\");\n              var t = f.objectStore(e.name);\n              e.add.forEach(function (e) {\n                return fn(t, e);\n              }), e.change.forEach(function (e) {\n                t.deleteIndex(e.name), fn(t, e);\n              }), e.del.forEach(function (e) {\n                return t.deleteIndex(e);\n              });\n            });\n            var r = u._cfg.contentUpgrade;\n            if (r && u._cfg.version > c) {\n              tn(s, f), l._memoizedTables = {};\n              var i = k(e);\n              n.del.forEach(function (e) {\n                i[e] = t[e];\n              }), rn(s, [s.Transaction.prototype]), nn(s, [s.Transaction.prototype], O(i), i), l.schema = i;\n              var o,\n                a = B(r);\n              a && Le();\n              n = _e.follow(function () {\n                var e;\n                (o = r(l)) && a && (e = Ue.bind(null, null), o.then(e, e));\n              });\n              return o && \"function\" == typeof o.then ? _e.resolve(o) : n.then(function () {\n                return o;\n              });\n            }\n          }), t.push(function (e) {\n            var t,\n              n,\n              r = u._cfg.dbschema;\n            t = r, n = e, [].slice.call(n.db.objectStoreNames).forEach(function (e) {\n              return null == t[e] && n.db.deleteObjectStore(e);\n            }), rn(s, [s.Transaction.prototype]), nn(s, [s.Transaction.prototype], s._storeNames, s._dbSchema), l.schema = s._dbSchema;\n          }), t.push(function (e) {\n            s.idbdb.objectStoreNames.contains(\"$meta\") && (Math.ceil(s.idbdb.version / 10) === u._cfg.version ? (s.idbdb.deleteObjectStore(\"$meta\"), delete s._dbSchema.$meta, s._storeNames = s._storeNames.filter(function (e) {\n              return \"$meta\" !== e;\n            })) : e.objectStore(\"$meta\").put(u._cfg.version, \"version\"));\n          });\n        }), function e() {\n          return t.length ? _e.resolve(t.shift()(l.idbtrans)).then(e) : _e.resolve();\n        }().then(function () {\n          ln(h, f);\n        })) : _e.resolve();\n        var s, c, l, f, t, h;\n      }).catch(u)) : (O(o).forEach(function (e) {\n        cn(i, e, o[e].primKey, o[e].indexes);\n      }), tn(n, i), void _e.follow(function () {\n        return n.on.populate.fire(a);\n      }).catch(u));\n      var e, t;\n    });\n  }\n  function un(e, r) {\n    ln(e._dbSchema, r), r.db.version % 10 != 0 || r.objectStoreNames.contains(\"$meta\") || r.db.createObjectStore(\"$meta\").add(Math.ceil(r.db.version / 10 - 1), \"version\");\n    var t = hn(0, e.idbdb, r);\n    dn(e, e._dbSchema, r);\n    for (var n = 0, i = sn(t, e._dbSchema).change; n < i.length; n++) {\n      var o = function (t) {\n        if (t.change.length || t.recreate) return console.warn(\"Unable to patch indexes of table \".concat(t.name, \" because it has changes on the type of index or primary key.\")), {\n          value: void 0\n        };\n        var n = r.objectStore(t.name);\n        t.add.forEach(function (e) {\n          ie && console.debug(\"Dexie upgrade patch: Creating missing index \".concat(t.name, \".\").concat(e.src)), fn(n, e);\n        });\n      }(i[n]);\n      if (\"object\" == typeof o) return o.value;\n    }\n  }\n  function sn(e, t) {\n    var n,\n      r = {\n        del: [],\n        add: [],\n        change: []\n      };\n    for (n in e) t[n] || r.del.push(n);\n    for (n in t) {\n      var i = e[n],\n        o = t[n];\n      if (i) {\n        var a = {\n          name: n,\n          def: o,\n          recreate: !1,\n          del: [],\n          add: [],\n          change: []\n        };\n        if (\"\" + (i.primKey.keyPath || \"\") != \"\" + (o.primKey.keyPath || \"\") || i.primKey.auto !== o.primKey.auto) a.recreate = !0, r.change.push(a);else {\n          var u = i.idxByName,\n            s = o.idxByName,\n            c = void 0;\n          for (c in u) s[c] || a.del.push(c);\n          for (c in s) {\n            var l = u[c],\n              f = s[c];\n            l ? l.src !== f.src && a.change.push(f) : a.add.push(f);\n          }\n          (0 < a.del.length || 0 < a.add.length || 0 < a.change.length) && r.change.push(a);\n        }\n      } else r.add.push([n, o]);\n    }\n    return r;\n  }\n  function cn(e, t, n, r) {\n    var i = e.db.createObjectStore(t, n.keyPath ? {\n      keyPath: n.keyPath,\n      autoIncrement: n.auto\n    } : {\n      autoIncrement: n.auto\n    });\n    return r.forEach(function (e) {\n      return fn(i, e);\n    }), i;\n  }\n  function ln(t, n) {\n    O(t).forEach(function (e) {\n      n.db.objectStoreNames.contains(e) || (ie && console.debug(\"Dexie: Creating missing table\", e), cn(n, e, t[e].primKey, t[e].indexes));\n    });\n  }\n  function fn(e, t) {\n    e.createIndex(t.name, t.keyPath, {\n      unique: t.unique,\n      multiEntry: t.multi\n    });\n  }\n  function hn(e, t, u) {\n    var s = {};\n    return b(t.objectStoreNames, 0).forEach(function (e) {\n      for (var t = u.objectStore(e), n = Wt(Yt(a = t.keyPath), a || \"\", !0, !1, !!t.autoIncrement, a && \"string\" != typeof a, !0), r = [], i = 0; i < t.indexNames.length; ++i) {\n        var o = t.index(t.indexNames[i]),\n          a = o.keyPath,\n          o = Wt(o.name, a, !!o.unique, !!o.multiEntry, !1, a && \"string\" != typeof a, !1);\n        r.push(o);\n      }\n      s[e] = $t(e, n, r);\n    }), s;\n  }\n  function dn(e, t, n) {\n    for (var r = n.db.objectStoreNames, i = 0; i < r.length; ++i) {\n      var o = r[i],\n        a = n.objectStore(o);\n      e._hasGetAll = \"getAll\" in a;\n      for (var u = 0; u < a.indexNames.length; ++u) {\n        var s = a.indexNames[u],\n          c = a.index(s).keyPath,\n          l = \"string\" == typeof c ? c : \"[\" + b(c).join(\"+\") + \"]\";\n        !t[o] || (c = t[o].idxByName[l]) && (c.name = s, delete t[o].idxByName[l], t[o].idxByName[s] = c);\n      }\n    }\n    \"undefined\" != typeof navigator && /Safari/.test(navigator.userAgent) && !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) && f.WorkerGlobalScope && f instanceof f.WorkerGlobalScope && [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604 && (e._hasGetAll = !1);\n  }\n  function pn(e) {\n    return e.split(\",\").map(function (e, t) {\n      var n = e.split(\":\"),\n        r = null === (i = n[1]) || void 0 === i ? void 0 : i.trim(),\n        i = (e = n[0].trim()).replace(/([&*]|\\+\\+)/g, \"\"),\n        n = /^\\[/.test(i) ? i.match(/^\\[(.*)\\]$/)[1].split(\"+\") : i;\n      return Wt(i, n || null, /\\&/.test(e), /\\*/.test(e), /\\+\\+/.test(e), x(n), 0 === t, r);\n    });\n  }\n  var yn = (vn.prototype._createTableSchema = $t, vn.prototype._parseIndexSyntax = pn, vn.prototype._parseStoresSpec = function (r, i) {\n    var o = this;\n    O(r).forEach(function (e) {\n      if (null !== r[e]) {\n        var t = o._parseIndexSyntax(r[e]),\n          n = t.shift();\n        if (!n) throw new Y.Schema(\"Invalid schema for table \" + e + \": \" + r[e]);\n        if (n.unique = !0, n.multi) throw new Y.Schema(\"Primary key cannot be multiEntry*\");\n        t.forEach(function (e) {\n          if (e.auto) throw new Y.Schema(\"Only primary key can be marked as autoIncrement (++)\");\n          if (!e.keyPath) throw new Y.Schema(\"Index must have a name and cannot be an empty string\");\n        });\n        t = o._createTableSchema(e, n, t);\n        i[e] = t;\n      }\n    });\n  }, vn.prototype.stores = function (e) {\n    var t = this.db;\n    this._cfg.storesSource = this._cfg.storesSource ? a(this._cfg.storesSource, e) : e;\n    var e = t._versions,\n      n = {},\n      r = {};\n    return e.forEach(function (e) {\n      a(n, e._cfg.storesSource), r = e._cfg.dbschema = {}, e._parseStoresSpec(n, r);\n    }), t._dbSchema = r, rn(t, [t._allTables, t, t.Transaction.prototype]), nn(t, [t._allTables, t, t.Transaction.prototype, this._cfg.tables], O(r), r), t._storeNames = O(r), this;\n  }, vn.prototype.upgrade = function (e) {\n    return this._cfg.contentUpgrade = re(this._cfg.contentUpgrade || G, e), this;\n  }, vn);\n  function vn() {}\n  function mn(e, t) {\n    var n = e._dbNamesDB;\n    return n || (n = e._dbNamesDB = new nr(tt, {\n      addons: [],\n      indexedDB: e,\n      IDBKeyRange: t\n    })).version(1).stores({\n      dbnames: \"name\"\n    }), n.table(\"dbnames\");\n  }\n  function bn(e) {\n    return e && \"function\" == typeof e.databases;\n  }\n  function gn(e) {\n    return Ne(function () {\n      return me.letThrough = !0, e();\n    });\n  }\n  function wn(e) {\n    return !(\"from\" in e);\n  }\n  var _n = function (e, t) {\n    if (!this) {\n      var n = new _n();\n      return e && \"d\" in e && a(n, e), n;\n    }\n    a(this, arguments.length ? {\n      d: 1,\n      from: e,\n      to: 1 < arguments.length ? t : e\n    } : {\n      d: 0\n    });\n  };\n  function xn(e, t, n) {\n    var r = st(t, n);\n    if (!isNaN(r)) {\n      if (0 < r) throw RangeError();\n      if (wn(e)) return a(e, {\n        from: t,\n        to: n,\n        d: 1\n      });\n      var i = e.l,\n        r = e.r;\n      if (st(n, e.from) < 0) return i ? xn(i, t, n) : e.l = {\n        from: t,\n        to: n,\n        d: 1,\n        l: null,\n        r: null\n      }, Kn(e);\n      if (0 < st(t, e.to)) return r ? xn(r, t, n) : e.r = {\n        from: t,\n        to: n,\n        d: 1,\n        l: null,\n        r: null\n      }, Kn(e);\n      st(t, e.from) < 0 && (e.from = t, e.l = null, e.d = r ? r.d + 1 : 1), 0 < st(n, e.to) && (e.to = n, e.r = null, e.d = e.l ? e.l.d + 1 : 1);\n      n = !e.r;\n      i && !e.l && kn(e, i), r && n && kn(e, r);\n    }\n  }\n  function kn(e, t) {\n    wn(t) || function e(t, n) {\n      var r = n.from,\n        i = n.to,\n        o = n.l,\n        n = n.r;\n      xn(t, r, i), o && e(t, o), n && e(t, n);\n    }(e, t);\n  }\n  function On(e, t) {\n    var n = Pn(t),\n      r = n.next();\n    if (r.done) return !1;\n    for (var i = r.value, o = Pn(e), a = o.next(i.from), u = a.value; !r.done && !a.done;) {\n      if (st(u.from, i.to) <= 0 && 0 <= st(u.to, i.from)) return !0;\n      st(i.from, u.from) < 0 ? i = (r = n.next(u.from)).value : u = (a = o.next(i.from)).value;\n    }\n    return !1;\n  }\n  function Pn(e) {\n    var n = wn(e) ? null : {\n      s: 0,\n      n: e\n    };\n    return {\n      next: function (e) {\n        for (var t = 0 < arguments.length; n;) switch (n.s) {\n          case 0:\n            if (n.s = 1, t) for (; n.n.l && st(e, n.n.from) < 0;) n = {\n              up: n,\n              n: n.n.l,\n              s: 1\n            };else for (; n.n.l;) n = {\n              up: n,\n              n: n.n.l,\n              s: 1\n            };\n          case 1:\n            if (n.s = 2, !t || st(e, n.n.to) <= 0) return {\n              value: n.n,\n              done: !1\n            };\n          case 2:\n            if (n.n.r) {\n              n.s = 3, n = {\n                up: n,\n                n: n.n.r,\n                s: 0\n              };\n              continue;\n            }\n          case 3:\n            n = n.up;\n        }\n        return {\n          done: !0\n        };\n      }\n    };\n  }\n  function Kn(e) {\n    var t,\n      n,\n      r = ((null === (t = e.r) || void 0 === t ? void 0 : t.d) || 0) - ((null === (n = e.l) || void 0 === n ? void 0 : n.d) || 0),\n      i = 1 < r ? \"r\" : r < -1 ? \"l\" : \"\";\n    i && (t = \"r\" == i ? \"l\" : \"r\", n = _({}, e), r = e[i], e.from = r.from, e.to = r.to, e[i] = r[i], n[i] = r[t], (e[t] = n).d = En(n)), e.d = En(e);\n  }\n  function En(e) {\n    var t = e.r,\n      e = e.l;\n    return (t ? e ? Math.max(t.d, e.d) : t.d : e ? e.d : 0) + 1;\n  }\n  function Sn(t, n) {\n    return O(n).forEach(function (e) {\n      t[e] ? kn(t[e], n[e]) : t[e] = function e(t) {\n        var n,\n          r,\n          i = {};\n        for (n in t) m(t, n) && (r = t[n], i[n] = !r || \"object\" != typeof r || K.has(r.constructor) ? r : e(r));\n        return i;\n      }(n[e]);\n    }), t;\n  }\n  function jn(t, n) {\n    return t.all || n.all || Object.keys(t).some(function (e) {\n      return n[e] && On(n[e], t[e]);\n    });\n  }\n  r(_n.prototype, ((F = {\n    add: function (e) {\n      return kn(this, e), this;\n    },\n    addKey: function (e) {\n      return xn(this, e, e), this;\n    },\n    addKeys: function (e) {\n      var t = this;\n      return e.forEach(function (e) {\n        return xn(t, e, e);\n      }), this;\n    },\n    hasKey: function (e) {\n      var t = Pn(this).next(e).value;\n      return t && st(t.from, e) <= 0 && 0 <= st(t.to, e);\n    }\n  })[C] = function () {\n    return Pn(this);\n  }, F));\n  var An = {},\n    Cn = {},\n    Tn = !1;\n  function In(e) {\n    Sn(Cn, e), Tn || (Tn = !0, setTimeout(function () {\n      Tn = !1, qn(Cn, !(Cn = {}));\n    }, 0));\n  }\n  function qn(e, t) {\n    void 0 === t && (t = !1);\n    var n = new Set();\n    if (e.all) for (var r = 0, i = Object.values(An); r < i.length; r++) Dn(a = i[r], e, n, t);else for (var o in e) {\n      var a,\n        u = /^idb\\:\\/\\/(.*)\\/(.*)\\//.exec(o);\n      u && (o = u[1], u = u[2], (a = An[\"idb://\".concat(o, \"/\").concat(u)]) && Dn(a, e, n, t));\n    }\n    n.forEach(function (e) {\n      return e();\n    });\n  }\n  function Dn(e, t, n, r) {\n    for (var i = [], o = 0, a = Object.entries(e.queries.query); o < a.length; o++) {\n      for (var u = a[o], s = u[0], c = [], l = 0, f = u[1]; l < f.length; l++) {\n        var h = f[l];\n        jn(t, h.obsSet) ? h.subscribers.forEach(function (e) {\n          return n.add(e);\n        }) : r && c.push(h);\n      }\n      r && i.push([s, c]);\n    }\n    if (r) for (var d = 0, p = i; d < p.length; d++) {\n      var y = p[d],\n        s = y[0],\n        c = y[1];\n      e.queries.query[s] = c;\n    }\n  }\n  function Bn(f) {\n    var h = f._state,\n      r = f._deps.indexedDB;\n    if (h.isBeingOpened || f.idbdb) return h.dbReadyPromise.then(function () {\n      return h.dbOpenError ? Xe(h.dbOpenError) : f;\n    });\n    h.isBeingOpened = !0, h.dbOpenError = null, h.openComplete = !1;\n    var t = h.openCanceller,\n      d = Math.round(10 * f.verno),\n      p = !1;\n    function e() {\n      if (h.openCanceller !== t) throw new Y.DatabaseClosed(\"db.open() was cancelled\");\n    }\n    function y() {\n      return new _e(function (s, n) {\n        if (e(), !r) throw new Y.MissingAPI();\n        var c = f.name,\n          l = h.autoSchema || !d ? r.open(c) : r.open(c, d);\n        if (!l) throw new Y.MissingAPI();\n        l.onerror = Ft(n), l.onblocked = Ie(f._fireOnBlocked), l.onupgradeneeded = Ie(function (e) {\n          var t;\n          v = l.transaction, h.autoSchema && !f._options.allowEmptyDB ? (l.onerror = Mt, v.abort(), l.result.close(), (t = r.deleteDatabase(c)).onsuccess = t.onerror = Ie(function () {\n            n(new Y.NoSuchDatabase(\"Database \".concat(c, \" doesnt exist\")));\n          })) : (v.onerror = Ft(n), e = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion, m = e < 1, f.idbdb = l.result, p && un(f, v), an(f, e / 10, v, n));\n        }, n), l.onsuccess = Ie(function () {\n          v = null;\n          var e,\n            t,\n            n,\n            r,\n            i,\n            o = f.idbdb = l.result,\n            a = b(o.objectStoreNames);\n          if (0 < a.length) try {\n            var u = o.transaction(1 === (r = a).length ? r[0] : r, \"readonly\");\n            if (h.autoSchema) t = o, n = u, (e = f).verno = t.version / 10, n = e._dbSchema = hn(0, t, n), e._storeNames = b(t.objectStoreNames, 0), nn(e, [e._allTables], O(n), n);else if (dn(f, f._dbSchema, u), ((i = sn(hn(0, (i = f).idbdb, u), i._dbSchema)).add.length || i.change.some(function (e) {\n              return e.add.length || e.change.length;\n            })) && !p) return console.warn(\"Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this.\"), o.close(), d = o.version + 1, p = !0, s(y());\n            tn(f, u);\n          } catch (e) {}\n          et.push(f), o.onversionchange = Ie(function (e) {\n            h.vcFired = !0, f.on(\"versionchange\").fire(e);\n          }), o.onclose = Ie(function () {\n            f.close({\n              disableAutoOpen: !1\n            });\n          }), m && (i = f._deps, u = c, o = i.indexedDB, i = i.IDBKeyRange, bn(o) || u === tt || mn(o, i).put({\n            name: u\n          }).catch(G)), s();\n        }, n);\n      }).catch(function (e) {\n        switch (null == e ? void 0 : e.name) {\n          case \"UnknownError\":\n            if (0 < h.PR1398_maxLoop) return h.PR1398_maxLoop--, console.warn(\"Dexie: Workaround for Chrome UnknownError on open()\"), y();\n            break;\n          case \"VersionError\":\n            if (0 < d) return d = 0, y();\n        }\n        return _e.reject(e);\n      });\n    }\n    var n,\n      i = h.dbReadyResolve,\n      v = null,\n      m = !1;\n    return _e.race([t, (\"undefined\" == typeof navigator ? _e.resolve() : !navigator.userAgentData && /Safari\\//.test(navigator.userAgent) && !/Chrom(e|ium)\\//.test(navigator.userAgent) && indexedDB.databases ? new Promise(function (e) {\n      function t() {\n        return indexedDB.databases().finally(e);\n      }\n      n = setInterval(t, 100), t();\n    }).finally(function () {\n      return clearInterval(n);\n    }) : Promise.resolve()).then(y)]).then(function () {\n      return e(), h.onReadyBeingFired = [], _e.resolve(gn(function () {\n        return f.on.ready.fire(f.vip);\n      })).then(function e() {\n        if (0 < h.onReadyBeingFired.length) {\n          var t = h.onReadyBeingFired.reduce(re, G);\n          return h.onReadyBeingFired = [], _e.resolve(gn(function () {\n            return t(f.vip);\n          })).then(e);\n        }\n      });\n    }).finally(function () {\n      h.openCanceller === t && (h.onReadyBeingFired = null, h.isBeingOpened = !1);\n    }).catch(function (e) {\n      h.dbOpenError = e;\n      try {\n        v && v.abort();\n      } catch (e) {}\n      return t === h.openCanceller && f._close(), Xe(e);\n    }).finally(function () {\n      h.openComplete = !0, i();\n    }).then(function () {\n      var n;\n      return m && (n = {}, f.tables.forEach(function (t) {\n        t.schema.indexes.forEach(function (e) {\n          e.name && (n[\"idb://\".concat(f.name, \"/\").concat(t.name, \"/\").concat(e.name)] = new _n(-1 / 0, [[[]]]));\n        }), n[\"idb://\".concat(f.name, \"/\").concat(t.name, \"/\")] = n[\"idb://\".concat(f.name, \"/\").concat(t.name, \"/:dels\")] = new _n(-1 / 0, [[[]]]);\n      }), Ut(Nt).fire(n), qn(n, !0)), f;\n    });\n  }\n  function Rn(t) {\n    function e(e) {\n      return t.next(e);\n    }\n    var r = n(e),\n      i = n(function (e) {\n        return t.throw(e);\n      });\n    function n(n) {\n      return function (e) {\n        var t = n(e),\n          e = t.value;\n        return t.done ? e : e && \"function\" == typeof e.then ? e.then(r, i) : x(e) ? Promise.all(e).then(r, i) : r(e);\n      };\n    }\n    return n(e)();\n  }\n  function Fn(e, t, n) {\n    for (var r = x(e) ? e.slice() : [e], i = 0; i < n; ++i) r.push(t);\n    return r;\n  }\n  var Mn = {\n    stack: \"dbcore\",\n    name: \"VirtualIndexMiddleware\",\n    level: 1,\n    create: function (f) {\n      return _(_({}, f), {\n        table: function (e) {\n          var a = f.table(e),\n            t = a.schema,\n            u = {},\n            s = [];\n          function c(e, t, n) {\n            var r = Jt(e),\n              i = u[r] = u[r] || [],\n              o = null == e ? 0 : \"string\" == typeof e ? 1 : e.length,\n              a = 0 < t,\n              a = _(_({}, n), {\n                name: a ? \"\".concat(r, \"(virtual-from:\").concat(n.name, \")\") : n.name,\n                lowLevelIndex: n,\n                isVirtual: a,\n                keyTail: t,\n                keyLength: o,\n                extractKey: Gt(e),\n                unique: !a && n.unique\n              });\n            return i.push(a), a.isPrimaryKey || s.push(a), 1 < o && c(2 === o ? e[0] : e.slice(0, o - 1), t + 1, n), i.sort(function (e, t) {\n              return e.keyTail - t.keyTail;\n            }), a;\n          }\n          e = c(t.primaryKey.keyPath, 0, t.primaryKey);\n          u[\":id\"] = [e];\n          for (var n = 0, r = t.indexes; n < r.length; n++) {\n            var i = r[n];\n            c(i.keyPath, 0, i);\n          }\n          function l(e) {\n            var t,\n              n = e.query.index;\n            return n.isVirtual ? _(_({}, e), {\n              query: {\n                index: n.lowLevelIndex,\n                range: (t = e.query.range, n = n.keyTail, {\n                  type: 1 === t.type ? 2 : t.type,\n                  lower: Fn(t.lower, t.lowerOpen ? f.MAX_KEY : f.MIN_KEY, n),\n                  lowerOpen: !0,\n                  upper: Fn(t.upper, t.upperOpen ? f.MIN_KEY : f.MAX_KEY, n),\n                  upperOpen: !0\n                })\n              }\n            }) : e;\n          }\n          return _(_({}, a), {\n            schema: _(_({}, t), {\n              primaryKey: e,\n              indexes: s,\n              getIndexByKeyPath: function (e) {\n                return (e = u[Jt(e)]) && e[0];\n              }\n            }),\n            count: function (e) {\n              return a.count(l(e));\n            },\n            query: function (e) {\n              return a.query(l(e));\n            },\n            openCursor: function (t) {\n              var e = t.query.index,\n                r = e.keyTail,\n                n = e.isVirtual,\n                i = e.keyLength;\n              return n ? a.openCursor(l(t)).then(function (e) {\n                return e && o(e);\n              }) : a.openCursor(t);\n              function o(n) {\n                return Object.create(n, {\n                  continue: {\n                    value: function (e) {\n                      null != e ? n.continue(Fn(e, t.reverse ? f.MAX_KEY : f.MIN_KEY, r)) : t.unique ? n.continue(n.key.slice(0, i).concat(t.reverse ? f.MIN_KEY : f.MAX_KEY, r)) : n.continue();\n                    }\n                  },\n                  continuePrimaryKey: {\n                    value: function (e, t) {\n                      n.continuePrimaryKey(Fn(e, f.MAX_KEY, r), t);\n                    }\n                  },\n                  primaryKey: {\n                    get: function () {\n                      return n.primaryKey;\n                    }\n                  },\n                  key: {\n                    get: function () {\n                      var e = n.key;\n                      return 1 === i ? e[0] : e.slice(0, i);\n                    }\n                  },\n                  value: {\n                    get: function () {\n                      return n.value;\n                    }\n                  }\n                });\n              }\n            }\n          });\n        }\n      });\n    }\n  };\n  function Nn(i, o, a, u) {\n    return a = a || {}, u = u || \"\", O(i).forEach(function (e) {\n      var t, n, r;\n      m(o, e) ? (t = i[e], n = o[e], \"object\" == typeof t && \"object\" == typeof n && t && n ? (r = A(t)) !== A(n) ? a[u + e] = o[e] : \"Object\" === r ? Nn(t, n, a, u + e + \".\") : t !== n && (a[u + e] = o[e]) : t !== n && (a[u + e] = o[e])) : a[u + e] = void 0;\n    }), O(o).forEach(function (e) {\n      m(i, e) || (a[u + e] = o[e]);\n    }), a;\n  }\n  function Ln(e, t) {\n    return \"delete\" === t.type ? t.keys : t.keys || t.values.map(e.extractKey);\n  }\n  var Un = {\n    stack: \"dbcore\",\n    name: \"HooksMiddleware\",\n    level: 2,\n    create: function (e) {\n      return _(_({}, e), {\n        table: function (r) {\n          var y = e.table(r),\n            v = y.schema.primaryKey;\n          return _(_({}, y), {\n            mutate: function (e) {\n              var t = me.trans,\n                n = t.table(r).hook,\n                h = n.deleting,\n                d = n.creating,\n                p = n.updating;\n              switch (e.type) {\n                case \"add\":\n                  if (d.fire === G) break;\n                  return t._promise(\"readwrite\", function () {\n                    return a(e);\n                  }, !0);\n                case \"put\":\n                  if (d.fire === G && p.fire === G) break;\n                  return t._promise(\"readwrite\", function () {\n                    return a(e);\n                  }, !0);\n                case \"delete\":\n                  if (h.fire === G) break;\n                  return t._promise(\"readwrite\", function () {\n                    return a(e);\n                  }, !0);\n                case \"deleteRange\":\n                  if (h.fire === G) break;\n                  return t._promise(\"readwrite\", function () {\n                    return function n(r, i, o) {\n                      return y.query({\n                        trans: r,\n                        values: !1,\n                        query: {\n                          index: v,\n                          range: i\n                        },\n                        limit: o\n                      }).then(function (e) {\n                        var t = e.result;\n                        return a({\n                          type: \"delete\",\n                          keys: t,\n                          trans: r\n                        }).then(function (e) {\n                          return 0 < e.numFailures ? Promise.reject(e.failures[0]) : t.length < o ? {\n                            failures: [],\n                            numFailures: 0,\n                            lastResult: void 0\n                          } : n(r, _(_({}, i), {\n                            lower: t[t.length - 1],\n                            lowerOpen: !0\n                          }), o);\n                        });\n                      });\n                    }(e.trans, e.range, 1e4);\n                  }, !0);\n              }\n              return y.mutate(e);\n              function a(c) {\n                var e,\n                  t,\n                  n,\n                  l = me.trans,\n                  f = c.keys || Ln(v, c);\n                if (!f) throw new Error(\"Keys missing\");\n                return \"delete\" !== (c = \"add\" === c.type || \"put\" === c.type ? _(_({}, c), {\n                  keys: f\n                }) : _({}, c)).type && (c.values = i([], c.values, !0)), c.keys && (c.keys = i([], c.keys, !0)), e = y, n = f, (\"add\" === (t = c).type ? Promise.resolve([]) : e.getMany({\n                  trans: t.trans,\n                  keys: n,\n                  cache: \"immutable\"\n                })).then(function (u) {\n                  var s = f.map(function (e, t) {\n                    var n,\n                      r,\n                      i,\n                      o = u[t],\n                      a = {\n                        onerror: null,\n                        onsuccess: null\n                      };\n                    return \"delete\" === c.type ? h.fire.call(a, e, o, l) : \"add\" === c.type || void 0 === o ? (n = d.fire.call(a, e, c.values[t], l), null == e && null != n && (c.keys[t] = e = n, v.outbound || w(c.values[t], v.keyPath, e))) : (n = Nn(o, c.values[t]), (r = p.fire.call(a, n, e, o, l)) && (i = c.values[t], Object.keys(r).forEach(function (e) {\n                      m(i, e) ? i[e] = r[e] : w(i, e, r[e]);\n                    }))), a;\n                  });\n                  return y.mutate(c).then(function (e) {\n                    for (var t = e.failures, n = e.results, r = e.numFailures, e = e.lastResult, i = 0; i < f.length; ++i) {\n                      var o = (n || f)[i],\n                        a = s[i];\n                      null == o ? a.onerror && a.onerror(t[i]) : a.onsuccess && a.onsuccess(\"put\" === c.type && u[i] ? c.values[i] : o);\n                    }\n                    return {\n                      failures: t,\n                      results: n,\n                      numFailures: r,\n                      lastResult: e\n                    };\n                  }).catch(function (t) {\n                    return s.forEach(function (e) {\n                      return e.onerror && e.onerror(t);\n                    }), Promise.reject(t);\n                  });\n                });\n              }\n            }\n          });\n        }\n      });\n    }\n  };\n  function Vn(e, t, n) {\n    try {\n      if (!t) return null;\n      if (t.keys.length < e.length) return null;\n      for (var r = [], i = 0, o = 0; i < t.keys.length && o < e.length; ++i) 0 === st(t.keys[i], e[o]) && (r.push(n ? S(t.values[i]) : t.values[i]), ++o);\n      return r.length === e.length ? r : null;\n    } catch (e) {\n      return null;\n    }\n  }\n  var zn = {\n    stack: \"dbcore\",\n    level: -1,\n    create: function (t) {\n      return {\n        table: function (e) {\n          var n = t.table(e);\n          return _(_({}, n), {\n            getMany: function (t) {\n              if (!t.cache) return n.getMany(t);\n              var e = Vn(t.keys, t.trans._cache, \"clone\" === t.cache);\n              return e ? _e.resolve(e) : n.getMany(t).then(function (e) {\n                return t.trans._cache = {\n                  keys: t.keys,\n                  values: \"clone\" === t.cache ? S(e) : e\n                }, e;\n              });\n            },\n            mutate: function (e) {\n              return \"add\" !== e.type && (e.trans._cache = null), n.mutate(e);\n            }\n          });\n        }\n      };\n    }\n  };\n  function Wn(e, t) {\n    return \"readonly\" === e.trans.mode && !!e.subscr && !e.trans.explicit && \"disabled\" !== e.trans.db._options.cache && !t.schema.primaryKey.outbound;\n  }\n  function Yn(e, t) {\n    switch (e) {\n      case \"query\":\n        return t.values && !t.unique;\n      case \"get\":\n      case \"getMany\":\n      case \"count\":\n      case \"openCursor\":\n        return !1;\n    }\n  }\n  var $n = {\n    stack: \"dbcore\",\n    level: 0,\n    name: \"Observability\",\n    create: function (b) {\n      var g = b.schema.name,\n        w = new _n(b.MIN_KEY, b.MAX_KEY);\n      return _(_({}, b), {\n        transaction: function (e, t, n) {\n          if (me.subscr && \"readonly\" !== t) throw new Y.ReadOnly(\"Readwrite transaction in liveQuery context. Querier source: \".concat(me.querier));\n          return b.transaction(e, t, n);\n        },\n        table: function (d) {\n          var p = b.table(d),\n            y = p.schema,\n            v = y.primaryKey,\n            e = y.indexes,\n            c = v.extractKey,\n            l = v.outbound,\n            m = v.autoIncrement && e.filter(function (e) {\n              return e.compound && e.keyPath.includes(v.keyPath);\n            }),\n            t = _(_({}, p), {\n              mutate: function (a) {\n                function u(e) {\n                  return e = \"idb://\".concat(g, \"/\").concat(d, \"/\").concat(e), n[e] || (n[e] = new _n());\n                }\n                var e,\n                  o,\n                  s,\n                  t = a.trans,\n                  n = a.mutatedParts || (a.mutatedParts = {}),\n                  r = u(\"\"),\n                  i = u(\":dels\"),\n                  c = a.type,\n                  l = \"deleteRange\" === a.type ? [a.range] : \"delete\" === a.type ? [a.keys] : a.values.length < 50 ? [Ln(v, a).filter(function (e) {\n                    return e;\n                  }), a.values] : [],\n                  f = l[0],\n                  h = l[1],\n                  l = a.trans._cache;\n                return x(f) ? (r.addKeys(f), (l = \"delete\" === c || f.length === h.length ? Vn(f, l) : null) || i.addKeys(f), (l || h) && (e = u, o = l, s = h, y.indexes.forEach(function (t) {\n                  var n = e(t.name || \"\");\n                  function r(e) {\n                    return null != e ? t.extractKey(e) : null;\n                  }\n                  function i(e) {\n                    return t.multiEntry && x(e) ? e.forEach(function (e) {\n                      return n.addKey(e);\n                    }) : n.addKey(e);\n                  }\n                  (o || s).forEach(function (e, t) {\n                    var n = o && r(o[t]),\n                      t = s && r(s[t]);\n                    0 !== st(n, t) && (null != n && i(n), null != t && i(t));\n                  });\n                }))) : f ? (h = {\n                  from: null !== (h = f.lower) && void 0 !== h ? h : b.MIN_KEY,\n                  to: null !== (h = f.upper) && void 0 !== h ? h : b.MAX_KEY\n                }, i.add(h), r.add(h)) : (r.add(w), i.add(w), y.indexes.forEach(function (e) {\n                  return u(e.name).add(w);\n                })), p.mutate(a).then(function (o) {\n                  return !f || \"add\" !== a.type && \"put\" !== a.type || (r.addKeys(o.results), m && m.forEach(function (t) {\n                    for (var e = a.values.map(function (e) {\n                        return t.extractKey(e);\n                      }), n = t.keyPath.findIndex(function (e) {\n                        return e === v.keyPath;\n                      }), r = 0, i = o.results.length; r < i; ++r) e[r][n] = o.results[r];\n                    u(t.name).addKeys(e);\n                  })), t.mutatedParts = Sn(t.mutatedParts || {}, n), o;\n                });\n              }\n            }),\n            e = function (e) {\n              var t = e.query,\n                e = t.index,\n                t = t.range;\n              return [e, new _n(null !== (e = t.lower) && void 0 !== e ? e : b.MIN_KEY, null !== (t = t.upper) && void 0 !== t ? t : b.MAX_KEY)];\n            },\n            f = {\n              get: function (e) {\n                return [v, new _n(e.key)];\n              },\n              getMany: function (e) {\n                return [v, new _n().addKeys(e.keys)];\n              },\n              count: e,\n              query: e,\n              openCursor: e\n            };\n          return O(f).forEach(function (s) {\n            t[s] = function (i) {\n              var e = me.subscr,\n                t = !!e,\n                n = Wn(me, p) && Yn(s, i) ? i.obsSet = {} : e;\n              if (t) {\n                var r = function (e) {\n                    e = \"idb://\".concat(g, \"/\").concat(d, \"/\").concat(e);\n                    return n[e] || (n[e] = new _n());\n                  },\n                  o = r(\"\"),\n                  a = r(\":dels\"),\n                  e = f[s](i),\n                  t = e[0],\n                  e = e[1];\n                if ((\"query\" === s && t.isPrimaryKey && !i.values ? a : r(t.name || \"\")).add(e), !t.isPrimaryKey) {\n                  if (\"count\" !== s) {\n                    var u = \"query\" === s && l && i.values && p.query(_(_({}, i), {\n                      values: !1\n                    }));\n                    return p[s].apply(this, arguments).then(function (t) {\n                      if (\"query\" === s) {\n                        if (l && i.values) return u.then(function (e) {\n                          e = e.result;\n                          return o.addKeys(e), t;\n                        });\n                        var e = i.values ? t.result.map(c) : t.result;\n                        (i.values ? o : a).addKeys(e);\n                      } else if (\"openCursor\" === s) {\n                        var n = t,\n                          r = i.values;\n                        return n && Object.create(n, {\n                          key: {\n                            get: function () {\n                              return a.addKey(n.primaryKey), n.key;\n                            }\n                          },\n                          primaryKey: {\n                            get: function () {\n                              var e = n.primaryKey;\n                              return a.addKey(e), e;\n                            }\n                          },\n                          value: {\n                            get: function () {\n                              return r && o.addKey(n.primaryKey), n.value;\n                            }\n                          }\n                        });\n                      }\n                      return t;\n                    });\n                  }\n                  a.add(w);\n                }\n              }\n              return p[s].apply(this, arguments);\n            };\n          }), t;\n        }\n      });\n    }\n  };\n  function Qn(e, t, n) {\n    if (0 === n.numFailures) return t;\n    if (\"deleteRange\" === t.type) return null;\n    var r = t.keys ? t.keys.length : \"values\" in t && t.values ? t.values.length : 1;\n    if (n.numFailures === r) return null;\n    t = _({}, t);\n    return x(t.keys) && (t.keys = t.keys.filter(function (e, t) {\n      return !(t in n.failures);\n    })), \"values\" in t && x(t.values) && (t.values = t.values.filter(function (e, t) {\n      return !(t in n.failures);\n    })), t;\n  }\n  function Gn(e, t) {\n    return n = e, (void 0 === (r = t).lower || (r.lowerOpen ? 0 < st(n, r.lower) : 0 <= st(n, r.lower))) && (e = e, void 0 === (t = t).upper || (t.upperOpen ? st(e, t.upper) < 0 : st(e, t.upper) <= 0));\n    var n, r;\n  }\n  function Xn(e, d, t, n, r, i) {\n    if (!t || 0 === t.length) return e;\n    var o = d.query.index,\n      p = o.multiEntry,\n      y = d.query.range,\n      v = n.schema.primaryKey.extractKey,\n      m = o.extractKey,\n      a = (o.lowLevelIndex || o).extractKey,\n      t = t.reduce(function (e, t) {\n        var n = e,\n          r = [];\n        if (\"add\" === t.type || \"put\" === t.type) for (var i = new _n(), o = t.values.length - 1; 0 <= o; --o) {\n          var a,\n            u = t.values[o],\n            s = v(u);\n          i.hasKey(s) || (a = m(u), (p && x(a) ? a.some(function (e) {\n            return Gn(e, y);\n          }) : Gn(a, y)) && (i.addKey(s), r.push(u)));\n        }\n        switch (t.type) {\n          case \"add\":\n            var c = new _n().addKeys(d.values ? e.map(function (e) {\n                return v(e);\n              }) : e),\n              n = e.concat(d.values ? r.filter(function (e) {\n                e = v(e);\n                return !c.hasKey(e) && (c.addKey(e), !0);\n              }) : r.map(function (e) {\n                return v(e);\n              }).filter(function (e) {\n                return !c.hasKey(e) && (c.addKey(e), !0);\n              }));\n            break;\n          case \"put\":\n            var l = new _n().addKeys(t.values.map(function (e) {\n              return v(e);\n            }));\n            n = e.filter(function (e) {\n              return !l.hasKey(d.values ? v(e) : e);\n            }).concat(d.values ? r : r.map(function (e) {\n              return v(e);\n            }));\n            break;\n          case \"delete\":\n            var f = new _n().addKeys(t.keys);\n            n = e.filter(function (e) {\n              return !f.hasKey(d.values ? v(e) : e);\n            });\n            break;\n          case \"deleteRange\":\n            var h = t.range;\n            n = e.filter(function (e) {\n              return !Gn(v(e), h);\n            });\n        }\n        return n;\n      }, e);\n    return t === e ? e : (t.sort(function (e, t) {\n      return st(a(e), a(t)) || st(v(e), v(t));\n    }), d.limit && d.limit < 1 / 0 && (t.length > d.limit ? t.length = d.limit : e.length === d.limit && t.length < d.limit && (r.dirty = !0)), i ? Object.freeze(t) : t);\n  }\n  function Hn(e, t) {\n    return 0 === st(e.lower, t.lower) && 0 === st(e.upper, t.upper) && !!e.lowerOpen == !!t.lowerOpen && !!e.upperOpen == !!t.upperOpen;\n  }\n  function Jn(e, t) {\n    return function (e, t, n, r) {\n      if (void 0 === e) return void 0 !== t ? -1 : 0;\n      if (void 0 === t) return 1;\n      if (0 === (t = st(e, t))) {\n        if (n && r) return 0;\n        if (n) return 1;\n        if (r) return -1;\n      }\n      return t;\n    }(e.lower, t.lower, e.lowerOpen, t.lowerOpen) <= 0 && 0 <= function (e, t, n, r) {\n      if (void 0 === e) return void 0 !== t ? 1 : 0;\n      if (void 0 === t) return -1;\n      if (0 === (t = st(e, t))) {\n        if (n && r) return 0;\n        if (n) return -1;\n        if (r) return 1;\n      }\n      return t;\n    }(e.upper, t.upper, e.upperOpen, t.upperOpen);\n  }\n  function Zn(n, r, i, e) {\n    n.subscribers.add(i), e.addEventListener(\"abort\", function () {\n      var e, t;\n      n.subscribers.delete(i), 0 === n.subscribers.size && (e = n, t = r, setTimeout(function () {\n        0 === e.subscribers.size && I(t, e);\n      }, 3e3));\n    });\n  }\n  var er = {\n    stack: \"dbcore\",\n    level: 0,\n    name: \"Cache\",\n    create: function (k) {\n      var O = k.schema.name;\n      return _(_({}, k), {\n        transaction: function (g, w, e) {\n          var _,\n            t,\n            x = k.transaction(g, w, e);\n          return \"readwrite\" === w && (t = (_ = new AbortController()).signal, e = function (b) {\n            return function () {\n              if (_.abort(), \"readwrite\" === w) {\n                for (var t = new Set(), e = 0, n = g; e < n.length; e++) {\n                  var r = n[e],\n                    i = An[\"idb://\".concat(O, \"/\").concat(r)];\n                  if (i) {\n                    var o = k.table(r),\n                      a = i.optimisticOps.filter(function (e) {\n                        return e.trans === x;\n                      });\n                    if (x._explicit && b && x.mutatedParts) for (var u = 0, s = Object.values(i.queries.query); u < s.length; u++) for (var c = 0, l = (d = s[u]).slice(); c < l.length; c++) jn((p = l[c]).obsSet, x.mutatedParts) && (I(d, p), p.subscribers.forEach(function (e) {\n                      return t.add(e);\n                    }));else if (0 < a.length) {\n                      i.optimisticOps = i.optimisticOps.filter(function (e) {\n                        return e.trans !== x;\n                      });\n                      for (var f = 0, h = Object.values(i.queries.query); f < h.length; f++) for (var d, p, y, v = 0, m = (d = h[f]).slice(); v < m.length; v++) null != (p = m[v]).res && x.mutatedParts && (b && !p.dirty ? (y = Object.isFrozen(p.res), y = Xn(p.res, p.req, a, o, p, y), p.dirty ? (I(d, p), p.subscribers.forEach(function (e) {\n                        return t.add(e);\n                      })) : y !== p.res && (p.res = y, p.promise = _e.resolve({\n                        result: y\n                      }))) : (p.dirty && I(d, p), p.subscribers.forEach(function (e) {\n                        return t.add(e);\n                      })));\n                    }\n                  }\n                }\n                t.forEach(function (e) {\n                  return e();\n                });\n              }\n            };\n          }, x.addEventListener(\"abort\", e(!1), {\n            signal: t\n          }), x.addEventListener(\"error\", e(!1), {\n            signal: t\n          }), x.addEventListener(\"complete\", e(!0), {\n            signal: t\n          })), x;\n        },\n        table: function (c) {\n          var l = k.table(c),\n            i = l.schema.primaryKey;\n          return _(_({}, l), {\n            mutate: function (t) {\n              var e = me.trans;\n              if (i.outbound || \"disabled\" === e.db._options.cache || e.explicit || \"readwrite\" !== e.idbtrans.mode) return l.mutate(t);\n              var n = An[\"idb://\".concat(O, \"/\").concat(c)];\n              if (!n) return l.mutate(t);\n              e = l.mutate(t);\n              return \"add\" !== t.type && \"put\" !== t.type || !(50 <= t.values.length || Ln(i, t).some(function (e) {\n                return null == e;\n              })) ? (n.optimisticOps.push(t), t.mutatedParts && In(t.mutatedParts), e.then(function (e) {\n                0 < e.numFailures && (I(n.optimisticOps, t), (e = Qn(0, t, e)) && n.optimisticOps.push(e), t.mutatedParts && In(t.mutatedParts));\n              }), e.catch(function () {\n                I(n.optimisticOps, t), t.mutatedParts && In(t.mutatedParts);\n              })) : e.then(function (r) {\n                var e = Qn(0, _(_({}, t), {\n                  values: t.values.map(function (e, t) {\n                    var n;\n                    if (r.failures[t]) return e;\n                    e = null !== (n = i.keyPath) && void 0 !== n && n.includes(\".\") ? S(e) : _({}, e);\n                    return w(e, i.keyPath, r.results[t]), e;\n                  })\n                }), r);\n                n.optimisticOps.push(e), queueMicrotask(function () {\n                  return t.mutatedParts && In(t.mutatedParts);\n                });\n              }), e;\n            },\n            query: function (t) {\n              if (!Wn(me, l) || !Yn(\"query\", t)) return l.query(t);\n              var i = \"immutable\" === (null === (o = me.trans) || void 0 === o ? void 0 : o.db._options.cache),\n                e = me,\n                n = e.requery,\n                r = e.signal,\n                o = function (e, t, n, r) {\n                  var i = An[\"idb://\".concat(e, \"/\").concat(t)];\n                  if (!i) return [];\n                  if (!(t = i.queries[n])) return [null, !1, i, null];\n                  var o = t[(r.query ? r.query.index.name : null) || \"\"];\n                  if (!o) return [null, !1, i, null];\n                  switch (n) {\n                    case \"query\":\n                      var a = o.find(function (e) {\n                        return e.req.limit === r.limit && e.req.values === r.values && Hn(e.req.query.range, r.query.range);\n                      });\n                      return a ? [a, !0, i, o] : [o.find(function (e) {\n                        return (\"limit\" in e.req ? e.req.limit : 1 / 0) >= r.limit && (!r.values || e.req.values) && Jn(e.req.query.range, r.query.range);\n                      }), !1, i, o];\n                    case \"count\":\n                      a = o.find(function (e) {\n                        return Hn(e.req.query.range, r.query.range);\n                      });\n                      return [a, !!a, i, o];\n                  }\n                }(O, c, \"query\", t),\n                a = o[0],\n                e = o[1],\n                u = o[2],\n                s = o[3];\n              return a && e ? a.obsSet = t.obsSet : (e = l.query(t).then(function (e) {\n                var t = e.result;\n                if (a && (a.res = t), i) {\n                  for (var n = 0, r = t.length; n < r; ++n) Object.freeze(t[n]);\n                  Object.freeze(t);\n                } else e.result = S(t);\n                return e;\n              }).catch(function (e) {\n                return s && a && I(s, a), Promise.reject(e);\n              }), a = {\n                obsSet: t.obsSet,\n                promise: e,\n                subscribers: new Set(),\n                type: \"query\",\n                req: t,\n                dirty: !1\n              }, s ? s.push(a) : (s = [a], (u = u || (An[\"idb://\".concat(O, \"/\").concat(c)] = {\n                queries: {\n                  query: {},\n                  count: {}\n                },\n                objs: new Map(),\n                optimisticOps: [],\n                unsignaledParts: {}\n              })).queries.query[t.query.index.name || \"\"] = s)), Zn(a, s, n, r), a.promise.then(function (e) {\n                return {\n                  result: Xn(e.result, t, null == u ? void 0 : u.optimisticOps, l, a, i)\n                };\n              });\n            }\n          });\n        }\n      });\n    }\n  };\n  function tr(e, r) {\n    return new Proxy(e, {\n      get: function (e, t, n) {\n        return \"db\" === t ? r : Reflect.get(e, t, n);\n      }\n    });\n  }\n  var nr = (rr.prototype.version = function (t) {\n    if (isNaN(t) || t < .1) throw new Y.Type(\"Given version is not a positive number\");\n    if (t = Math.round(10 * t) / 10, this.idbdb || this._state.isBeingOpened) throw new Y.Schema(\"Cannot add version when database is open\");\n    this.verno = Math.max(this.verno, t);\n    var e = this._versions,\n      n = e.filter(function (e) {\n        return e._cfg.version === t;\n      })[0];\n    return n || (n = new this.Version(t), e.push(n), e.sort(on), n.stores({}), this._state.autoSchema = !1, n);\n  }, rr.prototype._whenReady = function (e) {\n    var n = this;\n    return this.idbdb && (this._state.openComplete || me.letThrough || this._vip) ? e() : new _e(function (e, t) {\n      if (n._state.openComplete) return t(new Y.DatabaseClosed(n._state.dbOpenError));\n      if (!n._state.isBeingOpened) {\n        if (!n._state.autoOpen) return void t(new Y.DatabaseClosed());\n        n.open().catch(G);\n      }\n      n._state.dbReadyPromise.then(e, t);\n    }).then(e);\n  }, rr.prototype.use = function (e) {\n    var t = e.stack,\n      n = e.create,\n      r = e.level,\n      i = e.name;\n    i && this.unuse({\n      stack: t,\n      name: i\n    });\n    e = this._middlewares[t] || (this._middlewares[t] = []);\n    return e.push({\n      stack: t,\n      create: n,\n      level: null == r ? 10 : r,\n      name: i\n    }), e.sort(function (e, t) {\n      return e.level - t.level;\n    }), this;\n  }, rr.prototype.unuse = function (e) {\n    var t = e.stack,\n      n = e.name,\n      r = e.create;\n    return t && this._middlewares[t] && (this._middlewares[t] = this._middlewares[t].filter(function (e) {\n      return r ? e.create !== r : !!n && e.name !== n;\n    })), this;\n  }, rr.prototype.open = function () {\n    var e = this;\n    return $e(ve, function () {\n      return Bn(e);\n    });\n  }, rr.prototype._close = function () {\n    this.on.close.fire(new CustomEvent(\"close\"));\n    var n = this._state,\n      e = et.indexOf(this);\n    if (0 <= e && et.splice(e, 1), this.idbdb) {\n      try {\n        this.idbdb.close();\n      } catch (e) {}\n      this.idbdb = null;\n    }\n    n.isBeingOpened || (n.dbReadyPromise = new _e(function (e) {\n      n.dbReadyResolve = e;\n    }), n.openCanceller = new _e(function (e, t) {\n      n.cancelOpen = t;\n    }));\n  }, rr.prototype.close = function (e) {\n    var t = (void 0 === e ? {\n        disableAutoOpen: !0\n      } : e).disableAutoOpen,\n      e = this._state;\n    t ? (e.isBeingOpened && e.cancelOpen(new Y.DatabaseClosed()), this._close(), e.autoOpen = !1, e.dbOpenError = new Y.DatabaseClosed()) : (this._close(), e.autoOpen = this._options.autoOpen || e.isBeingOpened, e.openComplete = !1, e.dbOpenError = null);\n  }, rr.prototype.delete = function (n) {\n    var i = this;\n    void 0 === n && (n = {\n      disableAutoOpen: !0\n    });\n    var o = 0 < arguments.length && \"object\" != typeof arguments[0],\n      a = this._state;\n    return new _e(function (r, t) {\n      function e() {\n        i.close(n);\n        var e = i._deps.indexedDB.deleteDatabase(i.name);\n        e.onsuccess = Ie(function () {\n          var e, t, n;\n          e = i._deps, t = i.name, n = e.indexedDB, e = e.IDBKeyRange, bn(n) || t === tt || mn(n, e).delete(t).catch(G), r();\n        }), e.onerror = Ft(t), e.onblocked = i._fireOnBlocked;\n      }\n      if (o) throw new Y.InvalidArgument(\"Invalid closeOptions argument to db.delete()\");\n      a.isBeingOpened ? a.dbReadyPromise.then(e) : e();\n    });\n  }, rr.prototype.backendDB = function () {\n    return this.idbdb;\n  }, rr.prototype.isOpen = function () {\n    return null !== this.idbdb;\n  }, rr.prototype.hasBeenClosed = function () {\n    var e = this._state.dbOpenError;\n    return e && \"DatabaseClosed\" === e.name;\n  }, rr.prototype.hasFailed = function () {\n    return null !== this._state.dbOpenError;\n  }, rr.prototype.dynamicallyOpened = function () {\n    return this._state.autoSchema;\n  }, Object.defineProperty(rr.prototype, \"tables\", {\n    get: function () {\n      var t = this;\n      return O(this._allTables).map(function (e) {\n        return t._allTables[e];\n      });\n    },\n    enumerable: !1,\n    configurable: !0\n  }), rr.prototype.transaction = function () {\n    var e = function (e, t, n) {\n      var r = arguments.length;\n      if (r < 2) throw new Y.InvalidArgument(\"Too few arguments\");\n      for (var i = new Array(r - 1); --r;) i[r - 1] = arguments[r];\n      return n = i.pop(), [e, P(i), n];\n    }.apply(this, arguments);\n    return this._transaction.apply(this, e);\n  }, rr.prototype._transaction = function (e, t, n) {\n    var r = this,\n      i = me.trans;\n    i && i.db === this && -1 === e.indexOf(\"!\") || (i = null);\n    var o,\n      a,\n      u = -1 !== e.indexOf(\"?\");\n    e = e.replace(\"!\", \"\").replace(\"?\", \"\");\n    try {\n      if (a = t.map(function (e) {\n        e = e instanceof r.Table ? e.name : e;\n        if (\"string\" != typeof e) throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");\n        return e;\n      }), \"r\" == e || e === nt) o = nt;else {\n        if (\"rw\" != e && e != rt) throw new Y.InvalidArgument(\"Invalid transaction mode: \" + e);\n        o = rt;\n      }\n      if (i) {\n        if (i.mode === nt && o === rt) {\n          if (!u) throw new Y.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");\n          i = null;\n        }\n        i && a.forEach(function (e) {\n          if (i && -1 === i.storeNames.indexOf(e)) {\n            if (!u) throw new Y.SubTransaction(\"Table \" + e + \" not included in parent transaction.\");\n            i = null;\n          }\n        }), u && i && !i.active && (i = null);\n      }\n    } catch (n) {\n      return i ? i._promise(null, function (e, t) {\n        t(n);\n      }) : Xe(n);\n    }\n    var s = function i(o, a, u, s, c) {\n      return _e.resolve().then(function () {\n        var e = me.transless || me,\n          t = o._createTransaction(a, u, o._dbSchema, s);\n        if (t.explicit = !0, e = {\n          trans: t,\n          transless: e\n        }, s) t.idbtrans = s.idbtrans;else try {\n          t.create(), t.idbtrans._explicit = !0, o._state.PR1398_maxLoop = 3;\n        } catch (e) {\n          return e.name === z.InvalidState && o.isOpen() && 0 < --o._state.PR1398_maxLoop ? (console.warn(\"Dexie: Need to reopen db\"), o.close({\n            disableAutoOpen: !1\n          }), o.open().then(function () {\n            return i(o, a, u, null, c);\n          })) : Xe(e);\n        }\n        var n,\n          r = B(c);\n        return r && Le(), e = _e.follow(function () {\n          var e;\n          (n = c.call(t, t)) && (r ? (e = Ue.bind(null, null), n.then(e, e)) : \"function\" == typeof n.next && \"function\" == typeof n.throw && (n = Rn(n)));\n        }, e), (n && \"function\" == typeof n.then ? _e.resolve(n).then(function (e) {\n          return t.active ? e : Xe(new Y.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\"));\n        }) : e.then(function () {\n          return n;\n        })).then(function (e) {\n          return s && t._resolve(), t._completion.then(function () {\n            return e;\n          });\n        }).catch(function (e) {\n          return t._reject(e), Xe(e);\n        });\n      });\n    }.bind(null, this, o, a, i, n);\n    return i ? i._promise(o, s, \"lock\") : me.trans ? $e(me.transless, function () {\n      return r._whenReady(s);\n    }) : this._whenReady(s);\n  }, rr.prototype.table = function (e) {\n    if (!m(this._allTables, e)) throw new Y.InvalidTable(\"Table \".concat(e, \" does not exist\"));\n    return this._allTables[e];\n  }, rr);\n  function rr(e, t) {\n    var o = this;\n    this._middlewares = {}, this.verno = 0;\n    var n = rr.dependencies;\n    this._options = t = _({\n      addons: rr.addons,\n      autoOpen: !0,\n      indexedDB: n.indexedDB,\n      IDBKeyRange: n.IDBKeyRange,\n      cache: \"cloned\"\n    }, t), this._deps = {\n      indexedDB: t.indexedDB,\n      IDBKeyRange: t.IDBKeyRange\n    };\n    n = t.addons;\n    this._dbSchema = {}, this._versions = [], this._storeNames = [], this._allTables = {}, this.idbdb = null, this._novip = this;\n    var a,\n      r,\n      u,\n      i,\n      s,\n      c = {\n        dbOpenError: null,\n        isBeingOpened: !1,\n        onReadyBeingFired: null,\n        openComplete: !1,\n        dbReadyResolve: G,\n        dbReadyPromise: null,\n        cancelOpen: G,\n        openCanceller: null,\n        autoSchema: !0,\n        PR1398_maxLoop: 3,\n        autoOpen: t.autoOpen\n      };\n    c.dbReadyPromise = new _e(function (e) {\n      c.dbReadyResolve = e;\n    }), c.openCanceller = new _e(function (e, t) {\n      c.cancelOpen = t;\n    }), this._state = c, this.name = e, this.on = mt(this, \"populate\", \"blocked\", \"versionchange\", \"close\", {\n      ready: [re, G]\n    }), this.once = function (n, r) {\n      var i = function () {\n        for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];\n        o.on(n).unsubscribe(i), r.apply(o, e);\n      };\n      return o.on(n, i);\n    }, this.on.ready.subscribe = p(this.on.ready.subscribe, function (i) {\n      return function (n, r) {\n        rr.vip(function () {\n          var t,\n            e = o._state;\n          e.openComplete ? (e.dbOpenError || _e.resolve().then(n), r && i(n)) : e.onReadyBeingFired ? (e.onReadyBeingFired.push(n), r && i(n)) : (i(n), t = o, r || i(function e() {\n            t.on.ready.unsubscribe(n), t.on.ready.unsubscribe(e);\n          }));\n        });\n      };\n    }), this.Collection = (a = this, bt(Kt.prototype, function (e, t) {\n      this.db = a;\n      var n = ot,\n        r = null;\n      if (t) try {\n        n = t();\n      } catch (e) {\n        r = e;\n      }\n      var i = e._ctx,\n        t = i.table,\n        e = t.hook.reading.fire;\n      this._ctx = {\n        table: t,\n        index: i.index,\n        isPrimKey: !i.index || t.schema.primKey.keyPath && i.index === t.schema.primKey.name,\n        range: n,\n        keysOnly: !1,\n        dir: \"next\",\n        unique: \"\",\n        algorithm: null,\n        filter: null,\n        replayFilter: null,\n        justLimit: !0,\n        isMatch: null,\n        offset: 0,\n        limit: 1 / 0,\n        error: r,\n        or: i.or,\n        valueMapper: e !== X ? e : null\n      };\n    })), this.Table = (r = this, bt(yt.prototype, function (e, t, n) {\n      this.db = r, this._tx = n, this.name = e, this.schema = t, this.hook = r._allTables[e] ? r._allTables[e].hook : mt(null, {\n        creating: [Z, G],\n        reading: [H, X],\n        updating: [te, G],\n        deleting: [ee, G]\n      });\n    })), this.Transaction = (u = this, bt(Vt.prototype, function (e, t, n, r, i) {\n      var o = this;\n      \"readonly\" !== e && t.forEach(function (e) {\n        e = null === (e = n[e]) || void 0 === e ? void 0 : e.yProps;\n        e && (t = t.concat(e.map(function (e) {\n          return e.updatesTable;\n        })));\n      }), this.db = u, this.mode = e, this.storeNames = t, this.schema = n, this.chromeTransactionDurability = r, this.idbtrans = null, this.on = mt(this, \"complete\", \"error\", \"abort\"), this.parent = i || null, this.active = !0, this._reculock = 0, this._blockedFuncs = [], this._resolve = null, this._reject = null, this._waitingFor = null, this._waitingQueue = null, this._spinCount = 0, this._completion = new _e(function (e, t) {\n        o._resolve = e, o._reject = t;\n      }), this._completion.then(function () {\n        o.active = !1, o.on.complete.fire();\n      }, function (e) {\n        var t = o.active;\n        return o.active = !1, o.on.error.fire(e), o.parent ? o.parent._reject(e) : t && o.idbtrans && o.idbtrans.abort(), Xe(e);\n      });\n    })), this.Version = (i = this, bt(yn.prototype, function (e) {\n      this.db = i, this._cfg = {\n        version: e,\n        storesSource: null,\n        dbschema: {},\n        tables: {},\n        contentUpgrade: null\n      };\n    })), this.WhereClause = (s = this, bt(Bt.prototype, function (e, t, n) {\n      if (this.db = s, this._ctx = {\n        table: e,\n        index: \":id\" === t ? null : t,\n        or: n\n      }, this._cmp = this._ascending = st, this._descending = function (e, t) {\n        return st(t, e);\n      }, this._max = function (e, t) {\n        return 0 < st(e, t) ? e : t;\n      }, this._min = function (e, t) {\n        return st(e, t) < 0 ? e : t;\n      }, this._IDBKeyRange = s._deps.IDBKeyRange, !this._IDBKeyRange) throw new Y.MissingAPI();\n    })), this.on(\"versionchange\", function (e) {\n      0 < e.newVersion ? console.warn(\"Another connection wants to upgrade database '\".concat(o.name, \"'. Closing db now to resume the upgrade.\")) : console.warn(\"Another connection wants to delete database '\".concat(o.name, \"'. Closing db now to resume the delete request.\")), o.close({\n        disableAutoOpen: !1\n      });\n    }), this.on(\"blocked\", function (e) {\n      !e.newVersion || e.newVersion < e.oldVersion ? console.warn(\"Dexie.delete('\".concat(o.name, \"') was blocked\")) : console.warn(\"Upgrade '\".concat(o.name, \"' blocked by other connection holding version \").concat(e.oldVersion / 10));\n    }), this._maxKey = Qt(t.IDBKeyRange), this._createTransaction = function (e, t, n, r) {\n      return new o.Transaction(e, t, n, o._options.chromeTransactionDurability, r);\n    }, this._fireOnBlocked = function (t) {\n      o.on(\"blocked\").fire(t), et.filter(function (e) {\n        return e.name === o.name && e !== o && !e._state.vcFired;\n      }).map(function (e) {\n        return e.on(\"versionchange\").fire(t);\n      });\n    }, this.use(zn), this.use(er), this.use($n), this.use(Mn), this.use(Un);\n    var l = new Proxy(this, {\n      get: function (e, t, n) {\n        if (\"_vip\" === t) return !0;\n        if (\"table\" === t) return function (e) {\n          return tr(o.table(e), l);\n        };\n        var r = Reflect.get(e, t, n);\n        return r instanceof yt ? tr(r, l) : \"tables\" === t ? r.map(function (e) {\n          return tr(e, l);\n        }) : \"_createTransaction\" === t ? function () {\n          return tr(r.apply(this, arguments), l);\n        } : r;\n      }\n    });\n    this.vip = l, n.forEach(function (e) {\n      return e(o);\n    });\n  }\n  var ir,\n    F = \"undefined\" != typeof Symbol && \"observable\" in Symbol ? Symbol.observable : \"@@observable\",\n    or = (ar.prototype.subscribe = function (e, t, n) {\n      return this._subscribe(e && \"function\" != typeof e ? e : {\n        next: e,\n        error: t,\n        complete: n\n      });\n    }, ar.prototype[F] = function () {\n      return this;\n    }, ar);\n  function ar(e) {\n    this._subscribe = e;\n  }\n  try {\n    ir = {\n      indexedDB: f.indexedDB || f.mozIndexedDB || f.webkitIndexedDB || f.msIndexedDB,\n      IDBKeyRange: f.IDBKeyRange || f.webkitIDBKeyRange\n    };\n  } catch (e) {\n    ir = {\n      indexedDB: null,\n      IDBKeyRange: null\n    };\n  }\n  function ur(h) {\n    var d,\n      p = !1,\n      e = new or(function (r) {\n        var i = B(h);\n        var o,\n          a = !1,\n          u = {},\n          s = {},\n          e = {\n            get closed() {\n              return a;\n            },\n            unsubscribe: function () {\n              a || (a = !0, o && o.abort(), c && Ut.storagemutated.unsubscribe(f));\n            }\n          };\n        r.start && r.start(e);\n        var c = !1,\n          l = function () {\n            return Ge(t);\n          };\n        var f = function (e) {\n            Sn(u, e), jn(s, u) && l();\n          },\n          t = function () {\n            var t, n, e;\n            !a && ir.indexedDB && (u = {}, t = {}, o && o.abort(), o = new AbortController(), e = function (e) {\n              var t = je();\n              try {\n                i && Le();\n                var n = Ne(h, e);\n                return n = i ? n.finally(Ue) : n;\n              } finally {\n                t && Ae();\n              }\n            }(n = {\n              subscr: t,\n              signal: o.signal,\n              requery: l,\n              querier: h,\n              trans: null\n            }), Promise.resolve(e).then(function (e) {\n              p = !0, d = e, a || n.signal.aborted || (u = {}, function (e) {\n                for (var t in e) if (m(e, t)) return;\n                return 1;\n              }(s = t) || c || (Ut(Nt, f), c = !0), Ge(function () {\n                return !a && r.next && r.next(e);\n              }));\n            }, function (e) {\n              p = !1, [\"DatabaseClosedError\", \"AbortError\"].includes(null == e ? void 0 : e.name) || a || Ge(function () {\n                a || r.error && r.error(e);\n              });\n            }));\n          };\n        return setTimeout(l, 0), e;\n      });\n    return e.hasValue = function () {\n      return p;\n    }, e.getValue = function () {\n      return d;\n    }, e;\n  }\n  var sr = nr;\n  function cr(e) {\n    var t = fr;\n    try {\n      fr = !0, Ut.storagemutated.fire(e), qn(e, !0);\n    } finally {\n      fr = t;\n    }\n  }\n  r(sr, _(_({}, Q), {\n    delete: function (e) {\n      return new sr(e, {\n        addons: []\n      }).delete();\n    },\n    exists: function (e) {\n      return new sr(e, {\n        addons: []\n      }).open().then(function (e) {\n        return e.close(), !0;\n      }).catch(\"NoSuchDatabaseError\", function () {\n        return !1;\n      });\n    },\n    getDatabaseNames: function (e) {\n      try {\n        return t = sr.dependencies, n = t.indexedDB, t = t.IDBKeyRange, (bn(n) ? Promise.resolve(n.databases()).then(function (e) {\n          return e.map(function (e) {\n            return e.name;\n          }).filter(function (e) {\n            return e !== tt;\n          });\n        }) : mn(n, t).toCollection().primaryKeys()).then(e);\n      } catch (e) {\n        return Xe(new Y.MissingAPI());\n      }\n      var t, n;\n    },\n    defineClass: function () {\n      return function (e) {\n        a(this, e);\n      };\n    },\n    ignoreTransaction: function (e) {\n      return me.trans ? $e(me.transless, e) : e();\n    },\n    vip: gn,\n    async: function (t) {\n      return function () {\n        try {\n          var e = Rn(t.apply(this, arguments));\n          return e && \"function\" == typeof e.then ? e : _e.resolve(e);\n        } catch (e) {\n          return Xe(e);\n        }\n      };\n    },\n    spawn: function (e, t, n) {\n      try {\n        var r = Rn(e.apply(n, t || []));\n        return r && \"function\" == typeof r.then ? r : _e.resolve(r);\n      } catch (e) {\n        return Xe(e);\n      }\n    },\n    currentTransaction: {\n      get: function () {\n        return me.trans || null;\n      }\n    },\n    waitFor: function (e, t) {\n      t = _e.resolve(\"function\" == typeof e ? sr.ignoreTransaction(e) : e).timeout(t || 6e4);\n      return me.trans ? me.trans.waitFor(t) : t;\n    },\n    Promise: _e,\n    debug: {\n      get: function () {\n        return ie;\n      },\n      set: function (e) {\n        oe(e);\n      }\n    },\n    derive: o,\n    extend: a,\n    props: r,\n    override: p,\n    Events: mt,\n    on: Ut,\n    liveQuery: ur,\n    extendObservabilitySet: Sn,\n    getByKeyPath: g,\n    setByKeyPath: w,\n    delByKeyPath: function (t, e) {\n      \"string\" == typeof e ? w(t, e, void 0) : \"length\" in e && [].map.call(e, function (e) {\n        w(t, e, void 0);\n      });\n    },\n    shallowClone: k,\n    deepClone: S,\n    getObjectDiff: Nn,\n    cmp: st,\n    asap: v,\n    minKey: -1 / 0,\n    addons: [],\n    connections: et,\n    errnames: z,\n    dependencies: ir,\n    cache: An,\n    semVer: \"4.2.1\",\n    version: \"4.2.1\".split(\".\").map(function (e) {\n      return parseInt(e);\n    }).reduce(function (e, t, n) {\n      return e + t / Math.pow(10, 2 * n);\n    })\n  })), sr.maxKey = Qt(sr.dependencies.IDBKeyRange), \"undefined\" != typeof dispatchEvent && \"undefined\" != typeof addEventListener && (Ut(Nt, function (e) {\n    fr || (e = new CustomEvent(Lt, {\n      detail: e\n    }), fr = !0, dispatchEvent(e), fr = !1);\n  }), addEventListener(Lt, function (e) {\n    e = e.detail;\n    fr || cr(e);\n  }));\n  var lr,\n    fr = !1,\n    hr = function () {};\n  return \"undefined\" != typeof BroadcastChannel && ((hr = function () {\n    (lr = new BroadcastChannel(Lt)).onmessage = function (e) {\n      return e.data && cr(e.data);\n    };\n  })(), \"function\" == typeof lr.unref && lr.unref(), Ut(Nt, function (e) {\n    fr || lr.postMessage(e);\n  })), \"undefined\" != typeof addEventListener && (addEventListener(\"pagehide\", function (e) {\n    if (!nr.disableBfCache && e.persisted) {\n      ie && console.debug(\"Dexie: handling persisted pagehide\"), null != lr && lr.close();\n      for (var t = 0, n = et; t < n.length; t++) n[t].close({\n        disableAutoOpen: !1\n      });\n    }\n  }), addEventListener(\"pageshow\", function (e) {\n    !nr.disableBfCache && e.persisted && (ie && console.debug(\"Dexie: handling persisted pageshow\"), hr(), cr({\n      all: new _n(-1 / 0, [[]])\n    }));\n  })), _e.rejectionMapper = function (e, t) {\n    return !e || e instanceof N || e instanceof TypeError || e instanceof SyntaxError || !e.name || !$[e.name] ? e : (t = new $[e.name](t || e.message, e), \"stack\" in e && l(t, \"stack\", {\n      get: function () {\n        return this.inner.stack;\n      }\n    }), t);\n  }, oe(ie), _(nr, Object.freeze({\n    __proto__: null,\n    Dexie: nr,\n    liveQuery: ur,\n    Entity: ut,\n    cmp: st,\n    PropModification: ht,\n    replacePrefix: function (e, t) {\n      return new ht({\n        replacePrefix: [e, t]\n      });\n    },\n    add: function (e) {\n      return new ht({\n        add: e\n      });\n    },\n    remove: function (e) {\n      return new ht({\n        remove: e\n      });\n    },\n    default: nr,\n    RangeSet: _n,\n    mergeRanges: kn,\n    rangesOverlap: On\n  }), {\n    default: nr\n  }), nr;\n});","map":{"version":3,"names":["e","t","exports","module","define","amd","globalThis","self","Dexie","s","extendStatics","Object","setPrototypeOf","__proto__","Array","n","prototype","hasOwnProperty","call","_","__assign","assign","r","arguments","length","i","apply","o","slice","concat","f","window","global","O","keys","x","isArray","a","forEach","Promise","c","getPrototypeOf","m","Reflect","ownKeys","l","u","defineProperty","get","set","configurable","value","writable","from","create","extend","bind","h","getOwnPropertyDescriptor","d","b","p","y","Error","v","setImmediate","setTimeout","g","push","indexOf","substr","w","isFrozen","isNaN","parseInt","splice","k","P","split","map","filter","K","Set","E","S","WeakMap","has","constructor","j","toString","A","C","Symbol","iterator","T","I","q","D","next","done","B","toStringTag","R","F","M","VersionChanged","DatabaseClosed","Abort","TransactionInactive","MissingAPI","N","name","message","L","join","U","failures","failedKeys","successCount","V","failuresByPos","z","reduce","W","Y","inner","Syntax","SyntaxError","Type","TypeError","Range","RangeError","$","Q","G","X","H","J","Z","onsuccess","onerror","ee","te","ne","re","then","ModifyError","DexieError","BulkError","ie","location","test","href","oe","ae","ue","resolve","crypto","subtle","digest","Uint8Array","se","ce","le","asap","be","he","queueMicrotask","Se","fe","de","pe","ye","ve","id","ref","unhandleds","onunhandled","pgp","env","finalize","me","ge","we","_e","_listeners","_lib","_PSD","_state","_value","Oe","je","_then","Pe","Ae","xe","Fe","Ue","Ke","ke","Qe","_consoleTask","onFulfilled","onRejected","reject","psd","some","Ce","Ee","run","$e","Te","Ie","We","catch","finally","timeout","Timeout","clearTimeout","Ye","all","Ve","race","PSD","totalEchoes","newPSD","Ne","usePSD","scheduler","rejectionMapper","follow","fn","allSettled","status","reason","any","AggregateError","withResolvers","qe","awaits","echoes","De","Be","Re","Me","parent","PromiseProp","Le","Xe","ze","pop","Ge","enqueueNativeMicroTask","He","String","fromCharCode","Je","Ze","et","tt","nt","rt","it","ot","type","lower","lowerOpen","upper","upperOpen","at","ut","st","ct","NaN","lt","ArrayBuffer","isView","buffer","byteOffset","byteLength","ft","schema","yProps","numFailures","updatesTable","db","table","where","anyOf","delete","clear","ht","dt","execute","add","sort","Number","BigInt","remove","includes","replacePrefix","startsWith","substring","pt","yt","vt","_trans","_tx","trans","console","createTask","NotFound","idbtrans","_novip","_promise","transless","idbdb","openComplete","letThrough","_vip","_createTransaction","_dbSchema","PR1398_maxLoop","InvalidState","isOpen","warn","close","disableAutoOpen","open","commit","_completion","dbOpenError","isBeingOpened","autoOpen","dbReadyPromise","trace","first","core","key","hook","reading","fire","WhereClause","equals","indexes","primKey","compound","every","keyPath","_maxKey","JSON","stringify","idxByName","multi","toCollection","and","count","offset","limit","each","toArray","Collection","orderBy","reverse","mapToClass","mappedClass","enumerable","getOwnPropertyNames","readHook","unsubscribe","defineClass","auto","mutate","values","lastResult","upsert","updates","changeSpecs","update","modify","InvalidArgument","put","range","bulkGet","getMany","bulkAdd","allKeys","wantResults","results","bulkPut","bulkUpdate","changes","cache","Constraint","bulkDelete","mt","subscribe","addEventType","subscribers","bt","gt","algorithm","or","justLimit","replayFilter","wt","_t","xt","isPrimKey","primaryKey","getIndexByKeyPath","index","Schema","kt","openCursor","keysOnly","dir","unique","query","Ot","union","stop","fail","_iterate","Pt","valueMapper","start","continue","Kt","Et","_read","_ctx","error","_write","_addAlgorithm","clone","raw","Math","min","sortBy","result","advance","until","last","isMatch","_ondirectionchange","desc","eachKey","eachUniqueKey","eachPrimaryKey","primaryKeys","uniqueKeys","firstKey","lastKey","distinct","outbound","extractKey","_options","modifyChunkSize","St","criteria","changeSpec","isAdditionalChunk","deleteCallback","jt","At","Ct","Bt","Tt","Dt","It","toUpperCase","toLowerCase","qt","Rt","between","_cmp","above","aboveOrEqual","below","belowOrEqual","startsWithIgnoreCase","equalsIgnoreCase","anyOfIgnoreCase","startsWithAnyOfIgnoreCase","_ascending","_descending","notEqual","inAnyRange","includeLowers","includeUppers","noneOf","_min","_max","startsWithAnyOf","Ft","Mt","target","stopPropagation","preventDefault","Nt","Lt","Ut","Vt","zt","_lock","_reculock","lockOwnerFor","_unlock","_blockedFuncs","_locked","shift","mode","OpenFailed","active","transaction","storeNames","durability","chromeTransactionDurability","_reject","onabort","on","oncomplete","_resolve","storagemutated","mutatedParts","ReadOnly","_root","waitFor","_waitingFor","_waitingQueue","objectStore","_spinCount","abort","_memoizedTables","Table","Wt","src","Yt","$t","extractor","Qt","getMaxKey","only","Gt","Xt","Ht","Jt","Zt","upperBound","lowerBound","bound","successHandler","_pos","isPrimaryKey","getAll","getAllKeys","openKeyCursor","___id","continuePrimaryKey","doThrowCursorIsStopped","objectStoreNames","tables","autoIncrement","indexNames","multiEntry","hasGetAll","navigator","userAgent","match","stack","MIN_KEY","MAX_KEY","en","IDBKeyRange","indexedDB","dbcore","tn","_middlewares","_deps","nn","Transaction","rn","_cfg","version","an","contains","$meta","pn","_storeNames","_versions","hn","dbschema","dn","sn","cn","change","recreate","Upgrade","deleteIndex","del","contentUpgrade","deleteObjectStore","ceil","ln","populate","un","createObjectStore","debug","def","createIndex","_hasGetAll","WorkerGlobalScope","trim","replace","yn","vn","_createTableSchema","_parseIndexSyntax","_parseStoresSpec","stores","storesSource","_allTables","upgrade","mn","_dbNamesDB","nr","addons","dbnames","bn","databases","gn","wn","_n","RangeSet","to","xn","Kn","kn","On","Pn","up","En","max","Sn","jn","addKey","addKeys","hasKey","An","Cn","Tn","In","qn","Dn","exec","entries","queries","obsSet","Bn","openCanceller","round","verno","autoSchema","onblocked","_fireOnBlocked","onupgradeneeded","allowEmptyDB","deleteDatabase","NoSuchDatabase","oldVersion","pow","onversionchange","vcFired","onclose","dbReadyResolve","userAgentData","setInterval","clearInterval","onReadyBeingFired","ready","vip","_close","Rn","throw","Fn","Mn","level","lowLevelIndex","isVirtual","keyTail","keyLength","Nn","Ln","Un","deleting","creating","updating","Vn","zn","_cache","Wn","subscr","explicit","Yn","$n","querier","findIndex","getRange","getRangeSet","Qn","Gn","Xn","dirty","freeze","Hn","Jn","Zn","addEventListener","size","er","AbortController","signal","endTransaction","optimisticOps","_explicit","res","req","promise","requery","find","objs","Map","unsignaledParts","tr","Proxy","rr","Version","_whenReady","use","unuse","CustomEvent","cancelOpen","backendDB","hasBeenClosed","hasFailed","dynamicallyOpened","_transaction","SubTransaction","PrematureCommit","InvalidTable","dependencies","once","complete","_IDBKeyRange","newVersion","ir","observable","ar","_subscribe","mozIndexedDB","webkitIndexedDB","msIndexedDB","webkitIDBKeyRange","ur","closed","doQuery","mutationListener","_doQuery","aborted","hasValue","getValue","sr","cr","fr","exists","getDatabaseNames","ignoreTransaction","async","spawn","currentTransaction","derive","props","override","Events","liveQuery","extendObservabilitySet","getByKeyPath","setByKeyPath","delByKeyPath","shallowClone","deepClone","getObjectDiff","cmp","minKey","connections","errnames","semVer","maxKey","dispatchEvent","detail","lr","hr","createBC","BroadcastChannel","onmessage","data","unref","postMessage","disableBfCache","persisted","Entity","PropModification","default","mergeRanges","rangesOverlap"],"sources":["/home/vsts/work/1/s/node_modules/dexie/dist/dexie.js"],"sourcesContent":["/*\n * Dexie.js - a minimalistic wrapper for IndexedDB\n * ===============================================\n *\n * By David Fahlander, david.fahlander@gmail.com\n *\n * Version 4.2.1, Sat Oct 04 2025\n *\n * https://dexie.org\n *\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\n */\n \n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Dexie = factory());\n})(this, (function () { 'use strict';\n\n    /*! *****************************************************************************\n    Copyright (c) Microsoft Corporation.\n    Permission to use, copy, modify, and/or distribute this software for any\n    purpose with or without fee is hereby granted.\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n    PERFORMANCE OF THIS SOFTWARE.\n    ***************************************************************************** */\n    var extendStatics = function(d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    function __extends(d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    }\n    var __assign = function() {\n        __assign = Object.assign || function __assign(t) {\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\n                s = arguments[i];\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n            }\n            return t;\n        };\n        return __assign.apply(this, arguments);\n    };\n    function __spreadArray(to, from, pack) {\n        if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n            if (ar || !(i in from)) {\n                if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n                ar[i] = from[i];\n            }\n        }\n        return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var _global = typeof globalThis !== 'undefined' ? globalThis :\n        typeof self !== 'undefined' ? self :\n            typeof window !== 'undefined' ? window :\n                global;\n\n    var keys = Object.keys;\n    var isArray = Array.isArray;\n    if (typeof Promise !== 'undefined' && !_global.Promise) {\n        _global.Promise = Promise;\n    }\n    function extend(obj, extension) {\n        if (typeof extension !== 'object')\n            return obj;\n        keys(extension).forEach(function (key) {\n            obj[key] = extension[key];\n        });\n        return obj;\n    }\n    var getProto = Object.getPrototypeOf;\n    var _hasOwn = {}.hasOwnProperty;\n    function hasOwn(obj, prop) {\n        return _hasOwn.call(obj, prop);\n    }\n    function props(proto, extension) {\n        if (typeof extension === 'function')\n            extension = extension(getProto(proto));\n        (typeof Reflect === \"undefined\" ? keys : Reflect.ownKeys)(extension).forEach(function (key) {\n            setProp(proto, key, extension[key]);\n        });\n    }\n    var defineProperty = Object.defineProperty;\n    function setProp(obj, prop, functionOrGetSet, options) {\n        defineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, \"get\") && typeof functionOrGetSet.get === 'function' ?\n            { get: functionOrGetSet.get, set: functionOrGetSet.set, configurable: true } :\n            { value: functionOrGetSet, configurable: true, writable: true }, options));\n    }\n    function derive(Child) {\n        return {\n            from: function (Parent) {\n                Child.prototype = Object.create(Parent.prototype);\n                setProp(Child.prototype, \"constructor\", Child);\n                return {\n                    extend: props.bind(null, Child.prototype)\n                };\n            }\n        };\n    }\n    var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n    function getPropertyDescriptor(obj, prop) {\n        var pd = getOwnPropertyDescriptor(obj, prop);\n        var proto;\n        return pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);\n    }\n    var _slice = [].slice;\n    function slice(args, start, end) {\n        return _slice.call(args, start, end);\n    }\n    function override(origFunc, overridedFactory) {\n        return overridedFactory(origFunc);\n    }\n    function assert(b) {\n        if (!b)\n            throw new Error(\"Assertion Failed\");\n    }\n    function asap$1(fn) {\n        if (_global.setImmediate)\n            setImmediate(fn);\n        else\n            setTimeout(fn, 0);\n    }\n    function arrayToObject(array, extractor) {\n        return array.reduce(function (result, item, i) {\n            var nameAndValue = extractor(item, i);\n            if (nameAndValue)\n                result[nameAndValue[0]] = nameAndValue[1];\n            return result;\n        }, {});\n    }\n    function getByKeyPath(obj, keyPath) {\n        if (typeof keyPath === 'string' && hasOwn(obj, keyPath))\n            return obj[keyPath];\n        if (!keyPath)\n            return obj;\n        if (typeof keyPath !== 'string') {\n            var rv = [];\n            for (var i = 0, l = keyPath.length; i < l; ++i) {\n                var val = getByKeyPath(obj, keyPath[i]);\n                rv.push(val);\n            }\n            return rv;\n        }\n        var period = keyPath.indexOf('.');\n        if (period !== -1) {\n            var innerObj = obj[keyPath.substr(0, period)];\n            return innerObj == null ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));\n        }\n        return undefined;\n    }\n    function setByKeyPath(obj, keyPath, value) {\n        if (!obj || keyPath === undefined)\n            return;\n        if ('isFrozen' in Object && Object.isFrozen(obj))\n            return;\n        if (typeof keyPath !== 'string' && 'length' in keyPath) {\n            assert(typeof value !== 'string' && 'length' in value);\n            for (var i = 0, l = keyPath.length; i < l; ++i) {\n                setByKeyPath(obj, keyPath[i], value[i]);\n            }\n        }\n        else {\n            var period = keyPath.indexOf('.');\n            if (period !== -1) {\n                var currentKeyPath = keyPath.substr(0, period);\n                var remainingKeyPath = keyPath.substr(period + 1);\n                if (remainingKeyPath === \"\")\n                    if (value === undefined) {\n                        if (isArray(obj) && !isNaN(parseInt(currentKeyPath)))\n                            obj.splice(currentKeyPath, 1);\n                        else\n                            delete obj[currentKeyPath];\n                    }\n                    else\n                        obj[currentKeyPath] = value;\n                else {\n                    var innerObj = obj[currentKeyPath];\n                    if (!innerObj || !hasOwn(obj, currentKeyPath))\n                        innerObj = (obj[currentKeyPath] = {});\n                    setByKeyPath(innerObj, remainingKeyPath, value);\n                }\n            }\n            else {\n                if (value === undefined) {\n                    if (isArray(obj) && !isNaN(parseInt(keyPath)))\n                        obj.splice(keyPath, 1);\n                    else\n                        delete obj[keyPath];\n                }\n                else\n                    obj[keyPath] = value;\n            }\n        }\n    }\n    function delByKeyPath(obj, keyPath) {\n        if (typeof keyPath === 'string')\n            setByKeyPath(obj, keyPath, undefined);\n        else if ('length' in keyPath)\n            [].map.call(keyPath, function (kp) {\n                setByKeyPath(obj, kp, undefined);\n            });\n    }\n    function shallowClone(obj) {\n        var rv = {};\n        for (var m in obj) {\n            if (hasOwn(obj, m))\n                rv[m] = obj[m];\n        }\n        return rv;\n    }\n    var concat = [].concat;\n    function flatten(a) {\n        return concat.apply([], a);\n    }\n    var intrinsicTypeNames = \"BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey\"\n        .split(',').concat(flatten([8, 16, 32, 64].map(function (num) { return [\"Int\", \"Uint\", \"Float\"].map(function (t) { return t + num + \"Array\"; }); }))).filter(function (t) { return _global[t]; });\n    var intrinsicTypes = new Set(intrinsicTypeNames.map(function (t) { return _global[t]; }));\n    function cloneSimpleObjectTree(o) {\n        var rv = {};\n        for (var k in o)\n            if (hasOwn(o, k)) {\n                var v = o[k];\n                rv[k] = !v || typeof v !== 'object' || intrinsicTypes.has(v.constructor) ? v : cloneSimpleObjectTree(v);\n            }\n        return rv;\n    }\n    function objectIsEmpty(o) {\n        for (var k in o)\n            if (hasOwn(o, k))\n                return false;\n        return true;\n    }\n    var circularRefs = null;\n    function deepClone(any) {\n        circularRefs = new WeakMap();\n        var rv = innerDeepClone(any);\n        circularRefs = null;\n        return rv;\n    }\n    function innerDeepClone(x) {\n        if (!x || typeof x !== 'object')\n            return x;\n        var rv = circularRefs.get(x);\n        if (rv)\n            return rv;\n        if (isArray(x)) {\n            rv = [];\n            circularRefs.set(x, rv);\n            for (var i = 0, l = x.length; i < l; ++i) {\n                rv.push(innerDeepClone(x[i]));\n            }\n        }\n        else if (intrinsicTypes.has(x.constructor)) {\n            rv = x;\n        }\n        else {\n            var proto = getProto(x);\n            rv = proto === Object.prototype ? {} : Object.create(proto);\n            circularRefs.set(x, rv);\n            for (var prop in x) {\n                if (hasOwn(x, prop)) {\n                    rv[prop] = innerDeepClone(x[prop]);\n                }\n            }\n        }\n        return rv;\n    }\n    var toString = {}.toString;\n    function toStringTag(o) {\n        return toString.call(o).slice(8, -1);\n    }\n    var iteratorSymbol = typeof Symbol !== 'undefined' ?\n        Symbol.iterator :\n        '@@iterator';\n    var getIteratorOf = typeof iteratorSymbol === \"symbol\" ? function (x) {\n        var i;\n        return x != null && (i = x[iteratorSymbol]) && i.apply(x);\n    } : function () { return null; };\n    function delArrayItem(a, x) {\n        var i = a.indexOf(x);\n        if (i >= 0)\n            a.splice(i, 1);\n        return i >= 0;\n    }\n    var NO_CHAR_ARRAY = {};\n    function getArrayOf(arrayLike) {\n        var i, a, x, it;\n        if (arguments.length === 1) {\n            if (isArray(arrayLike))\n                return arrayLike.slice();\n            if (this === NO_CHAR_ARRAY && typeof arrayLike === 'string')\n                return [arrayLike];\n            if ((it = getIteratorOf(arrayLike))) {\n                a = [];\n                while ((x = it.next()), !x.done)\n                    a.push(x.value);\n                return a;\n            }\n            if (arrayLike == null)\n                return [arrayLike];\n            i = arrayLike.length;\n            if (typeof i === 'number') {\n                a = new Array(i);\n                while (i--)\n                    a[i] = arrayLike[i];\n                return a;\n            }\n            return [arrayLike];\n        }\n        i = arguments.length;\n        a = new Array(i);\n        while (i--)\n            a[i] = arguments[i];\n        return a;\n    }\n    var isAsyncFunction = typeof Symbol !== 'undefined'\n        ? function (fn) { return fn[Symbol.toStringTag] === 'AsyncFunction'; }\n        : function () { return false; };\n\n    var dexieErrorNames = [\n        'Modify',\n        'Bulk',\n        'OpenFailed',\n        'VersionChange',\n        'Schema',\n        'Upgrade',\n        'InvalidTable',\n        'MissingAPI',\n        'NoSuchDatabase',\n        'InvalidArgument',\n        'SubTransaction',\n        'Unsupported',\n        'Internal',\n        'DatabaseClosed',\n        'PrematureCommit',\n        'ForeignAwait'\n    ];\n    var idbDomErrorNames = [\n        'Unknown',\n        'Constraint',\n        'Data',\n        'TransactionInactive',\n        'ReadOnly',\n        'Version',\n        'NotFound',\n        'InvalidState',\n        'InvalidAccess',\n        'Abort',\n        'Timeout',\n        'QuotaExceeded',\n        'Syntax',\n        'DataClone'\n    ];\n    var errorList = dexieErrorNames.concat(idbDomErrorNames);\n    var defaultTexts = {\n        VersionChanged: \"Database version changed by other database connection\",\n        DatabaseClosed: \"Database has been closed\",\n        Abort: \"Transaction aborted\",\n        TransactionInactive: \"Transaction has already completed or failed\",\n        MissingAPI: \"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb\"\n    };\n    function DexieError(name, msg) {\n        this.name = name;\n        this.message = msg;\n    }\n    derive(DexieError).from(Error).extend({\n        toString: function () { return this.name + \": \" + this.message; }\n    });\n    function getMultiErrorMessage(msg, failures) {\n        return msg + \". Errors: \" + Object.keys(failures)\n            .map(function (key) { return failures[key].toString(); })\n            .filter(function (v, i, s) { return s.indexOf(v) === i; })\n            .join('\\n');\n    }\n    function ModifyError(msg, failures, successCount, failedKeys) {\n        this.failures = failures;\n        this.failedKeys = failedKeys;\n        this.successCount = successCount;\n        this.message = getMultiErrorMessage(msg, failures);\n    }\n    derive(ModifyError).from(DexieError);\n    function BulkError(msg, failures) {\n        this.name = \"BulkError\";\n        this.failures = Object.keys(failures).map(function (pos) { return failures[pos]; });\n        this.failuresByPos = failures;\n        this.message = getMultiErrorMessage(msg, this.failures);\n    }\n    derive(BulkError).from(DexieError);\n    var errnames = errorList.reduce(function (obj, name) { return (obj[name] = name + \"Error\", obj); }, {});\n    var BaseException = DexieError;\n    var exceptions = errorList.reduce(function (obj, name) {\n        var fullName = name + \"Error\";\n        function DexieError(msgOrInner, inner) {\n            this.name = fullName;\n            if (!msgOrInner) {\n                this.message = defaultTexts[name] || fullName;\n                this.inner = null;\n            }\n            else if (typeof msgOrInner === 'string') {\n                this.message = \"\".concat(msgOrInner).concat(!inner ? '' : '\\n ' + inner);\n                this.inner = inner || null;\n            }\n            else if (typeof msgOrInner === 'object') {\n                this.message = \"\".concat(msgOrInner.name, \" \").concat(msgOrInner.message);\n                this.inner = msgOrInner;\n            }\n        }\n        derive(DexieError).from(BaseException);\n        obj[name] = DexieError;\n        return obj;\n    }, {});\n    exceptions.Syntax = SyntaxError;\n    exceptions.Type = TypeError;\n    exceptions.Range = RangeError;\n    var exceptionMap = idbDomErrorNames.reduce(function (obj, name) {\n        obj[name + \"Error\"] = exceptions[name];\n        return obj;\n    }, {});\n    function mapError(domError, message) {\n        if (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name])\n            return domError;\n        var rv = new exceptionMap[domError.name](message || domError.message, domError);\n        if (\"stack\" in domError) {\n            setProp(rv, \"stack\", { get: function () {\n                    return this.inner.stack;\n                } });\n        }\n        return rv;\n    }\n    var fullNameExceptions = errorList.reduce(function (obj, name) {\n        if ([\"Syntax\", \"Type\", \"Range\"].indexOf(name) === -1)\n            obj[name + \"Error\"] = exceptions[name];\n        return obj;\n    }, {});\n    fullNameExceptions.ModifyError = ModifyError;\n    fullNameExceptions.DexieError = DexieError;\n    fullNameExceptions.BulkError = BulkError;\n\n    function nop() { }\n    function mirror(val) { return val; }\n    function pureFunctionChain(f1, f2) {\n        if (f1 == null || f1 === mirror)\n            return f2;\n        return function (val) {\n            return f2(f1(val));\n        };\n    }\n    function callBoth(on1, on2) {\n        return function () {\n            on1.apply(this, arguments);\n            on2.apply(this, arguments);\n        };\n    }\n    function hookCreatingChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            var res = f1.apply(this, arguments);\n            if (res !== undefined)\n                arguments[0] = res;\n            var onsuccess = this.onsuccess,\n            onerror = this.onerror;\n            this.onsuccess = null;\n            this.onerror = null;\n            var res2 = f2.apply(this, arguments);\n            if (onsuccess)\n                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n            if (onerror)\n                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n            return res2 !== undefined ? res2 : res;\n        };\n    }\n    function hookDeletingChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            f1.apply(this, arguments);\n            var onsuccess = this.onsuccess,\n            onerror = this.onerror;\n            this.onsuccess = this.onerror = null;\n            f2.apply(this, arguments);\n            if (onsuccess)\n                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n            if (onerror)\n                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        };\n    }\n    function hookUpdatingChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function (modifications) {\n            var res = f1.apply(this, arguments);\n            extend(modifications, res);\n            var onsuccess = this.onsuccess,\n            onerror = this.onerror;\n            this.onsuccess = null;\n            this.onerror = null;\n            var res2 = f2.apply(this, arguments);\n            if (onsuccess)\n                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n            if (onerror)\n                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n            return res === undefined ?\n                (res2 === undefined ? undefined : res2) :\n                (extend(res, res2));\n        };\n    }\n    function reverseStoppableEventChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            if (f2.apply(this, arguments) === false)\n                return false;\n            return f1.apply(this, arguments);\n        };\n    }\n    function promisableChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            var res = f1.apply(this, arguments);\n            if (res && typeof res.then === 'function') {\n                var thiz = this, i = arguments.length, args = new Array(i);\n                while (i--)\n                    args[i] = arguments[i];\n                return res.then(function () {\n                    return f2.apply(thiz, args);\n                });\n            }\n            return f2.apply(this, arguments);\n        };\n    }\n\n    var debug = typeof location !== 'undefined' &&\n        /^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);\n    function setDebug(value, filter) {\n        debug = value;\n    }\n\n    var INTERNAL = {};\n    var ZONE_ECHO_LIMIT = 100, _a$1 = typeof Promise === 'undefined' ?\n        [] :\n        (function () {\n            var globalP = Promise.resolve();\n            if (typeof crypto === 'undefined' || !crypto.subtle)\n                return [globalP, getProto(globalP), globalP];\n            var nativeP = crypto.subtle.digest(\"SHA-512\", new Uint8Array([0]));\n            return [\n                nativeP,\n                getProto(nativeP),\n                globalP\n            ];\n        })(), resolvedNativePromise = _a$1[0], nativePromiseProto = _a$1[1], resolvedGlobalPromise = _a$1[2], nativePromiseThen = nativePromiseProto && nativePromiseProto.then;\n    var NativePromise = resolvedNativePromise && resolvedNativePromise.constructor;\n    var patchGlobalPromise = !!resolvedGlobalPromise;\n    function schedulePhysicalTick() {\n        queueMicrotask(physicalTick);\n    }\n    var asap = function (callback, args) {\n        microtickQueue.push([callback, args]);\n        if (needsNewPhysicalTick) {\n            schedulePhysicalTick();\n            needsNewPhysicalTick = false;\n        }\n    };\n    var isOutsideMicroTick = true,\n    needsNewPhysicalTick = true,\n    unhandledErrors = [],\n    rejectingErrors = [],\n    rejectionMapper = mirror;\n    var globalPSD = {\n        id: 'global',\n        global: true,\n        ref: 0,\n        unhandleds: [],\n        onunhandled: nop,\n        pgp: false,\n        env: {},\n        finalize: nop\n    };\n    var PSD = globalPSD;\n    var microtickQueue = [];\n    var numScheduledCalls = 0;\n    var tickFinalizers = [];\n    function DexiePromise(fn) {\n        if (typeof this !== 'object')\n            throw new TypeError('Promises must be constructed via new');\n        this._listeners = [];\n        this._lib = false;\n        var psd = (this._PSD = PSD);\n        if (typeof fn !== 'function') {\n            if (fn !== INTERNAL)\n                throw new TypeError('Not a function');\n            this._state = arguments[1];\n            this._value = arguments[2];\n            if (this._state === false)\n                handleRejection(this, this._value);\n            return;\n        }\n        this._state = null;\n        this._value = null;\n        ++psd.ref;\n        executePromiseTask(this, fn);\n    }\n    var thenProp = {\n        get: function () {\n            var psd = PSD, microTaskId = totalEchoes;\n            function then(onFulfilled, onRejected) {\n                var _this = this;\n                var possibleAwait = !psd.global && (psd !== PSD || microTaskId !== totalEchoes);\n                var cleanup = possibleAwait && !decrementExpectedAwaits();\n                var rv = new DexiePromise(function (resolve, reject) {\n                    propagateToListener(_this, new Listener(nativeAwaitCompatibleWrap(onFulfilled, psd, possibleAwait, cleanup), nativeAwaitCompatibleWrap(onRejected, psd, possibleAwait, cleanup), resolve, reject, psd));\n                });\n                if (this._consoleTask)\n                    rv._consoleTask = this._consoleTask;\n                return rv;\n            }\n            then.prototype = INTERNAL;\n            return then;\n        },\n        set: function (value) {\n            setProp(this, 'then', value && value.prototype === INTERNAL ?\n                thenProp :\n                {\n                    get: function () {\n                        return value;\n                    },\n                    set: thenProp.set\n                });\n        }\n    };\n    props(DexiePromise.prototype, {\n        then: thenProp,\n        _then: function (onFulfilled, onRejected) {\n            propagateToListener(this, new Listener(null, null, onFulfilled, onRejected, PSD));\n        },\n        catch: function (onRejected) {\n            if (arguments.length === 1)\n                return this.then(null, onRejected);\n            var type = arguments[0], handler = arguments[1];\n            return typeof type === 'function' ? this.then(null, function (err) {\n                return err instanceof type ? handler(err) : PromiseReject(err);\n            })\n                : this.then(null, function (err) {\n                    return err && err.name === type ? handler(err) : PromiseReject(err);\n                });\n        },\n        finally: function (onFinally) {\n            return this.then(function (value) {\n                return DexiePromise.resolve(onFinally()).then(function () { return value; });\n            }, function (err) {\n                return DexiePromise.resolve(onFinally()).then(function () { return PromiseReject(err); });\n            });\n        },\n        timeout: function (ms, msg) {\n            var _this = this;\n            return ms < Infinity ?\n                new DexiePromise(function (resolve, reject) {\n                    var handle = setTimeout(function () { return reject(new exceptions.Timeout(msg)); }, ms);\n                    _this.then(resolve, reject).finally(clearTimeout.bind(null, handle));\n                }) : this;\n        }\n    });\n    if (typeof Symbol !== 'undefined' && Symbol.toStringTag)\n        setProp(DexiePromise.prototype, Symbol.toStringTag, 'Dexie.Promise');\n    globalPSD.env = snapShot();\n    function Listener(onFulfilled, onRejected, resolve, reject, zone) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n        this.psd = zone;\n    }\n    props(DexiePromise, {\n        all: function () {\n            var values = getArrayOf.apply(null, arguments)\n                .map(onPossibleParallellAsync);\n            return new DexiePromise(function (resolve, reject) {\n                if (values.length === 0)\n                    resolve([]);\n                var remaining = values.length;\n                values.forEach(function (a, i) { return DexiePromise.resolve(a).then(function (x) {\n                    values[i] = x;\n                    if (!--remaining)\n                        resolve(values);\n                }, reject); });\n            });\n        },\n        resolve: function (value) {\n            if (value instanceof DexiePromise)\n                return value;\n            if (value && typeof value.then === 'function')\n                return new DexiePromise(function (resolve, reject) {\n                    value.then(resolve, reject);\n                });\n            var rv = new DexiePromise(INTERNAL, true, value);\n            return rv;\n        },\n        reject: PromiseReject,\n        race: function () {\n            var values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n            return new DexiePromise(function (resolve, reject) {\n                values.map(function (value) { return DexiePromise.resolve(value).then(resolve, reject); });\n            });\n        },\n        PSD: {\n            get: function () { return PSD; },\n            set: function (value) { return PSD = value; }\n        },\n        totalEchoes: { get: function () { return totalEchoes; } },\n        newPSD: newScope,\n        usePSD: usePSD,\n        scheduler: {\n            get: function () { return asap; },\n            set: function (value) { asap = value; }\n        },\n        rejectionMapper: {\n            get: function () { return rejectionMapper; },\n            set: function (value) { rejectionMapper = value; }\n        },\n        follow: function (fn, zoneProps) {\n            return new DexiePromise(function (resolve, reject) {\n                return newScope(function (resolve, reject) {\n                    var psd = PSD;\n                    psd.unhandleds = [];\n                    psd.onunhandled = reject;\n                    psd.finalize = callBoth(function () {\n                        var _this = this;\n                        run_at_end_of_this_or_next_physical_tick(function () {\n                            _this.unhandleds.length === 0 ? resolve() : reject(_this.unhandleds[0]);\n                        });\n                    }, psd.finalize);\n                    fn();\n                }, zoneProps, resolve, reject);\n            });\n        }\n    });\n    if (NativePromise) {\n        if (NativePromise.allSettled)\n            setProp(DexiePromise, \"allSettled\", function () {\n                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n                return new DexiePromise(function (resolve) {\n                    if (possiblePromises.length === 0)\n                        resolve([]);\n                    var remaining = possiblePromises.length;\n                    var results = new Array(remaining);\n                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return results[i] = { status: \"fulfilled\", value: value }; }, function (reason) { return results[i] = { status: \"rejected\", reason: reason }; })\n                        .then(function () { return --remaining || resolve(results); }); });\n                });\n            });\n        if (NativePromise.any && typeof AggregateError !== 'undefined')\n            setProp(DexiePromise, \"any\", function () {\n                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n                return new DexiePromise(function (resolve, reject) {\n                    if (possiblePromises.length === 0)\n                        reject(new AggregateError([]));\n                    var remaining = possiblePromises.length;\n                    var failures = new Array(remaining);\n                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return resolve(value); }, function (failure) {\n                        failures[i] = failure;\n                        if (!--remaining)\n                            reject(new AggregateError(failures));\n                    }); });\n                });\n            });\n        if (NativePromise.withResolvers)\n            DexiePromise.withResolvers = NativePromise.withResolvers;\n    }\n    function executePromiseTask(promise, fn) {\n        try {\n            fn(function (value) {\n                if (promise._state !== null)\n                    return;\n                if (value === promise)\n                    throw new TypeError('A promise cannot be resolved with itself.');\n                var shouldExecuteTick = promise._lib && beginMicroTickScope();\n                if (value && typeof value.then === 'function') {\n                    executePromiseTask(promise, function (resolve, reject) {\n                        value instanceof DexiePromise ?\n                            value._then(resolve, reject) :\n                            value.then(resolve, reject);\n                    });\n                }\n                else {\n                    promise._state = true;\n                    promise._value = value;\n                    propagateAllListeners(promise);\n                }\n                if (shouldExecuteTick)\n                    endMicroTickScope();\n            }, handleRejection.bind(null, promise));\n        }\n        catch (ex) {\n            handleRejection(promise, ex);\n        }\n    }\n    function handleRejection(promise, reason) {\n        rejectingErrors.push(reason);\n        if (promise._state !== null)\n            return;\n        var shouldExecuteTick = promise._lib && beginMicroTickScope();\n        reason = rejectionMapper(reason);\n        promise._state = false;\n        promise._value = reason;\n        addPossiblyUnhandledError(promise);\n        propagateAllListeners(promise);\n        if (shouldExecuteTick)\n            endMicroTickScope();\n    }\n    function propagateAllListeners(promise) {\n        var listeners = promise._listeners;\n        promise._listeners = [];\n        for (var i = 0, len = listeners.length; i < len; ++i) {\n            propagateToListener(promise, listeners[i]);\n        }\n        var psd = promise._PSD;\n        --psd.ref || psd.finalize();\n        if (numScheduledCalls === 0) {\n            ++numScheduledCalls;\n            asap(function () {\n                if (--numScheduledCalls === 0)\n                    finalizePhysicalTick();\n            }, []);\n        }\n    }\n    function propagateToListener(promise, listener) {\n        if (promise._state === null) {\n            promise._listeners.push(listener);\n            return;\n        }\n        var cb = promise._state ? listener.onFulfilled : listener.onRejected;\n        if (cb === null) {\n            return (promise._state ? listener.resolve : listener.reject)(promise._value);\n        }\n        ++listener.psd.ref;\n        ++numScheduledCalls;\n        asap(callListener, [cb, promise, listener]);\n    }\n    function callListener(cb, promise, listener) {\n        try {\n            var ret, value = promise._value;\n            if (!promise._state && rejectingErrors.length)\n                rejectingErrors = [];\n            ret = debug && promise._consoleTask ? promise._consoleTask.run(function () { return cb(value); }) : cb(value);\n            if (!promise._state && rejectingErrors.indexOf(value) === -1) {\n                markErrorAsHandled(promise);\n            }\n            listener.resolve(ret);\n        }\n        catch (e) {\n            listener.reject(e);\n        }\n        finally {\n            if (--numScheduledCalls === 0)\n                finalizePhysicalTick();\n            --listener.psd.ref || listener.psd.finalize();\n        }\n    }\n    function physicalTick() {\n        usePSD(globalPSD, function () {\n            beginMicroTickScope() && endMicroTickScope();\n        });\n    }\n    function beginMicroTickScope() {\n        var wasRootExec = isOutsideMicroTick;\n        isOutsideMicroTick = false;\n        needsNewPhysicalTick = false;\n        return wasRootExec;\n    }\n    function endMicroTickScope() {\n        var callbacks, i, l;\n        do {\n            while (microtickQueue.length > 0) {\n                callbacks = microtickQueue;\n                microtickQueue = [];\n                l = callbacks.length;\n                for (i = 0; i < l; ++i) {\n                    var item = callbacks[i];\n                    item[0].apply(null, item[1]);\n                }\n            }\n        } while (microtickQueue.length > 0);\n        isOutsideMicroTick = true;\n        needsNewPhysicalTick = true;\n    }\n    function finalizePhysicalTick() {\n        var unhandledErrs = unhandledErrors;\n        unhandledErrors = [];\n        unhandledErrs.forEach(function (p) {\n            p._PSD.onunhandled.call(null, p._value, p);\n        });\n        var finalizers = tickFinalizers.slice(0);\n        var i = finalizers.length;\n        while (i)\n            finalizers[--i]();\n    }\n    function run_at_end_of_this_or_next_physical_tick(fn) {\n        function finalizer() {\n            fn();\n            tickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);\n        }\n        tickFinalizers.push(finalizer);\n        ++numScheduledCalls;\n        asap(function () {\n            if (--numScheduledCalls === 0)\n                finalizePhysicalTick();\n        }, []);\n    }\n    function addPossiblyUnhandledError(promise) {\n        if (!unhandledErrors.some(function (p) { return p._value === promise._value; }))\n            unhandledErrors.push(promise);\n    }\n    function markErrorAsHandled(promise) {\n        var i = unhandledErrors.length;\n        while (i)\n            if (unhandledErrors[--i]._value === promise._value) {\n                unhandledErrors.splice(i, 1);\n                return;\n            }\n    }\n    function PromiseReject(reason) {\n        return new DexiePromise(INTERNAL, false, reason);\n    }\n    function wrap(fn, errorCatcher) {\n        var psd = PSD;\n        return function () {\n            var wasRootExec = beginMicroTickScope(), outerScope = PSD;\n            try {\n                switchToZone(psd, true);\n                return fn.apply(this, arguments);\n            }\n            catch (e) {\n                errorCatcher && errorCatcher(e);\n            }\n            finally {\n                switchToZone(outerScope, false);\n                if (wasRootExec)\n                    endMicroTickScope();\n            }\n        };\n    }\n    var task = { awaits: 0, echoes: 0, id: 0 };\n    var taskCounter = 0;\n    var zoneStack = [];\n    var zoneEchoes = 0;\n    var totalEchoes = 0;\n    var zone_id_counter = 0;\n    function newScope(fn, props, a1, a2) {\n        var parent = PSD, psd = Object.create(parent);\n        psd.parent = parent;\n        psd.ref = 0;\n        psd.global = false;\n        psd.id = ++zone_id_counter;\n        globalPSD.env;\n        psd.env = patchGlobalPromise ? {\n            Promise: DexiePromise,\n            PromiseProp: { value: DexiePromise, configurable: true, writable: true },\n            all: DexiePromise.all,\n            race: DexiePromise.race,\n            allSettled: DexiePromise.allSettled,\n            any: DexiePromise.any,\n            resolve: DexiePromise.resolve,\n            reject: DexiePromise.reject,\n        } : {};\n        if (props)\n            extend(psd, props);\n        ++parent.ref;\n        psd.finalize = function () {\n            --this.parent.ref || this.parent.finalize();\n        };\n        var rv = usePSD(psd, fn, a1, a2);\n        if (psd.ref === 0)\n            psd.finalize();\n        return rv;\n    }\n    function incrementExpectedAwaits() {\n        if (!task.id)\n            task.id = ++taskCounter;\n        ++task.awaits;\n        task.echoes += ZONE_ECHO_LIMIT;\n        return task.id;\n    }\n    function decrementExpectedAwaits() {\n        if (!task.awaits)\n            return false;\n        if (--task.awaits === 0)\n            task.id = 0;\n        task.echoes = task.awaits * ZONE_ECHO_LIMIT;\n        return true;\n    }\n    if (('' + nativePromiseThen).indexOf('[native code]') === -1) {\n        incrementExpectedAwaits = decrementExpectedAwaits = nop;\n    }\n    function onPossibleParallellAsync(possiblePromise) {\n        if (task.echoes && possiblePromise && possiblePromise.constructor === NativePromise) {\n            incrementExpectedAwaits();\n            return possiblePromise.then(function (x) {\n                decrementExpectedAwaits();\n                return x;\n            }, function (e) {\n                decrementExpectedAwaits();\n                return rejection(e);\n            });\n        }\n        return possiblePromise;\n    }\n    function zoneEnterEcho(targetZone) {\n        ++totalEchoes;\n        if (!task.echoes || --task.echoes === 0) {\n            task.echoes = task.awaits = task.id = 0;\n        }\n        zoneStack.push(PSD);\n        switchToZone(targetZone, true);\n    }\n    function zoneLeaveEcho() {\n        var zone = zoneStack[zoneStack.length - 1];\n        zoneStack.pop();\n        switchToZone(zone, false);\n    }\n    function switchToZone(targetZone, bEnteringZone) {\n        var currentZone = PSD;\n        if (bEnteringZone ? task.echoes && (!zoneEchoes++ || targetZone !== PSD) : zoneEchoes && (!--zoneEchoes || targetZone !== PSD)) {\n            queueMicrotask(bEnteringZone ? zoneEnterEcho.bind(null, targetZone) : zoneLeaveEcho);\n        }\n        if (targetZone === PSD)\n            return;\n        PSD = targetZone;\n        if (currentZone === globalPSD)\n            globalPSD.env = snapShot();\n        if (patchGlobalPromise) {\n            var GlobalPromise = globalPSD.env.Promise;\n            var targetEnv = targetZone.env;\n            if (currentZone.global || targetZone.global) {\n                Object.defineProperty(_global, 'Promise', targetEnv.PromiseProp);\n                GlobalPromise.all = targetEnv.all;\n                GlobalPromise.race = targetEnv.race;\n                GlobalPromise.resolve = targetEnv.resolve;\n                GlobalPromise.reject = targetEnv.reject;\n                if (targetEnv.allSettled)\n                    GlobalPromise.allSettled = targetEnv.allSettled;\n                if (targetEnv.any)\n                    GlobalPromise.any = targetEnv.any;\n            }\n        }\n    }\n    function snapShot() {\n        var GlobalPromise = _global.Promise;\n        return patchGlobalPromise ? {\n            Promise: GlobalPromise,\n            PromiseProp: Object.getOwnPropertyDescriptor(_global, \"Promise\"),\n            all: GlobalPromise.all,\n            race: GlobalPromise.race,\n            allSettled: GlobalPromise.allSettled,\n            any: GlobalPromise.any,\n            resolve: GlobalPromise.resolve,\n            reject: GlobalPromise.reject,\n        } : {};\n    }\n    function usePSD(psd, fn, a1, a2, a3) {\n        var outerScope = PSD;\n        try {\n            switchToZone(psd, true);\n            return fn(a1, a2, a3);\n        }\n        finally {\n            switchToZone(outerScope, false);\n        }\n    }\n    function nativeAwaitCompatibleWrap(fn, zone, possibleAwait, cleanup) {\n        return typeof fn !== 'function' ? fn : function () {\n            var outerZone = PSD;\n            if (possibleAwait)\n                incrementExpectedAwaits();\n            switchToZone(zone, true);\n            try {\n                return fn.apply(this, arguments);\n            }\n            finally {\n                switchToZone(outerZone, false);\n                if (cleanup)\n                    queueMicrotask(decrementExpectedAwaits);\n            }\n        };\n    }\n    function execInGlobalContext(cb) {\n        if (Promise === NativePromise && task.echoes === 0) {\n            if (zoneEchoes === 0) {\n                cb();\n            }\n            else {\n                enqueueNativeMicroTask(cb);\n            }\n        }\n        else {\n            setTimeout(cb, 0);\n        }\n    }\n    var rejection = DexiePromise.reject;\n\n    function tempTransaction(db, mode, storeNames, fn) {\n        if (!db.idbdb || (!db._state.openComplete && (!PSD.letThrough && !db._vip))) {\n            if (db._state.openComplete) {\n                return rejection(new exceptions.DatabaseClosed(db._state.dbOpenError));\n            }\n            if (!db._state.isBeingOpened) {\n                if (!db._state.autoOpen)\n                    return rejection(new exceptions.DatabaseClosed());\n                db.open().catch(nop);\n            }\n            return db._state.dbReadyPromise.then(function () { return tempTransaction(db, mode, storeNames, fn); });\n        }\n        else {\n            var trans = db._createTransaction(mode, storeNames, db._dbSchema);\n            try {\n                trans.create();\n                db._state.PR1398_maxLoop = 3;\n            }\n            catch (ex) {\n                if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\n                    console.warn('Dexie: Need to reopen db');\n                    db.close({ disableAutoOpen: false });\n                    return db.open().then(function () { return tempTransaction(db, mode, storeNames, fn); });\n                }\n                return rejection(ex);\n            }\n            return trans._promise(mode, function (resolve, reject) {\n                return newScope(function () {\n                    PSD.trans = trans;\n                    return fn(resolve, reject, trans);\n                });\n            }).then(function (result) {\n                if (mode === 'readwrite')\n                    try {\n                        trans.idbtrans.commit();\n                    }\n                    catch (_a) { }\n                return mode === 'readonly' ? result : trans._completion.then(function () { return result; });\n            });\n        }\n    }\n\n    var DEXIE_VERSION = '4.2.1';\n    var maxString = String.fromCharCode(65535);\n    var minKey = -Infinity;\n    var INVALID_KEY_ARGUMENT = \"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\";\n    var STRING_EXPECTED = \"String expected.\";\n    var connections = [];\n    var DBNAMES_DB = '__dbnames';\n    var READONLY = 'readonly';\n    var READWRITE = 'readwrite';\n\n    function combine(filter1, filter2) {\n        return filter1 ?\n            filter2 ?\n                function () { return filter1.apply(this, arguments) && filter2.apply(this, arguments); } :\n                filter1 :\n            filter2;\n    }\n\n    var AnyRange = {\n        type: 3 ,\n        lower: -Infinity,\n        lowerOpen: false,\n        upper: [[]],\n        upperOpen: false\n    };\n\n    function workaroundForUndefinedPrimKey(keyPath) {\n        return typeof keyPath === \"string\" && !/\\./.test(keyPath)\n            ? function (obj) {\n                if (obj[keyPath] === undefined && (keyPath in obj)) {\n                    obj = deepClone(obj);\n                    delete obj[keyPath];\n                }\n                return obj;\n            }\n            : function (obj) { return obj; };\n    }\n\n    function Entity() {\n        throw exceptions.Type(\"Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.\");\n    }\n\n    function cmp(a, b) {\n        try {\n            var ta = type(a);\n            var tb = type(b);\n            if (ta !== tb) {\n                if (ta === 'Array')\n                    return 1;\n                if (tb === 'Array')\n                    return -1;\n                if (ta === 'binary')\n                    return 1;\n                if (tb === 'binary')\n                    return -1;\n                if (ta === 'string')\n                    return 1;\n                if (tb === 'string')\n                    return -1;\n                if (ta === 'Date')\n                    return 1;\n                if (tb !== 'Date')\n                    return NaN;\n                return -1;\n            }\n            switch (ta) {\n                case 'number':\n                case 'Date':\n                case 'string':\n                    return a > b ? 1 : a < b ? -1 : 0;\n                case 'binary': {\n                    return compareUint8Arrays(getUint8Array(a), getUint8Array(b));\n                }\n                case 'Array':\n                    return compareArrays(a, b);\n            }\n        }\n        catch (_a) { }\n        return NaN;\n    }\n    function compareArrays(a, b) {\n        var al = a.length;\n        var bl = b.length;\n        var l = al < bl ? al : bl;\n        for (var i = 0; i < l; ++i) {\n            var res = cmp(a[i], b[i]);\n            if (res !== 0)\n                return res;\n        }\n        return al === bl ? 0 : al < bl ? -1 : 1;\n    }\n    function compareUint8Arrays(a, b) {\n        var al = a.length;\n        var bl = b.length;\n        var l = al < bl ? al : bl;\n        for (var i = 0; i < l; ++i) {\n            if (a[i] !== b[i])\n                return a[i] < b[i] ? -1 : 1;\n        }\n        return al === bl ? 0 : al < bl ? -1 : 1;\n    }\n    function type(x) {\n        var t = typeof x;\n        if (t !== 'object')\n            return t;\n        if (ArrayBuffer.isView(x))\n            return 'binary';\n        var tsTag = toStringTag(x);\n        return tsTag === 'ArrayBuffer' ? 'binary' : tsTag;\n    }\n    function getUint8Array(a) {\n        if (a instanceof Uint8Array)\n            return a;\n        if (ArrayBuffer.isView(a))\n            return new Uint8Array(a.buffer, a.byteOffset, a.byteLength);\n        return new Uint8Array(a);\n    }\n\n    function builtInDeletionTrigger(table, keys, res) {\n        var yProps = table.schema.yProps;\n        if (!yProps)\n            return res;\n        if (keys && res.numFailures > 0)\n            keys = keys.filter(function (_, i) { return !res.failures[i]; });\n        return Promise.all(yProps.map(function (_a) {\n            var updatesTable = _a.updatesTable;\n            return keys\n                ? table.db.table(updatesTable).where('k').anyOf(keys).delete()\n                : table.db.table(updatesTable).clear();\n        })).then(function () { return res; });\n    }\n\n    var PropModification =  (function () {\n        function PropModification(spec) {\n            this[\"@@propmod\"] = spec;\n        }\n        PropModification.prototype.execute = function (value) {\n            var _a;\n            var spec = this[\"@@propmod\"];\n            if (spec.add !== undefined) {\n                var term = spec.add;\n                if (isArray(term)) {\n                    return __spreadArray(__spreadArray([], (isArray(value) ? value : []), true), term, true).sort();\n                }\n                if (typeof term === 'number')\n                    return (Number(value) || 0) + term;\n                if (typeof term === 'bigint') {\n                    try {\n                        return BigInt(value) + term;\n                    }\n                    catch (_b) {\n                        return BigInt(0) + term;\n                    }\n                }\n                throw new TypeError(\"Invalid term \".concat(term));\n            }\n            if (spec.remove !== undefined) {\n                var subtrahend_1 = spec.remove;\n                if (isArray(subtrahend_1)) {\n                    return isArray(value) ? value.filter(function (item) { return !subtrahend_1.includes(item); }).sort() : [];\n                }\n                if (typeof subtrahend_1 === 'number')\n                    return Number(value) - subtrahend_1;\n                if (typeof subtrahend_1 === 'bigint') {\n                    try {\n                        return BigInt(value) - subtrahend_1;\n                    }\n                    catch (_c) {\n                        return BigInt(0) - subtrahend_1;\n                    }\n                }\n                throw new TypeError(\"Invalid subtrahend \".concat(subtrahend_1));\n            }\n            var prefixToReplace = (_a = spec.replacePrefix) === null || _a === void 0 ? void 0 : _a[0];\n            if (prefixToReplace && typeof value === 'string' && value.startsWith(prefixToReplace)) {\n                return spec.replacePrefix[1] + value.substring(prefixToReplace.length);\n            }\n            return value;\n        };\n        return PropModification;\n    }());\n\n    function applyUpdateSpec(obj, changes) {\n        var keyPaths = keys(changes);\n        var numKeys = keyPaths.length;\n        var anythingModified = false;\n        for (var i = 0; i < numKeys; ++i) {\n            var keyPath = keyPaths[i];\n            var value = changes[keyPath];\n            var origValue = getByKeyPath(obj, keyPath);\n            if (value instanceof PropModification) {\n                setByKeyPath(obj, keyPath, value.execute(origValue));\n                anythingModified = true;\n            }\n            else if (origValue !== value) {\n                setByKeyPath(obj, keyPath, value);\n                anythingModified = true;\n            }\n        }\n        return anythingModified;\n    }\n\n    var Table =  (function () {\n        function Table() {\n        }\n        Table.prototype._trans = function (mode, fn, writeLocked) {\n            var trans = this._tx || PSD.trans;\n            var tableName = this.name;\n            var task = debug && typeof console !== 'undefined' && console.createTask && console.createTask(\"Dexie: \".concat(mode === 'readonly' ? 'read' : 'write', \" \").concat(this.name));\n            function checkTableInTransaction(resolve, reject, trans) {\n                if (!trans.schema[tableName])\n                    throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n                return fn(trans.idbtrans, trans);\n            }\n            var wasRootExec = beginMicroTickScope();\n            try {\n                var p = trans && trans.db._novip === this.db._novip ?\n                    trans === PSD.trans ?\n                        trans._promise(mode, checkTableInTransaction, writeLocked) :\n                        newScope(function () { return trans._promise(mode, checkTableInTransaction, writeLocked); }, { trans: trans, transless: PSD.transless || PSD }) :\n                    tempTransaction(this.db, mode, [this.name], checkTableInTransaction);\n                if (task) {\n                    p._consoleTask = task;\n                    p = p.catch(function (err) {\n                        console.trace(err);\n                        return rejection(err);\n                    });\n                }\n                return p;\n            }\n            finally {\n                if (wasRootExec)\n                    endMicroTickScope();\n            }\n        };\n        Table.prototype.get = function (keyOrCrit, cb) {\n            var _this = this;\n            if (keyOrCrit && keyOrCrit.constructor === Object)\n                return this.where(keyOrCrit).first(cb);\n            if (keyOrCrit == null)\n                return rejection(new exceptions.Type(\"Invalid argument to Table.get()\"));\n            return this._trans('readonly', function (trans) {\n                return _this.core.get({ trans: trans, key: keyOrCrit })\n                    .then(function (res) { return _this.hook.reading.fire(res); });\n            }).then(cb);\n        };\n        Table.prototype.where = function (indexOrCrit) {\n            if (typeof indexOrCrit === 'string')\n                return new this.db.WhereClause(this, indexOrCrit);\n            if (isArray(indexOrCrit))\n                return new this.db.WhereClause(this, \"[\".concat(indexOrCrit.join('+'), \"]\"));\n            var keyPaths = keys(indexOrCrit);\n            if (keyPaths.length === 1)\n                return this\n                    .where(keyPaths[0])\n                    .equals(indexOrCrit[keyPaths[0]]);\n            var compoundIndex = this.schema.indexes.concat(this.schema.primKey).filter(function (ix) {\n                if (ix.compound &&\n                    keyPaths.every(function (keyPath) { return ix.keyPath.indexOf(keyPath) >= 0; })) {\n                    for (var i = 0; i < keyPaths.length; ++i) {\n                        if (keyPaths.indexOf(ix.keyPath[i]) === -1)\n                            return false;\n                    }\n                    return true;\n                }\n                return false;\n            }).sort(function (a, b) { return a.keyPath.length - b.keyPath.length; })[0];\n            if (compoundIndex && this.db._maxKey !== maxString) {\n                var keyPathsInValidOrder = compoundIndex.keyPath.slice(0, keyPaths.length);\n                return this\n                    .where(keyPathsInValidOrder)\n                    .equals(keyPathsInValidOrder.map(function (kp) { return indexOrCrit[kp]; }));\n            }\n            if (!compoundIndex && debug)\n                console.warn(\"The query \".concat(JSON.stringify(indexOrCrit), \" on \").concat(this.name, \" would benefit from a \") +\n                    \"compound index [\".concat(keyPaths.join('+'), \"]\"));\n            var idxByName = this.schema.idxByName;\n            function equals(a, b) {\n                return cmp(a, b) === 0;\n            }\n            var _a = keyPaths.reduce(function (_a, keyPath) {\n                var prevIndex = _a[0], prevFilterFn = _a[1];\n                var index = idxByName[keyPath];\n                var value = indexOrCrit[keyPath];\n                return [\n                    prevIndex || index,\n                    prevIndex || !index ?\n                        combine(prevFilterFn, index && index.multi ?\n                            function (x) {\n                                var prop = getByKeyPath(x, keyPath);\n                                return isArray(prop) && prop.some(function (item) { return equals(value, item); });\n                            } : function (x) { return equals(value, getByKeyPath(x, keyPath)); })\n                        : prevFilterFn\n                ];\n            }, [null, null]), idx = _a[0], filterFunction = _a[1];\n            return idx ?\n                this.where(idx.name).equals(indexOrCrit[idx.keyPath])\n                    .filter(filterFunction) :\n                compoundIndex ?\n                    this.filter(filterFunction) :\n                    this.where(keyPaths).equals('');\n        };\n        Table.prototype.filter = function (filterFunction) {\n            return this.toCollection().and(filterFunction);\n        };\n        Table.prototype.count = function (thenShortcut) {\n            return this.toCollection().count(thenShortcut);\n        };\n        Table.prototype.offset = function (offset) {\n            return this.toCollection().offset(offset);\n        };\n        Table.prototype.limit = function (numRows) {\n            return this.toCollection().limit(numRows);\n        };\n        Table.prototype.each = function (callback) {\n            return this.toCollection().each(callback);\n        };\n        Table.prototype.toArray = function (thenShortcut) {\n            return this.toCollection().toArray(thenShortcut);\n        };\n        Table.prototype.toCollection = function () {\n            return new this.db.Collection(new this.db.WhereClause(this));\n        };\n        Table.prototype.orderBy = function (index) {\n            return new this.db.Collection(new this.db.WhereClause(this, isArray(index) ?\n                \"[\".concat(index.join('+'), \"]\") :\n                index));\n        };\n        Table.prototype.reverse = function () {\n            return this.toCollection().reverse();\n        };\n        Table.prototype.mapToClass = function (constructor) {\n            var _a = this, db = _a.db, tableName = _a.name;\n            this.schema.mappedClass = constructor;\n            if (constructor.prototype instanceof Entity) {\n                constructor =  (function (_super) {\n                    __extends(class_1, _super);\n                    function class_1() {\n                        return _super !== null && _super.apply(this, arguments) || this;\n                    }\n                    Object.defineProperty(class_1.prototype, \"db\", {\n                        get: function () { return db; },\n                        enumerable: false,\n                        configurable: true\n                    });\n                    class_1.prototype.table = function () { return tableName; };\n                    return class_1;\n                }(constructor));\n            }\n            var inheritedProps = new Set();\n            for (var proto = constructor.prototype; proto; proto = getProto(proto)) {\n                Object.getOwnPropertyNames(proto).forEach(function (propName) { return inheritedProps.add(propName); });\n            }\n            var readHook = function (obj) {\n                if (!obj)\n                    return obj;\n                var res = Object.create(constructor.prototype);\n                for (var m in obj)\n                    if (!inheritedProps.has(m))\n                        try {\n                            res[m] = obj[m];\n                        }\n                        catch (_) { }\n                return res;\n            };\n            if (this.schema.readHook) {\n                this.hook.reading.unsubscribe(this.schema.readHook);\n            }\n            this.schema.readHook = readHook;\n            this.hook(\"reading\", readHook);\n            return constructor;\n        };\n        Table.prototype.defineClass = function () {\n            function Class(content) {\n                extend(this, content);\n            }\n            return this.mapToClass(Class);\n        };\n        Table.prototype.add = function (obj, key) {\n            var _this = this;\n            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n            var objToAdd = obj;\n            if (keyPath && auto) {\n                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n            }\n            return this._trans('readwrite', function (trans) {\n                return _this.core.mutate({ trans: trans, type: 'add', keys: key != null ? [key] : null, values: [objToAdd] });\n            }).then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })\n                .then(function (lastResult) {\n                if (keyPath) {\n                    try {\n                        setByKeyPath(obj, keyPath, lastResult);\n                    }\n                    catch (_) { }\n                }\n                return lastResult;\n            });\n        };\n        Table.prototype.upsert = function (key, modifications) {\n            var _this = this;\n            var keyPath = this.schema.primKey.keyPath;\n            return this._trans('readwrite', function (trans) {\n                return _this.core.get({ trans: trans, key: key }).then(function (existing) {\n                    var obj = existing !== null && existing !== void 0 ? existing : {};\n                    applyUpdateSpec(obj, modifications);\n                    if (keyPath)\n                        setByKeyPath(obj, keyPath, key);\n                    return _this.core.mutate({\n                        trans: trans,\n                        type: 'put',\n                        values: [obj],\n                        keys: [key],\n                        upsert: true,\n                        updates: { keys: [key], changeSpecs: [modifications] }\n                    }).then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : !!existing; });\n                });\n            });\n        };\n        Table.prototype.update = function (keyOrObject, modifications) {\n            if (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {\n                var key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);\n                if (key === undefined)\n                    return rejection(new exceptions.InvalidArgument(\"Given object does not contain its primary key\"));\n                return this.where(\":id\").equals(key).modify(modifications);\n            }\n            else {\n                return this.where(\":id\").equals(keyOrObject).modify(modifications);\n            }\n        };\n        Table.prototype.put = function (obj, key) {\n            var _this = this;\n            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n            var objToAdd = obj;\n            if (keyPath && auto) {\n                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n            }\n            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'put', values: [objToAdd], keys: key != null ? [key] : null }); })\n                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })\n                .then(function (lastResult) {\n                if (keyPath) {\n                    try {\n                        setByKeyPath(obj, keyPath, lastResult);\n                    }\n                    catch (_) { }\n                }\n                return lastResult;\n            });\n        };\n        Table.prototype.delete = function (key) {\n            var _this = this;\n            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'delete', keys: [key] })\n                .then(function (res) { return builtInDeletionTrigger(_this, [key], res); })\n                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; }); });\n        };\n        Table.prototype.clear = function () {\n            var _this = this;\n            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'deleteRange', range: AnyRange })\n                .then(function (res) { return builtInDeletionTrigger(_this, null, res); }); })\n                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });\n        };\n        Table.prototype.bulkGet = function (keys) {\n            var _this = this;\n            return this._trans('readonly', function (trans) {\n                return _this.core.getMany({\n                    keys: keys,\n                    trans: trans\n                }).then(function (result) { return result.map(function (res) { return _this.hook.reading.fire(res); }); });\n            });\n        };\n        Table.prototype.bulkAdd = function (objects, keysOrOptions, options) {\n            var _this = this;\n            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n            options = options || (keys ? undefined : keysOrOptions);\n            var wantResults = options ? options.allKeys : undefined;\n            return this._trans('readwrite', function (trans) {\n                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n                if (keyPath && keys)\n                    throw new exceptions.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");\n                if (keys && keys.length !== objects.length)\n                    throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n                var numObjects = objects.length;\n                var objectsToAdd = keyPath && auto ?\n                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                    objects;\n                return _this.core.mutate({ trans: trans, type: 'add', keys: keys, values: objectsToAdd, wantResults: wantResults })\n                    .then(function (_a) {\n                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;\n                    var result = wantResults ? results : lastResult;\n                    if (numFailures === 0)\n                        return result;\n                    throw new BulkError(\"\".concat(_this.name, \".bulkAdd(): \").concat(numFailures, \" of \").concat(numObjects, \" operations failed\"), failures);\n                });\n            });\n        };\n        Table.prototype.bulkPut = function (objects, keysOrOptions, options) {\n            var _this = this;\n            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n            options = options || (keys ? undefined : keysOrOptions);\n            var wantResults = options ? options.allKeys : undefined;\n            return this._trans('readwrite', function (trans) {\n                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n                if (keyPath && keys)\n                    throw new exceptions.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");\n                if (keys && keys.length !== objects.length)\n                    throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n                var numObjects = objects.length;\n                var objectsToPut = keyPath && auto ?\n                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                    objects;\n                return _this.core.mutate({ trans: trans, type: 'put', keys: keys, values: objectsToPut, wantResults: wantResults })\n                    .then(function (_a) {\n                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;\n                    var result = wantResults ? results : lastResult;\n                    if (numFailures === 0)\n                        return result;\n                    throw new BulkError(\"\".concat(_this.name, \".bulkPut(): \").concat(numFailures, \" of \").concat(numObjects, \" operations failed\"), failures);\n                });\n            });\n        };\n        Table.prototype.bulkUpdate = function (keysAndChanges) {\n            var _this = this;\n            var coreTable = this.core;\n            var keys = keysAndChanges.map(function (entry) { return entry.key; });\n            var changeSpecs = keysAndChanges.map(function (entry) { return entry.changes; });\n            var offsetMap = [];\n            return this._trans('readwrite', function (trans) {\n                return coreTable.getMany({ trans: trans, keys: keys, cache: 'clone' }).then(function (objs) {\n                    var resultKeys = [];\n                    var resultObjs = [];\n                    keysAndChanges.forEach(function (_a, idx) {\n                        var key = _a.key, changes = _a.changes;\n                        var obj = objs[idx];\n                        if (obj) {\n                            for (var _i = 0, _b = Object.keys(changes); _i < _b.length; _i++) {\n                                var keyPath = _b[_i];\n                                var value = changes[keyPath];\n                                if (keyPath === _this.schema.primKey.keyPath) {\n                                    if (cmp(value, key) !== 0) {\n                                        throw new exceptions.Constraint(\"Cannot update primary key in bulkUpdate()\");\n                                    }\n                                }\n                                else {\n                                    setByKeyPath(obj, keyPath, value);\n                                }\n                            }\n                            offsetMap.push(idx);\n                            resultKeys.push(key);\n                            resultObjs.push(obj);\n                        }\n                    });\n                    var numEntries = resultKeys.length;\n                    return coreTable\n                        .mutate({\n                        trans: trans,\n                        type: 'put',\n                        keys: resultKeys,\n                        values: resultObjs,\n                        updates: {\n                            keys: keys,\n                            changeSpecs: changeSpecs\n                        }\n                    })\n                        .then(function (_a) {\n                        var numFailures = _a.numFailures, failures = _a.failures;\n                        if (numFailures === 0)\n                            return numEntries;\n                        for (var _i = 0, _b = Object.keys(failures); _i < _b.length; _i++) {\n                            var offset = _b[_i];\n                            var mappedOffset = offsetMap[Number(offset)];\n                            if (mappedOffset != null) {\n                                var failure = failures[offset];\n                                delete failures[offset];\n                                failures[mappedOffset] = failure;\n                            }\n                        }\n                        throw new BulkError(\"\".concat(_this.name, \".bulkUpdate(): \").concat(numFailures, \" of \").concat(numEntries, \" operations failed\"), failures);\n                    });\n                });\n            });\n        };\n        Table.prototype.bulkDelete = function (keys) {\n            var _this = this;\n            var numKeys = keys.length;\n            return this._trans('readwrite', function (trans) {\n                return _this.core.mutate({ trans: trans, type: 'delete', keys: keys })\n                    .then(function (res) { return builtInDeletionTrigger(_this, keys, res); });\n            }).then(function (_a) {\n                var numFailures = _a.numFailures, lastResult = _a.lastResult, failures = _a.failures;\n                if (numFailures === 0)\n                    return lastResult;\n                throw new BulkError(\"\".concat(_this.name, \".bulkDelete(): \").concat(numFailures, \" of \").concat(numKeys, \" operations failed\"), failures);\n            });\n        };\n        return Table;\n    }());\n\n    function Events(ctx) {\n        var evs = {};\n        var rv = function (eventName, subscriber) {\n            if (subscriber) {\n                var i = arguments.length, args = new Array(i - 1);\n                while (--i)\n                    args[i - 1] = arguments[i];\n                evs[eventName].subscribe.apply(null, args);\n                return ctx;\n            }\n            else if (typeof (eventName) === 'string') {\n                return evs[eventName];\n            }\n        };\n        rv.addEventType = add;\n        for (var i = 1, l = arguments.length; i < l; ++i) {\n            add(arguments[i]);\n        }\n        return rv;\n        function add(eventName, chainFunction, defaultFunction) {\n            if (typeof eventName === 'object')\n                return addConfiguredEvents(eventName);\n            if (!chainFunction)\n                chainFunction = reverseStoppableEventChain;\n            if (!defaultFunction)\n                defaultFunction = nop;\n            var context = {\n                subscribers: [],\n                fire: defaultFunction,\n                subscribe: function (cb) {\n                    if (context.subscribers.indexOf(cb) === -1) {\n                        context.subscribers.push(cb);\n                        context.fire = chainFunction(context.fire, cb);\n                    }\n                },\n                unsubscribe: function (cb) {\n                    context.subscribers = context.subscribers.filter(function (fn) { return fn !== cb; });\n                    context.fire = context.subscribers.reduce(chainFunction, defaultFunction);\n                }\n            };\n            evs[eventName] = rv[eventName] = context;\n            return context;\n        }\n        function addConfiguredEvents(cfg) {\n            keys(cfg).forEach(function (eventName) {\n                var args = cfg[eventName];\n                if (isArray(args)) {\n                    add(eventName, cfg[eventName][0], cfg[eventName][1]);\n                }\n                else if (args === 'asap') {\n                    var context = add(eventName, mirror, function fire() {\n                        var i = arguments.length, args = new Array(i);\n                        while (i--)\n                            args[i] = arguments[i];\n                        context.subscribers.forEach(function (fn) {\n                            asap$1(function fireEvent() {\n                                fn.apply(null, args);\n                            });\n                        });\n                    });\n                }\n                else\n                    throw new exceptions.InvalidArgument(\"Invalid event config\");\n            });\n        }\n    }\n\n    function makeClassConstructor(prototype, constructor) {\n        derive(constructor).from({ prototype: prototype });\n        return constructor;\n    }\n\n    function createTableConstructor(db) {\n        return makeClassConstructor(Table.prototype, function Table(name, tableSchema, trans) {\n            this.db = db;\n            this._tx = trans;\n            this.name = name;\n            this.schema = tableSchema;\n            this.hook = db._allTables[name] ? db._allTables[name].hook : Events(null, {\n                \"creating\": [hookCreatingChain, nop],\n                \"reading\": [pureFunctionChain, mirror],\n                \"updating\": [hookUpdatingChain, nop],\n                \"deleting\": [hookDeletingChain, nop]\n            });\n        });\n    }\n\n    function isPlainKeyRange(ctx, ignoreLimitFilter) {\n        return !(ctx.filter || ctx.algorithm || ctx.or) &&\n            (ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);\n    }\n    function addFilter(ctx, fn) {\n        ctx.filter = combine(ctx.filter, fn);\n    }\n    function addReplayFilter(ctx, factory, isLimitFilter) {\n        var curr = ctx.replayFilter;\n        ctx.replayFilter = curr ? function () { return combine(curr(), factory()); } : factory;\n        ctx.justLimit = isLimitFilter && !curr;\n    }\n    function addMatchFilter(ctx, fn) {\n        ctx.isMatch = combine(ctx.isMatch, fn);\n    }\n    function getIndexOrStore(ctx, coreSchema) {\n        if (ctx.isPrimKey)\n            return coreSchema.primaryKey;\n        var index = coreSchema.getIndexByKeyPath(ctx.index);\n        if (!index)\n            throw new exceptions.Schema(\"KeyPath \" + ctx.index + \" on object store \" + coreSchema.name + \" is not indexed\");\n        return index;\n    }\n    function openCursor(ctx, coreTable, trans) {\n        var index = getIndexOrStore(ctx, coreTable.schema);\n        return coreTable.openCursor({\n            trans: trans,\n            values: !ctx.keysOnly,\n            reverse: ctx.dir === 'prev',\n            unique: !!ctx.unique,\n            query: {\n                index: index,\n                range: ctx.range\n            }\n        });\n    }\n    function iter(ctx, fn, coreTrans, coreTable) {\n        var filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;\n        if (!ctx.or) {\n            return iterate(openCursor(ctx, coreTable, coreTrans), combine(ctx.algorithm, filter), fn, !ctx.keysOnly && ctx.valueMapper);\n        }\n        else {\n            var set_1 = {};\n            var union = function (item, cursor, advance) {\n                if (!filter || filter(cursor, advance, function (result) { return cursor.stop(result); }, function (err) { return cursor.fail(err); })) {\n                    var primaryKey = cursor.primaryKey;\n                    var key = '' + primaryKey;\n                    if (key === '[object ArrayBuffer]')\n                        key = '' + new Uint8Array(primaryKey);\n                    if (!hasOwn(set_1, key)) {\n                        set_1[key] = true;\n                        fn(item, cursor, advance);\n                    }\n                }\n            };\n            return Promise.all([\n                ctx.or._iterate(union, coreTrans),\n                iterate(openCursor(ctx, coreTable, coreTrans), ctx.algorithm, union, !ctx.keysOnly && ctx.valueMapper)\n            ]);\n        }\n    }\n    function iterate(cursorPromise, filter, fn, valueMapper) {\n        var mappedFn = valueMapper ? function (x, c, a) { return fn(valueMapper(x), c, a); } : fn;\n        var wrappedFn = wrap(mappedFn);\n        return cursorPromise.then(function (cursor) {\n            if (cursor) {\n                return cursor.start(function () {\n                    var c = function () { return cursor.continue(); };\n                    if (!filter || filter(cursor, function (advancer) { return c = advancer; }, function (val) { cursor.stop(val); c = nop; }, function (e) { cursor.fail(e); c = nop; }))\n                        wrappedFn(cursor.value, cursor, function (advancer) { return c = advancer; });\n                    c();\n                });\n            }\n        });\n    }\n\n    var Collection =  (function () {\n        function Collection() {\n        }\n        Collection.prototype._read = function (fn, cb) {\n            var ctx = this._ctx;\n            return ctx.error ?\n                ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n                ctx.table._trans('readonly', fn).then(cb);\n        };\n        Collection.prototype._write = function (fn) {\n            var ctx = this._ctx;\n            return ctx.error ?\n                ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n                ctx.table._trans('readwrite', fn, \"locked\");\n        };\n        Collection.prototype._addAlgorithm = function (fn) {\n            var ctx = this._ctx;\n            ctx.algorithm = combine(ctx.algorithm, fn);\n        };\n        Collection.prototype._iterate = function (fn, coreTrans) {\n            return iter(this._ctx, fn, coreTrans, this._ctx.table.core);\n        };\n        Collection.prototype.clone = function (props) {\n            var rv = Object.create(this.constructor.prototype), ctx = Object.create(this._ctx);\n            if (props)\n                extend(ctx, props);\n            rv._ctx = ctx;\n            return rv;\n        };\n        Collection.prototype.raw = function () {\n            this._ctx.valueMapper = null;\n            return this;\n        };\n        Collection.prototype.each = function (fn) {\n            var ctx = this._ctx;\n            return this._read(function (trans) { return iter(ctx, fn, trans, ctx.table.core); });\n        };\n        Collection.prototype.count = function (cb) {\n            var _this = this;\n            return this._read(function (trans) {\n                var ctx = _this._ctx;\n                var coreTable = ctx.table.core;\n                if (isPlainKeyRange(ctx, true)) {\n                    return coreTable.count({\n                        trans: trans,\n                        query: {\n                            index: getIndexOrStore(ctx, coreTable.schema),\n                            range: ctx.range\n                        }\n                    }).then(function (count) { return Math.min(count, ctx.limit); });\n                }\n                else {\n                    var count = 0;\n                    return iter(ctx, function () { ++count; return false; }, trans, coreTable)\n                        .then(function () { return count; });\n                }\n            }).then(cb);\n        };\n        Collection.prototype.sortBy = function (keyPath, cb) {\n            var parts = keyPath.split('.').reverse(), lastPart = parts[0], lastIndex = parts.length - 1;\n            function getval(obj, i) {\n                if (i)\n                    return getval(obj[parts[i]], i - 1);\n                return obj[lastPart];\n            }\n            var order = this._ctx.dir === \"next\" ? 1 : -1;\n            function sorter(a, b) {\n                var aVal = getval(a, lastIndex), bVal = getval(b, lastIndex);\n                return cmp(aVal, bVal) * order;\n            }\n            return this.toArray(function (a) {\n                return a.sort(sorter);\n            }).then(cb);\n        };\n        Collection.prototype.toArray = function (cb) {\n            var _this = this;\n            return this._read(function (trans) {\n                var ctx = _this._ctx;\n                if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                    var valueMapper_1 = ctx.valueMapper;\n                    var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                    return ctx.table.core.query({\n                        trans: trans,\n                        limit: ctx.limit,\n                        values: true,\n                        query: {\n                            index: index,\n                            range: ctx.range\n                        }\n                    }).then(function (_a) {\n                        var result = _a.result;\n                        return valueMapper_1 ? result.map(valueMapper_1) : result;\n                    });\n                }\n                else {\n                    var a_1 = [];\n                    return iter(ctx, function (item) { return a_1.push(item); }, trans, ctx.table.core).then(function () { return a_1; });\n                }\n            }, cb);\n        };\n        Collection.prototype.offset = function (offset) {\n            var ctx = this._ctx;\n            if (offset <= 0)\n                return this;\n            ctx.offset += offset;\n            if (isPlainKeyRange(ctx)) {\n                addReplayFilter(ctx, function () {\n                    var offsetLeft = offset;\n                    return function (cursor, advance) {\n                        if (offsetLeft === 0)\n                            return true;\n                        if (offsetLeft === 1) {\n                            --offsetLeft;\n                            return false;\n                        }\n                        advance(function () {\n                            cursor.advance(offsetLeft);\n                            offsetLeft = 0;\n                        });\n                        return false;\n                    };\n                });\n            }\n            else {\n                addReplayFilter(ctx, function () {\n                    var offsetLeft = offset;\n                    return function () { return (--offsetLeft < 0); };\n                });\n            }\n            return this;\n        };\n        Collection.prototype.limit = function (numRows) {\n            this._ctx.limit = Math.min(this._ctx.limit, numRows);\n            addReplayFilter(this._ctx, function () {\n                var rowsLeft = numRows;\n                return function (cursor, advance, resolve) {\n                    if (--rowsLeft <= 0)\n                        advance(resolve);\n                    return rowsLeft >= 0;\n                };\n            }, true);\n            return this;\n        };\n        Collection.prototype.until = function (filterFunction, bIncludeStopEntry) {\n            addFilter(this._ctx, function (cursor, advance, resolve) {\n                if (filterFunction(cursor.value)) {\n                    advance(resolve);\n                    return bIncludeStopEntry;\n                }\n                else {\n                    return true;\n                }\n            });\n            return this;\n        };\n        Collection.prototype.first = function (cb) {\n            return this.limit(1).toArray(function (a) { return a[0]; }).then(cb);\n        };\n        Collection.prototype.last = function (cb) {\n            return this.reverse().first(cb);\n        };\n        Collection.prototype.filter = function (filterFunction) {\n            addFilter(this._ctx, function (cursor) {\n                return filterFunction(cursor.value);\n            });\n            addMatchFilter(this._ctx, filterFunction);\n            return this;\n        };\n        Collection.prototype.and = function (filter) {\n            return this.filter(filter);\n        };\n        Collection.prototype.or = function (indexName) {\n            return new this.db.WhereClause(this._ctx.table, indexName, this);\n        };\n        Collection.prototype.reverse = function () {\n            this._ctx.dir = (this._ctx.dir === \"prev\" ? \"next\" : \"prev\");\n            if (this._ondirectionchange)\n                this._ondirectionchange(this._ctx.dir);\n            return this;\n        };\n        Collection.prototype.desc = function () {\n            return this.reverse();\n        };\n        Collection.prototype.eachKey = function (cb) {\n            var ctx = this._ctx;\n            ctx.keysOnly = !ctx.isMatch;\n            return this.each(function (val, cursor) { cb(cursor.key, cursor); });\n        };\n        Collection.prototype.eachUniqueKey = function (cb) {\n            this._ctx.unique = \"unique\";\n            return this.eachKey(cb);\n        };\n        Collection.prototype.eachPrimaryKey = function (cb) {\n            var ctx = this._ctx;\n            ctx.keysOnly = !ctx.isMatch;\n            return this.each(function (val, cursor) { cb(cursor.primaryKey, cursor); });\n        };\n        Collection.prototype.keys = function (cb) {\n            var ctx = this._ctx;\n            ctx.keysOnly = !ctx.isMatch;\n            var a = [];\n            return this.each(function (item, cursor) {\n                a.push(cursor.key);\n            }).then(function () {\n                return a;\n            }).then(cb);\n        };\n        Collection.prototype.primaryKeys = function (cb) {\n            var ctx = this._ctx;\n            if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                return this._read(function (trans) {\n                    var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                    return ctx.table.core.query({\n                        trans: trans,\n                        values: false,\n                        limit: ctx.limit,\n                        query: {\n                            index: index,\n                            range: ctx.range\n                        }\n                    });\n                }).then(function (_a) {\n                    var result = _a.result;\n                    return result;\n                }).then(cb);\n            }\n            ctx.keysOnly = !ctx.isMatch;\n            var a = [];\n            return this.each(function (item, cursor) {\n                a.push(cursor.primaryKey);\n            }).then(function () {\n                return a;\n            }).then(cb);\n        };\n        Collection.prototype.uniqueKeys = function (cb) {\n            this._ctx.unique = \"unique\";\n            return this.keys(cb);\n        };\n        Collection.prototype.firstKey = function (cb) {\n            return this.limit(1).keys(function (a) { return a[0]; }).then(cb);\n        };\n        Collection.prototype.lastKey = function (cb) {\n            return this.reverse().firstKey(cb);\n        };\n        Collection.prototype.distinct = function () {\n            var ctx = this._ctx, idx = ctx.index && ctx.table.schema.idxByName[ctx.index];\n            if (!idx || !idx.multi)\n                return this;\n            var set = {};\n            addFilter(this._ctx, function (cursor) {\n                var strKey = cursor.primaryKey.toString();\n                var found = hasOwn(set, strKey);\n                set[strKey] = true;\n                return !found;\n            });\n            return this;\n        };\n        Collection.prototype.modify = function (changes) {\n            var _this = this;\n            var ctx = this._ctx;\n            return this._write(function (trans) {\n                var modifyer;\n                if (typeof changes === 'function') {\n                    modifyer = changes;\n                }\n                else {\n                    modifyer = function (item) { return applyUpdateSpec(item, changes); };\n                }\n                var coreTable = ctx.table.core;\n                var _a = coreTable.schema.primaryKey, outbound = _a.outbound, extractKey = _a.extractKey;\n                var limit = 200;\n                var modifyChunkSize = _this.db._options.modifyChunkSize;\n                if (modifyChunkSize) {\n                    if (typeof modifyChunkSize == 'object') {\n                        limit = modifyChunkSize[coreTable.name] || modifyChunkSize['*'] || 200;\n                    }\n                    else {\n                        limit = modifyChunkSize;\n                    }\n                }\n                var totalFailures = [];\n                var successCount = 0;\n                var failedKeys = [];\n                var applyMutateResult = function (expectedCount, res) {\n                    var failures = res.failures, numFailures = res.numFailures;\n                    successCount += expectedCount - numFailures;\n                    for (var _i = 0, _a = keys(failures); _i < _a.length; _i++) {\n                        var pos = _a[_i];\n                        totalFailures.push(failures[pos]);\n                    }\n                };\n                var isUnconditionalDelete = changes === deleteCallback;\n                return _this.clone().primaryKeys().then(function (keys) {\n                    var criteria = isPlainKeyRange(ctx) &&\n                        ctx.limit === Infinity &&\n                        (typeof changes !== 'function' || isUnconditionalDelete) && {\n                        index: ctx.index,\n                        range: ctx.range\n                    };\n                    var nextChunk = function (offset) {\n                        var count = Math.min(limit, keys.length - offset);\n                        var keysInChunk = keys.slice(offset, offset + count);\n                        return (isUnconditionalDelete ? Promise.resolve([]) : coreTable.getMany({\n                            trans: trans,\n                            keys: keysInChunk,\n                            cache: \"immutable\"\n                        })).then(function (values) {\n                            var addValues = [];\n                            var putValues = [];\n                            var putKeys = outbound ? [] : null;\n                            var deleteKeys = isUnconditionalDelete ? keysInChunk : [];\n                            if (!isUnconditionalDelete)\n                                for (var i = 0; i < count; ++i) {\n                                    var origValue = values[i];\n                                    var ctx_1 = {\n                                        value: deepClone(origValue),\n                                        primKey: keys[offset + i]\n                                    };\n                                    if (modifyer.call(ctx_1, ctx_1.value, ctx_1) !== false) {\n                                        if (ctx_1.value == null) {\n                                            deleteKeys.push(keys[offset + i]);\n                                        }\n                                        else if (!outbound && cmp(extractKey(origValue), extractKey(ctx_1.value)) !== 0) {\n                                            deleteKeys.push(keys[offset + i]);\n                                            addValues.push(ctx_1.value);\n                                        }\n                                        else {\n                                            putValues.push(ctx_1.value);\n                                            if (outbound)\n                                                putKeys.push(keys[offset + i]);\n                                        }\n                                    }\n                                }\n                            return Promise.resolve(addValues.length > 0 &&\n                                coreTable.mutate({ trans: trans, type: 'add', values: addValues })\n                                    .then(function (res) {\n                                    for (var pos in res.failures) {\n                                        deleteKeys.splice(parseInt(pos), 1);\n                                    }\n                                    applyMutateResult(addValues.length, res);\n                                })).then(function () { return (putValues.length > 0 || (criteria && typeof changes === 'object')) &&\n                                coreTable.mutate({\n                                    trans: trans,\n                                    type: 'put',\n                                    keys: putKeys,\n                                    values: putValues,\n                                    criteria: criteria,\n                                    changeSpec: typeof changes !== 'function'\n                                        && changes,\n                                    isAdditionalChunk: offset > 0\n                                }).then(function (res) { return applyMutateResult(putValues.length, res); }); }).then(function () { return (deleteKeys.length > 0 || (criteria && isUnconditionalDelete)) &&\n                                coreTable.mutate({\n                                    trans: trans,\n                                    type: 'delete',\n                                    keys: deleteKeys,\n                                    criteria: criteria,\n                                    isAdditionalChunk: offset > 0\n                                }).then(function (res) { return builtInDeletionTrigger(ctx.table, deleteKeys, res); })\n                                    .then(function (res) { return applyMutateResult(deleteKeys.length, res); }); }).then(function () {\n                                return keys.length > offset + count && nextChunk(offset + limit);\n                            });\n                        });\n                    };\n                    return nextChunk(0).then(function () {\n                        if (totalFailures.length > 0)\n                            throw new ModifyError(\"Error modifying one or more objects\", totalFailures, successCount, failedKeys);\n                        return keys.length;\n                    });\n                });\n            });\n        };\n        Collection.prototype.delete = function () {\n            var ctx = this._ctx, range = ctx.range;\n            if (isPlainKeyRange(ctx) &&\n                !ctx.table.schema.yProps &&\n                (ctx.isPrimKey || range.type === 3 ))\n             {\n                return this._write(function (trans) {\n                    var primaryKey = ctx.table.core.schema.primaryKey;\n                    var coreRange = range;\n                    return ctx.table.core.count({ trans: trans, query: { index: primaryKey, range: coreRange } }).then(function (count) {\n                        return ctx.table.core.mutate({ trans: trans, type: 'deleteRange', range: coreRange })\n                            .then(function (_a) {\n                            var failures = _a.failures, numFailures = _a.numFailures;\n                            if (numFailures)\n                                throw new ModifyError(\"Could not delete some values\", Object.keys(failures).map(function (pos) { return failures[pos]; }), count - numFailures);\n                            return count - numFailures;\n                        });\n                    });\n                });\n            }\n            return this.modify(deleteCallback);\n        };\n        return Collection;\n    }());\n    var deleteCallback = function (value, ctx) { return ctx.value = null; };\n\n    function createCollectionConstructor(db) {\n        return makeClassConstructor(Collection.prototype, function Collection(whereClause, keyRangeGenerator) {\n            this.db = db;\n            var keyRange = AnyRange, error = null;\n            if (keyRangeGenerator)\n                try {\n                    keyRange = keyRangeGenerator();\n                }\n                catch (ex) {\n                    error = ex;\n                }\n            var whereCtx = whereClause._ctx;\n            var table = whereCtx.table;\n            var readingHook = table.hook.reading.fire;\n            this._ctx = {\n                table: table,\n                index: whereCtx.index,\n                isPrimKey: (!whereCtx.index || (table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name)),\n                range: keyRange,\n                keysOnly: false,\n                dir: \"next\",\n                unique: \"\",\n                algorithm: null,\n                filter: null,\n                replayFilter: null,\n                justLimit: true,\n                isMatch: null,\n                offset: 0,\n                limit: Infinity,\n                error: error,\n                or: whereCtx.or,\n                valueMapper: readingHook !== mirror ? readingHook : null\n            };\n        });\n    }\n\n    function simpleCompare(a, b) {\n        return a < b ? -1 : a === b ? 0 : 1;\n    }\n    function simpleCompareReverse(a, b) {\n        return a > b ? -1 : a === b ? 0 : 1;\n    }\n\n    function fail(collectionOrWhereClause, err, T) {\n        var collection = collectionOrWhereClause instanceof WhereClause ?\n            new collectionOrWhereClause.Collection(collectionOrWhereClause) :\n            collectionOrWhereClause;\n        collection._ctx.error = T ? new T(err) : new TypeError(err);\n        return collection;\n    }\n    function emptyCollection(whereClause) {\n        return new whereClause.Collection(whereClause, function () { return rangeEqual(\"\"); }).limit(0);\n    }\n    function upperFactory(dir) {\n        return dir === \"next\" ?\n            function (s) { return s.toUpperCase(); } :\n            function (s) { return s.toLowerCase(); };\n    }\n    function lowerFactory(dir) {\n        return dir === \"next\" ?\n            function (s) { return s.toLowerCase(); } :\n            function (s) { return s.toUpperCase(); };\n    }\n    function nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {\n        var length = Math.min(key.length, lowerNeedle.length);\n        var llp = -1;\n        for (var i = 0; i < length; ++i) {\n            var lwrKeyChar = lowerKey[i];\n            if (lwrKeyChar !== lowerNeedle[i]) {\n                if (cmp(key[i], upperNeedle[i]) < 0)\n                    return key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);\n                if (cmp(key[i], lowerNeedle[i]) < 0)\n                    return key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);\n                if (llp >= 0)\n                    return key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);\n                return null;\n            }\n            if (cmp(key[i], lwrKeyChar) < 0)\n                llp = i;\n        }\n        if (length < lowerNeedle.length && dir === \"next\")\n            return key + upperNeedle.substr(key.length);\n        if (length < key.length && dir === \"prev\")\n            return key.substr(0, upperNeedle.length);\n        return (llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1));\n    }\n    function addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {\n        var upper, lower, compare, upperNeedles, lowerNeedles, direction, nextKeySuffix, needlesLen = needles.length;\n        if (!needles.every(function (s) { return typeof s === 'string'; })) {\n            return fail(whereClause, STRING_EXPECTED);\n        }\n        function initDirection(dir) {\n            upper = upperFactory(dir);\n            lower = lowerFactory(dir);\n            compare = (dir === \"next\" ? simpleCompare : simpleCompareReverse);\n            var needleBounds = needles.map(function (needle) {\n                return { lower: lower(needle), upper: upper(needle) };\n            }).sort(function (a, b) {\n                return compare(a.lower, b.lower);\n            });\n            upperNeedles = needleBounds.map(function (nb) { return nb.upper; });\n            lowerNeedles = needleBounds.map(function (nb) { return nb.lower; });\n            direction = dir;\n            nextKeySuffix = (dir === \"next\" ? \"\" : suffix);\n        }\n        initDirection(\"next\");\n        var c = new whereClause.Collection(whereClause, function () { return createRange(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix); });\n        c._ondirectionchange = function (direction) {\n            initDirection(direction);\n        };\n        var firstPossibleNeedle = 0;\n        c._addAlgorithm(function (cursor, advance, resolve) {\n            var key = cursor.key;\n            if (typeof key !== 'string')\n                return false;\n            var lowerKey = lower(key);\n            if (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {\n                return true;\n            }\n            else {\n                var lowestPossibleCasing = null;\n                for (var i = firstPossibleNeedle; i < needlesLen; ++i) {\n                    var casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);\n                    if (casing === null && lowestPossibleCasing === null)\n                        firstPossibleNeedle = i + 1;\n                    else if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {\n                        lowestPossibleCasing = casing;\n                    }\n                }\n                if (lowestPossibleCasing !== null) {\n                    advance(function () { cursor.continue(lowestPossibleCasing + nextKeySuffix); });\n                }\n                else {\n                    advance(resolve);\n                }\n                return false;\n            }\n        });\n        return c;\n    }\n    function createRange(lower, upper, lowerOpen, upperOpen) {\n        return {\n            type: 2 ,\n            lower: lower,\n            upper: upper,\n            lowerOpen: lowerOpen,\n            upperOpen: upperOpen\n        };\n    }\n    function rangeEqual(value) {\n        return {\n            type: 1 ,\n            lower: value,\n            upper: value\n        };\n    }\n\n    var WhereClause =  (function () {\n        function WhereClause() {\n        }\n        Object.defineProperty(WhereClause.prototype, \"Collection\", {\n            get: function () {\n                return this._ctx.table.db.Collection;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        WhereClause.prototype.between = function (lower, upper, includeLower, includeUpper) {\n            includeLower = includeLower !== false;\n            includeUpper = includeUpper === true;\n            try {\n                if ((this._cmp(lower, upper) > 0) ||\n                    (this._cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)))\n                    return emptyCollection(this);\n                return new this.Collection(this, function () { return createRange(lower, upper, !includeLower, !includeUpper); });\n            }\n            catch (e) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n        };\n        WhereClause.prototype.equals = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return rangeEqual(value); });\n        };\n        WhereClause.prototype.above = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(value, undefined, true); });\n        };\n        WhereClause.prototype.aboveOrEqual = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(value, undefined, false); });\n        };\n        WhereClause.prototype.below = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(undefined, value, false, true); });\n        };\n        WhereClause.prototype.belowOrEqual = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(undefined, value); });\n        };\n        WhereClause.prototype.startsWith = function (str) {\n            if (typeof str !== 'string')\n                return fail(this, STRING_EXPECTED);\n            return this.between(str, str + maxString, true, true);\n        };\n        WhereClause.prototype.startsWithIgnoreCase = function (str) {\n            if (str === \"\")\n                return this.startsWith(str);\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return x.indexOf(a[0]) === 0; }, [str], maxString);\n        };\n        WhereClause.prototype.equalsIgnoreCase = function (str) {\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return x === a[0]; }, [str], \"\");\n        };\n        WhereClause.prototype.anyOfIgnoreCase = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (set.length === 0)\n                return emptyCollection(this);\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.indexOf(x) !== -1; }, set, \"\");\n        };\n        WhereClause.prototype.startsWithAnyOfIgnoreCase = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (set.length === 0)\n                return emptyCollection(this);\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.some(function (n) { return x.indexOf(n) === 0; }); }, set, maxString);\n        };\n        WhereClause.prototype.anyOf = function () {\n            var _this = this;\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            var compare = this._cmp;\n            try {\n                set.sort(compare);\n            }\n            catch (e) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n            if (set.length === 0)\n                return emptyCollection(this);\n            var c = new this.Collection(this, function () { return createRange(set[0], set[set.length - 1]); });\n            c._ondirectionchange = function (direction) {\n                compare = (direction === \"next\" ?\n                    _this._ascending :\n                    _this._descending);\n                set.sort(compare);\n            };\n            var i = 0;\n            c._addAlgorithm(function (cursor, advance, resolve) {\n                var key = cursor.key;\n                while (compare(key, set[i]) > 0) {\n                    ++i;\n                    if (i === set.length) {\n                        advance(resolve);\n                        return false;\n                    }\n                }\n                if (compare(key, set[i]) === 0) {\n                    return true;\n                }\n                else {\n                    advance(function () { cursor.continue(set[i]); });\n                    return false;\n                }\n            });\n            return c;\n        };\n        WhereClause.prototype.notEqual = function (value) {\n            return this.inAnyRange([[minKey, value], [value, this.db._maxKey]], { includeLowers: false, includeUppers: false });\n        };\n        WhereClause.prototype.noneOf = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (set.length === 0)\n                return new this.Collection(this);\n            try {\n                set.sort(this._ascending);\n            }\n            catch (e) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n            var ranges = set.reduce(function (res, val) { return res ?\n                res.concat([[res[res.length - 1][1], val]]) :\n                [[minKey, val]]; }, null);\n            ranges.push([set[set.length - 1], this.db._maxKey]);\n            return this.inAnyRange(ranges, { includeLowers: false, includeUppers: false });\n        };\n        WhereClause.prototype.inAnyRange = function (ranges, options) {\n            var _this = this;\n            var cmp = this._cmp, ascending = this._ascending, descending = this._descending, min = this._min, max = this._max;\n            if (ranges.length === 0)\n                return emptyCollection(this);\n            if (!ranges.every(function (range) {\n                return range[0] !== undefined &&\n                    range[1] !== undefined &&\n                    ascending(range[0], range[1]) <= 0;\n            })) {\n                return fail(this, \"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\", exceptions.InvalidArgument);\n            }\n            var includeLowers = !options || options.includeLowers !== false;\n            var includeUppers = options && options.includeUppers === true;\n            function addRange(ranges, newRange) {\n                var i = 0, l = ranges.length;\n                for (; i < l; ++i) {\n                    var range = ranges[i];\n                    if (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {\n                        range[0] = min(range[0], newRange[0]);\n                        range[1] = max(range[1], newRange[1]);\n                        break;\n                    }\n                }\n                if (i === l)\n                    ranges.push(newRange);\n                return ranges;\n            }\n            var sortDirection = ascending;\n            function rangeSorter(a, b) { return sortDirection(a[0], b[0]); }\n            var set;\n            try {\n                set = ranges.reduce(addRange, []);\n                set.sort(rangeSorter);\n            }\n            catch (ex) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n            var rangePos = 0;\n            var keyIsBeyondCurrentEntry = includeUppers ?\n                function (key) { return ascending(key, set[rangePos][1]) > 0; } :\n                function (key) { return ascending(key, set[rangePos][1]) >= 0; };\n            var keyIsBeforeCurrentEntry = includeLowers ?\n                function (key) { return descending(key, set[rangePos][0]) > 0; } :\n                function (key) { return descending(key, set[rangePos][0]) >= 0; };\n            function keyWithinCurrentRange(key) {\n                return !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);\n            }\n            var checkKey = keyIsBeyondCurrentEntry;\n            var c = new this.Collection(this, function () { return createRange(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers); });\n            c._ondirectionchange = function (direction) {\n                if (direction === \"next\") {\n                    checkKey = keyIsBeyondCurrentEntry;\n                    sortDirection = ascending;\n                }\n                else {\n                    checkKey = keyIsBeforeCurrentEntry;\n                    sortDirection = descending;\n                }\n                set.sort(rangeSorter);\n            };\n            c._addAlgorithm(function (cursor, advance, resolve) {\n                var key = cursor.key;\n                while (checkKey(key)) {\n                    ++rangePos;\n                    if (rangePos === set.length) {\n                        advance(resolve);\n                        return false;\n                    }\n                }\n                if (keyWithinCurrentRange(key)) {\n                    return true;\n                }\n                else if (_this._cmp(key, set[rangePos][1]) === 0 || _this._cmp(key, set[rangePos][0]) === 0) {\n                    return false;\n                }\n                else {\n                    advance(function () {\n                        if (sortDirection === ascending)\n                            cursor.continue(set[rangePos][0]);\n                        else\n                            cursor.continue(set[rangePos][1]);\n                    });\n                    return false;\n                }\n            });\n            return c;\n        };\n        WhereClause.prototype.startsWithAnyOf = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (!set.every(function (s) { return typeof s === 'string'; })) {\n                return fail(this, \"startsWithAnyOf() only works with strings\");\n            }\n            if (set.length === 0)\n                return emptyCollection(this);\n            return this.inAnyRange(set.map(function (str) { return [str, str + maxString]; }));\n        };\n        return WhereClause;\n    }());\n\n    function createWhereClauseConstructor(db) {\n        return makeClassConstructor(WhereClause.prototype, function WhereClause(table, index, orCollection) {\n            this.db = db;\n            this._ctx = {\n                table: table,\n                index: index === \":id\" ? null : index,\n                or: orCollection\n            };\n            this._cmp = this._ascending = cmp;\n            this._descending = function (a, b) { return cmp(b, a); };\n            this._max = function (a, b) { return cmp(a, b) > 0 ? a : b; };\n            this._min = function (a, b) { return cmp(a, b) < 0 ? a : b; };\n            this._IDBKeyRange = db._deps.IDBKeyRange;\n            if (!this._IDBKeyRange)\n                throw new exceptions.MissingAPI();\n        });\n    }\n\n    function eventRejectHandler(reject) {\n        return wrap(function (event) {\n            preventDefault(event);\n            reject(event.target.error);\n            return false;\n        });\n    }\n    function preventDefault(event) {\n        if (event.stopPropagation)\n            event.stopPropagation();\n        if (event.preventDefault)\n            event.preventDefault();\n    }\n\n    var DEXIE_STORAGE_MUTATED_EVENT_NAME = 'storagemutated';\n    var STORAGE_MUTATED_DOM_EVENT_NAME = 'x-storagemutated-1';\n    var globalEvents = Events(null, DEXIE_STORAGE_MUTATED_EVENT_NAME);\n\n    var Transaction =  (function () {\n        function Transaction() {\n        }\n        Transaction.prototype._lock = function () {\n            assert(!PSD.global);\n            ++this._reculock;\n            if (this._reculock === 1 && !PSD.global)\n                PSD.lockOwnerFor = this;\n            return this;\n        };\n        Transaction.prototype._unlock = function () {\n            assert(!PSD.global);\n            if (--this._reculock === 0) {\n                if (!PSD.global)\n                    PSD.lockOwnerFor = null;\n                while (this._blockedFuncs.length > 0 && !this._locked()) {\n                    var fnAndPSD = this._blockedFuncs.shift();\n                    try {\n                        usePSD(fnAndPSD[1], fnAndPSD[0]);\n                    }\n                    catch (e) { }\n                }\n            }\n            return this;\n        };\n        Transaction.prototype._locked = function () {\n            return this._reculock && PSD.lockOwnerFor !== this;\n        };\n        Transaction.prototype.create = function (idbtrans) {\n            var _this = this;\n            if (!this.mode)\n                return this;\n            var idbdb = this.db.idbdb;\n            var dbOpenError = this.db._state.dbOpenError;\n            assert(!this.idbtrans);\n            if (!idbtrans && !idbdb) {\n                switch (dbOpenError && dbOpenError.name) {\n                    case \"DatabaseClosedError\":\n                        throw new exceptions.DatabaseClosed(dbOpenError);\n                    case \"MissingAPIError\":\n                        throw new exceptions.MissingAPI(dbOpenError.message, dbOpenError);\n                    default:\n                        throw new exceptions.OpenFailed(dbOpenError);\n                }\n            }\n            if (!this.active)\n                throw new exceptions.TransactionInactive();\n            assert(this._completion._state === null);\n            idbtrans = this.idbtrans = idbtrans ||\n                (this.db.core\n                    ? this.db.core.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })\n                    : idbdb.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability }));\n            idbtrans.onerror = wrap(function (ev) {\n                preventDefault(ev);\n                _this._reject(idbtrans.error);\n            });\n            idbtrans.onabort = wrap(function (ev) {\n                preventDefault(ev);\n                _this.active && _this._reject(new exceptions.Abort(idbtrans.error));\n                _this.active = false;\n                _this.on(\"abort\").fire(ev);\n            });\n            idbtrans.oncomplete = wrap(function () {\n                _this.active = false;\n                _this._resolve();\n                if ('mutatedParts' in idbtrans) {\n                    globalEvents.storagemutated.fire(idbtrans[\"mutatedParts\"]);\n                }\n            });\n            return this;\n        };\n        Transaction.prototype._promise = function (mode, fn, bWriteLock) {\n            var _this = this;\n            if (mode === 'readwrite' && this.mode !== 'readwrite')\n                return rejection(new exceptions.ReadOnly(\"Transaction is readonly\"));\n            if (!this.active)\n                return rejection(new exceptions.TransactionInactive());\n            if (this._locked()) {\n                return new DexiePromise(function (resolve, reject) {\n                    _this._blockedFuncs.push([function () {\n                            _this._promise(mode, fn, bWriteLock).then(resolve, reject);\n                        }, PSD]);\n                });\n            }\n            else if (bWriteLock) {\n                return newScope(function () {\n                    var p = new DexiePromise(function (resolve, reject) {\n                        _this._lock();\n                        var rv = fn(resolve, reject, _this);\n                        if (rv && rv.then)\n                            rv.then(resolve, reject);\n                    });\n                    p.finally(function () { return _this._unlock(); });\n                    p._lib = true;\n                    return p;\n                });\n            }\n            else {\n                var p = new DexiePromise(function (resolve, reject) {\n                    var rv = fn(resolve, reject, _this);\n                    if (rv && rv.then)\n                        rv.then(resolve, reject);\n                });\n                p._lib = true;\n                return p;\n            }\n        };\n        Transaction.prototype._root = function () {\n            return this.parent ? this.parent._root() : this;\n        };\n        Transaction.prototype.waitFor = function (promiseLike) {\n            var root = this._root();\n            var promise = DexiePromise.resolve(promiseLike);\n            if (root._waitingFor) {\n                root._waitingFor = root._waitingFor.then(function () { return promise; });\n            }\n            else {\n                root._waitingFor = promise;\n                root._waitingQueue = [];\n                var store = root.idbtrans.objectStore(root.storeNames[0]);\n                (function spin() {\n                    ++root._spinCount;\n                    while (root._waitingQueue.length)\n                        (root._waitingQueue.shift())();\n                    if (root._waitingFor)\n                        store.get(-Infinity).onsuccess = spin;\n                }());\n            }\n            var currentWaitPromise = root._waitingFor;\n            return new DexiePromise(function (resolve, reject) {\n                promise.then(function (res) { return root._waitingQueue.push(wrap(resolve.bind(null, res))); }, function (err) { return root._waitingQueue.push(wrap(reject.bind(null, err))); }).finally(function () {\n                    if (root._waitingFor === currentWaitPromise) {\n                        root._waitingFor = null;\n                    }\n                });\n            });\n        };\n        Transaction.prototype.abort = function () {\n            if (this.active) {\n                this.active = false;\n                if (this.idbtrans)\n                    this.idbtrans.abort();\n                this._reject(new exceptions.Abort());\n            }\n        };\n        Transaction.prototype.table = function (tableName) {\n            var memoizedTables = (this._memoizedTables || (this._memoizedTables = {}));\n            if (hasOwn(memoizedTables, tableName))\n                return memoizedTables[tableName];\n            var tableSchema = this.schema[tableName];\n            if (!tableSchema) {\n                throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n            }\n            var transactionBoundTable = new this.db.Table(tableName, tableSchema, this);\n            transactionBoundTable.core = this.db.core.table(tableName);\n            memoizedTables[tableName] = transactionBoundTable;\n            return transactionBoundTable;\n        };\n        return Transaction;\n    }());\n\n    function createTransactionConstructor(db) {\n        return makeClassConstructor(Transaction.prototype, function Transaction(mode, storeNames, dbschema, chromeTransactionDurability, parent) {\n            var _this = this;\n            if (mode !== 'readonly')\n                storeNames.forEach(function (storeName) {\n                    var _a;\n                    var yProps = (_a = dbschema[storeName]) === null || _a === void 0 ? void 0 : _a.yProps;\n                    if (yProps)\n                        storeNames = storeNames.concat(yProps.map(function (p) { return p.updatesTable; }));\n                });\n            this.db = db;\n            this.mode = mode;\n            this.storeNames = storeNames;\n            this.schema = dbschema;\n            this.chromeTransactionDurability = chromeTransactionDurability;\n            this.idbtrans = null;\n            this.on = Events(this, \"complete\", \"error\", \"abort\");\n            this.parent = parent || null;\n            this.active = true;\n            this._reculock = 0;\n            this._blockedFuncs = [];\n            this._resolve = null;\n            this._reject = null;\n            this._waitingFor = null;\n            this._waitingQueue = null;\n            this._spinCount = 0;\n            this._completion = new DexiePromise(function (resolve, reject) {\n                _this._resolve = resolve;\n                _this._reject = reject;\n            });\n            this._completion.then(function () {\n                _this.active = false;\n                _this.on.complete.fire();\n            }, function (e) {\n                var wasActive = _this.active;\n                _this.active = false;\n                _this.on.error.fire(e);\n                _this.parent ?\n                    _this.parent._reject(e) :\n                    wasActive && _this.idbtrans && _this.idbtrans.abort();\n                return rejection(e);\n            });\n        });\n    }\n\n    function createIndexSpec(name, keyPath, unique, multi, auto, compound, isPrimKey, type) {\n        return {\n            name: name,\n            keyPath: keyPath,\n            unique: unique,\n            multi: multi,\n            auto: auto,\n            compound: compound,\n            src: (unique && !isPrimKey ? '&' : '') + (multi ? '*' : '') + (auto ? \"++\" : \"\") + nameFromKeyPath(keyPath),\n            type: type\n        };\n    }\n    function nameFromKeyPath(keyPath) {\n        return typeof keyPath === 'string' ?\n            keyPath :\n            keyPath ? ('[' + [].join.call(keyPath, '+') + ']') : \"\";\n    }\n\n    function createTableSchema(name, primKey, indexes) {\n        return {\n            name: name,\n            primKey: primKey,\n            indexes: indexes,\n            mappedClass: null,\n            idxByName: arrayToObject(indexes, function (index) { return [index.name, index]; }),\n        };\n    }\n\n    function safariMultiStoreFix(storeNames) {\n        return storeNames.length === 1 ? storeNames[0] : storeNames;\n    }\n    var getMaxKey = function (IdbKeyRange) {\n        try {\n            IdbKeyRange.only([[]]);\n            getMaxKey = function () { return [[]]; };\n            return [[]];\n        }\n        catch (e) {\n            getMaxKey = function () { return maxString; };\n            return maxString;\n        }\n    };\n\n    function getKeyExtractor(keyPath) {\n        if (keyPath == null) {\n            return function () { return undefined; };\n        }\n        else if (typeof keyPath === 'string') {\n            return getSinglePathKeyExtractor(keyPath);\n        }\n        else {\n            return function (obj) { return getByKeyPath(obj, keyPath); };\n        }\n    }\n    function getSinglePathKeyExtractor(keyPath) {\n        var split = keyPath.split('.');\n        if (split.length === 1) {\n            return function (obj) { return obj[keyPath]; };\n        }\n        else {\n            return function (obj) { return getByKeyPath(obj, keyPath); };\n        }\n    }\n\n    function arrayify(arrayLike) {\n        return [].slice.call(arrayLike);\n    }\n    var _id_counter = 0;\n    function getKeyPathAlias(keyPath) {\n        return keyPath == null ?\n            \":id\" :\n            typeof keyPath === 'string' ?\n                keyPath :\n                \"[\".concat(keyPath.join('+'), \"]\");\n    }\n    function createDBCore(db, IdbKeyRange, tmpTrans) {\n        function extractSchema(db, trans) {\n            var tables = arrayify(db.objectStoreNames);\n            return {\n                schema: {\n                    name: db.name,\n                    tables: tables.map(function (table) { return trans.objectStore(table); }).map(function (store) {\n                        var keyPath = store.keyPath, autoIncrement = store.autoIncrement;\n                        var compound = isArray(keyPath);\n                        var outbound = keyPath == null;\n                        var indexByKeyPath = {};\n                        var result = {\n                            name: store.name,\n                            primaryKey: {\n                                name: null,\n                                isPrimaryKey: true,\n                                outbound: outbound,\n                                compound: compound,\n                                keyPath: keyPath,\n                                autoIncrement: autoIncrement,\n                                unique: true,\n                                extractKey: getKeyExtractor(keyPath)\n                            },\n                            indexes: arrayify(store.indexNames).map(function (indexName) { return store.index(indexName); })\n                                .map(function (index) {\n                                var name = index.name, unique = index.unique, multiEntry = index.multiEntry, keyPath = index.keyPath;\n                                var compound = isArray(keyPath);\n                                var result = {\n                                    name: name,\n                                    compound: compound,\n                                    keyPath: keyPath,\n                                    unique: unique,\n                                    multiEntry: multiEntry,\n                                    extractKey: getKeyExtractor(keyPath)\n                                };\n                                indexByKeyPath[getKeyPathAlias(keyPath)] = result;\n                                return result;\n                            }),\n                            getIndexByKeyPath: function (keyPath) { return indexByKeyPath[getKeyPathAlias(keyPath)]; }\n                        };\n                        indexByKeyPath[\":id\"] = result.primaryKey;\n                        if (keyPath != null) {\n                            indexByKeyPath[getKeyPathAlias(keyPath)] = result.primaryKey;\n                        }\n                        return result;\n                    })\n                },\n                hasGetAll: tables.length > 0 && ('getAll' in trans.objectStore(tables[0])) &&\n                    !(typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n                        !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n                        [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604)\n            };\n        }\n        function makeIDBKeyRange(range) {\n            if (range.type === 3 )\n                return null;\n            if (range.type === 4 )\n                throw new Error(\"Cannot convert never type to IDBKeyRange\");\n            var lower = range.lower, upper = range.upper, lowerOpen = range.lowerOpen, upperOpen = range.upperOpen;\n            var idbRange = lower === undefined ?\n                upper === undefined ?\n                    null :\n                    IdbKeyRange.upperBound(upper, !!upperOpen) :\n                upper === undefined ?\n                    IdbKeyRange.lowerBound(lower, !!lowerOpen) :\n                    IdbKeyRange.bound(lower, upper, !!lowerOpen, !!upperOpen);\n            return idbRange;\n        }\n        function createDbCoreTable(tableSchema) {\n            var tableName = tableSchema.name;\n            function mutate(_a) {\n                var trans = _a.trans, type = _a.type, keys = _a.keys, values = _a.values, range = _a.range;\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var store = trans.objectStore(tableName);\n                    var outbound = store.keyPath == null;\n                    var isAddOrPut = type === \"put\" || type === \"add\";\n                    if (!isAddOrPut && type !== 'delete' && type !== 'deleteRange')\n                        throw new Error(\"Invalid operation type: \" + type);\n                    var length = (keys || values || { length: 1 }).length;\n                    if (keys && values && keys.length !== values.length) {\n                        throw new Error(\"Given keys array must have same length as given values array.\");\n                    }\n                    if (length === 0)\n                        return resolve({ numFailures: 0, failures: {}, results: [], lastResult: undefined });\n                    var req;\n                    var reqs = [];\n                    var failures = [];\n                    var numFailures = 0;\n                    var errorHandler = function (event) {\n                        ++numFailures;\n                        preventDefault(event);\n                    };\n                    if (type === 'deleteRange') {\n                        if (range.type === 4 )\n                            return resolve({ numFailures: numFailures, failures: failures, results: [], lastResult: undefined });\n                        if (range.type === 3 )\n                            reqs.push(req = store.clear());\n                        else\n                            reqs.push(req = store.delete(makeIDBKeyRange(range)));\n                    }\n                    else {\n                        var _a = isAddOrPut ?\n                            outbound ?\n                                [values, keys] :\n                                [values, null] :\n                            [keys, null], args1 = _a[0], args2 = _a[1];\n                        if (isAddOrPut) {\n                            for (var i = 0; i < length; ++i) {\n                                reqs.push(req = (args2 && args2[i] !== undefined ?\n                                    store[type](args1[i], args2[i]) :\n                                    store[type](args1[i])));\n                                req.onerror = errorHandler;\n                            }\n                        }\n                        else {\n                            for (var i = 0; i < length; ++i) {\n                                reqs.push(req = store[type](args1[i]));\n                                req.onerror = errorHandler;\n                            }\n                        }\n                    }\n                    var done = function (event) {\n                        var lastResult = event.target.result;\n                        reqs.forEach(function (req, i) { return req.error != null && (failures[i] = req.error); });\n                        resolve({\n                            numFailures: numFailures,\n                            failures: failures,\n                            results: type === \"delete\" ? keys : reqs.map(function (req) { return req.result; }),\n                            lastResult: lastResult\n                        });\n                    };\n                    req.onerror = function (event) {\n                        errorHandler(event);\n                        done(event);\n                    };\n                    req.onsuccess = done;\n                });\n            }\n            function openCursor(_a) {\n                var trans = _a.trans, values = _a.values, query = _a.query, reverse = _a.reverse, unique = _a.unique;\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var index = query.index, range = query.range;\n                    var store = trans.objectStore(tableName);\n                    var source = index.isPrimaryKey ?\n                        store :\n                        store.index(index.name);\n                    var direction = reverse ?\n                        unique ?\n                            \"prevunique\" :\n                            \"prev\" :\n                        unique ?\n                            \"nextunique\" :\n                            \"next\";\n                    var req = values || !('openKeyCursor' in source) ?\n                        source.openCursor(makeIDBKeyRange(range), direction) :\n                        source.openKeyCursor(makeIDBKeyRange(range), direction);\n                    req.onerror = eventRejectHandler(reject);\n                    req.onsuccess = wrap(function (ev) {\n                        var cursor = req.result;\n                        if (!cursor) {\n                            resolve(null);\n                            return;\n                        }\n                        cursor.___id = ++_id_counter;\n                        cursor.done = false;\n                        var _cursorContinue = cursor.continue.bind(cursor);\n                        var _cursorContinuePrimaryKey = cursor.continuePrimaryKey;\n                        if (_cursorContinuePrimaryKey)\n                            _cursorContinuePrimaryKey = _cursorContinuePrimaryKey.bind(cursor);\n                        var _cursorAdvance = cursor.advance.bind(cursor);\n                        var doThrowCursorIsNotStarted = function () { throw new Error(\"Cursor not started\"); };\n                        var doThrowCursorIsStopped = function () { throw new Error(\"Cursor not stopped\"); };\n                        cursor.trans = trans;\n                        cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsNotStarted;\n                        cursor.fail = wrap(reject);\n                        cursor.next = function () {\n                            var _this = this;\n                            var gotOne = 1;\n                            return this.start(function () { return gotOne-- ? _this.continue() : _this.stop(); }).then(function () { return _this; });\n                        };\n                        cursor.start = function (callback) {\n                            var iterationPromise = new Promise(function (resolveIteration, rejectIteration) {\n                                resolveIteration = wrap(resolveIteration);\n                                req.onerror = eventRejectHandler(rejectIteration);\n                                cursor.fail = rejectIteration;\n                                cursor.stop = function (value) {\n                                    cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsStopped;\n                                    resolveIteration(value);\n                                };\n                            });\n                            var guardedCallback = function () {\n                                if (req.result) {\n                                    try {\n                                        callback();\n                                    }\n                                    catch (err) {\n                                        cursor.fail(err);\n                                    }\n                                }\n                                else {\n                                    cursor.done = true;\n                                    cursor.start = function () { throw new Error(\"Cursor behind last entry\"); };\n                                    cursor.stop();\n                                }\n                            };\n                            req.onsuccess = wrap(function (ev) {\n                                req.onsuccess = guardedCallback;\n                                guardedCallback();\n                            });\n                            cursor.continue = _cursorContinue;\n                            cursor.continuePrimaryKey = _cursorContinuePrimaryKey;\n                            cursor.advance = _cursorAdvance;\n                            guardedCallback();\n                            return iterationPromise;\n                        };\n                        resolve(cursor);\n                    }, reject);\n                });\n            }\n            function query(hasGetAll) {\n                return function (request) {\n                    return new Promise(function (resolve, reject) {\n                        resolve = wrap(resolve);\n                        var trans = request.trans, values = request.values, limit = request.limit, query = request.query;\n                        var nonInfinitLimit = limit === Infinity ? undefined : limit;\n                        var index = query.index, range = query.range;\n                        var store = trans.objectStore(tableName);\n                        var source = index.isPrimaryKey ? store : store.index(index.name);\n                        var idbKeyRange = makeIDBKeyRange(range);\n                        if (limit === 0)\n                            return resolve({ result: [] });\n                        if (hasGetAll) {\n                            var req = values ?\n                                source.getAll(idbKeyRange, nonInfinitLimit) :\n                                source.getAllKeys(idbKeyRange, nonInfinitLimit);\n                            req.onsuccess = function (event) { return resolve({ result: event.target.result }); };\n                            req.onerror = eventRejectHandler(reject);\n                        }\n                        else {\n                            var count_1 = 0;\n                            var req_1 = values || !('openKeyCursor' in source) ?\n                                source.openCursor(idbKeyRange) :\n                                source.openKeyCursor(idbKeyRange);\n                            var result_1 = [];\n                            req_1.onsuccess = function (event) {\n                                var cursor = req_1.result;\n                                if (!cursor)\n                                    return resolve({ result: result_1 });\n                                result_1.push(values ? cursor.value : cursor.primaryKey);\n                                if (++count_1 === limit)\n                                    return resolve({ result: result_1 });\n                                cursor.continue();\n                            };\n                            req_1.onerror = eventRejectHandler(reject);\n                        }\n                    });\n                };\n            }\n            return {\n                name: tableName,\n                schema: tableSchema,\n                mutate: mutate,\n                getMany: function (_a) {\n                    var trans = _a.trans, keys = _a.keys;\n                    return new Promise(function (resolve, reject) {\n                        resolve = wrap(resolve);\n                        var store = trans.objectStore(tableName);\n                        var length = keys.length;\n                        var result = new Array(length);\n                        var keyCount = 0;\n                        var callbackCount = 0;\n                        var req;\n                        var successHandler = function (event) {\n                            var req = event.target;\n                            if ((result[req._pos] = req.result) != null)\n                                ;\n                            if (++callbackCount === keyCount)\n                                resolve(result);\n                        };\n                        var errorHandler = eventRejectHandler(reject);\n                        for (var i = 0; i < length; ++i) {\n                            var key = keys[i];\n                            if (key != null) {\n                                req = store.get(keys[i]);\n                                req._pos = i;\n                                req.onsuccess = successHandler;\n                                req.onerror = errorHandler;\n                                ++keyCount;\n                            }\n                        }\n                        if (keyCount === 0)\n                            resolve(result);\n                    });\n                },\n                get: function (_a) {\n                    var trans = _a.trans, key = _a.key;\n                    return new Promise(function (resolve, reject) {\n                        resolve = wrap(resolve);\n                        var store = trans.objectStore(tableName);\n                        var req = store.get(key);\n                        req.onsuccess = function (event) { return resolve(event.target.result); };\n                        req.onerror = eventRejectHandler(reject);\n                    });\n                },\n                query: query(hasGetAll),\n                openCursor: openCursor,\n                count: function (_a) {\n                    var query = _a.query, trans = _a.trans;\n                    var index = query.index, range = query.range;\n                    return new Promise(function (resolve, reject) {\n                        var store = trans.objectStore(tableName);\n                        var source = index.isPrimaryKey ? store : store.index(index.name);\n                        var idbKeyRange = makeIDBKeyRange(range);\n                        var req = idbKeyRange ? source.count(idbKeyRange) : source.count();\n                        req.onsuccess = wrap(function (ev) { return resolve(ev.target.result); });\n                        req.onerror = eventRejectHandler(reject);\n                    });\n                }\n            };\n        }\n        var _a = extractSchema(db, tmpTrans), schema = _a.schema, hasGetAll = _a.hasGetAll;\n        var tables = schema.tables.map(function (tableSchema) { return createDbCoreTable(tableSchema); });\n        var tableMap = {};\n        tables.forEach(function (table) { return tableMap[table.name] = table; });\n        return {\n            stack: \"dbcore\",\n            transaction: db.transaction.bind(db),\n            table: function (name) {\n                var result = tableMap[name];\n                if (!result)\n                    throw new Error(\"Table '\".concat(name, \"' not found\"));\n                return tableMap[name];\n            },\n            MIN_KEY: -Infinity,\n            MAX_KEY: getMaxKey(IdbKeyRange),\n            schema: schema\n        };\n    }\n\n    function createMiddlewareStack(stackImpl, middlewares) {\n        return middlewares.reduce(function (down, _a) {\n            var create = _a.create;\n            return (__assign(__assign({}, down), create(down)));\n        }, stackImpl);\n    }\n    function createMiddlewareStacks(middlewares, idbdb, _a, tmpTrans) {\n        var IDBKeyRange = _a.IDBKeyRange; _a.indexedDB;\n        var dbcore = createMiddlewareStack(createDBCore(idbdb, IDBKeyRange, tmpTrans), middlewares.dbcore);\n        return {\n            dbcore: dbcore\n        };\n    }\n    function generateMiddlewareStacks(db, tmpTrans) {\n        var idbdb = tmpTrans.db;\n        var stacks = createMiddlewareStacks(db._middlewares, idbdb, db._deps, tmpTrans);\n        db.core = stacks.dbcore;\n        db.tables.forEach(function (table) {\n            var tableName = table.name;\n            if (db.core.schema.tables.some(function (tbl) { return tbl.name === tableName; })) {\n                table.core = db.core.table(tableName);\n                if (db[tableName] instanceof db.Table) {\n                    db[tableName].core = table.core;\n                }\n            }\n        });\n    }\n\n    function setApiOnPlace(db, objs, tableNames, dbschema) {\n        tableNames.forEach(function (tableName) {\n            var schema = dbschema[tableName];\n            objs.forEach(function (obj) {\n                var propDesc = getPropertyDescriptor(obj, tableName);\n                if (!propDesc || (\"value\" in propDesc && propDesc.value === undefined)) {\n                    if (obj === db.Transaction.prototype || obj instanceof db.Transaction) {\n                        setProp(obj, tableName, {\n                            get: function () { return this.table(tableName); },\n                            set: function (value) {\n                                defineProperty(this, tableName, { value: value, writable: true, configurable: true, enumerable: true });\n                            }\n                        });\n                    }\n                    else {\n                        obj[tableName] = new db.Table(tableName, schema);\n                    }\n                }\n            });\n        });\n    }\n    function removeTablesApi(db, objs) {\n        objs.forEach(function (obj) {\n            for (var key in obj) {\n                if (obj[key] instanceof db.Table)\n                    delete obj[key];\n            }\n        });\n    }\n    function lowerVersionFirst(a, b) {\n        return a._cfg.version - b._cfg.version;\n    }\n    function runUpgraders(db, oldVersion, idbUpgradeTrans, reject) {\n        var globalSchema = db._dbSchema;\n        if (idbUpgradeTrans.objectStoreNames.contains('$meta') && !globalSchema.$meta) {\n            globalSchema.$meta = createTableSchema(\"$meta\", parseIndexSyntax(\"\")[0], []);\n            db._storeNames.push('$meta');\n        }\n        var trans = db._createTransaction('readwrite', db._storeNames, globalSchema);\n        trans.create(idbUpgradeTrans);\n        trans._completion.catch(reject);\n        var rejectTransaction = trans._reject.bind(trans);\n        var transless = PSD.transless || PSD;\n        newScope(function () {\n            PSD.trans = trans;\n            PSD.transless = transless;\n            if (oldVersion === 0) {\n                keys(globalSchema).forEach(function (tableName) {\n                    createTable(idbUpgradeTrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);\n                });\n                generateMiddlewareStacks(db, idbUpgradeTrans);\n                DexiePromise.follow(function () { return db.on.populate.fire(trans); }).catch(rejectTransaction);\n            }\n            else {\n                generateMiddlewareStacks(db, idbUpgradeTrans);\n                return getExistingVersion(db, trans, oldVersion)\n                    .then(function (oldVersion) { return updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans); })\n                    .catch(rejectTransaction);\n            }\n        });\n    }\n    function patchCurrentVersion(db, idbUpgradeTrans) {\n        createMissingTables(db._dbSchema, idbUpgradeTrans);\n        if (idbUpgradeTrans.db.version % 10 === 0 && !idbUpgradeTrans.objectStoreNames.contains('$meta')) {\n            idbUpgradeTrans.db.createObjectStore('$meta').add(Math.ceil((idbUpgradeTrans.db.version / 10) - 1), 'version');\n        }\n        var globalSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);\n        adjustToExistingIndexNames(db, db._dbSchema, idbUpgradeTrans);\n        var diff = getSchemaDiff(globalSchema, db._dbSchema);\n        var _loop_1 = function (tableChange) {\n            if (tableChange.change.length || tableChange.recreate) {\n                console.warn(\"Unable to patch indexes of table \".concat(tableChange.name, \" because it has changes on the type of index or primary key.\"));\n                return { value: void 0 };\n            }\n            var store = idbUpgradeTrans.objectStore(tableChange.name);\n            tableChange.add.forEach(function (idx) {\n                if (debug)\n                    console.debug(\"Dexie upgrade patch: Creating missing index \".concat(tableChange.name, \".\").concat(idx.src));\n                addIndex(store, idx);\n            });\n        };\n        for (var _i = 0, _a = diff.change; _i < _a.length; _i++) {\n            var tableChange = _a[_i];\n            var state_1 = _loop_1(tableChange);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n    }\n    function getExistingVersion(db, trans, oldVersion) {\n        if (trans.storeNames.includes('$meta')) {\n            return trans.table('$meta').get('version').then(function (metaVersion) {\n                return metaVersion != null ? metaVersion : oldVersion;\n            });\n        }\n        else {\n            return DexiePromise.resolve(oldVersion);\n        }\n    }\n    function updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans) {\n        var queue = [];\n        var versions = db._versions;\n        var globalSchema = db._dbSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);\n        var versToRun = versions.filter(function (v) { return v._cfg.version >= oldVersion; });\n        if (versToRun.length === 0) {\n            return DexiePromise.resolve();\n        }\n        versToRun.forEach(function (version) {\n            queue.push(function () {\n                var oldSchema = globalSchema;\n                var newSchema = version._cfg.dbschema;\n                adjustToExistingIndexNames(db, oldSchema, idbUpgradeTrans);\n                adjustToExistingIndexNames(db, newSchema, idbUpgradeTrans);\n                globalSchema = db._dbSchema = newSchema;\n                var diff = getSchemaDiff(oldSchema, newSchema);\n                diff.add.forEach(function (tuple) {\n                    createTable(idbUpgradeTrans, tuple[0], tuple[1].primKey, tuple[1].indexes);\n                });\n                diff.change.forEach(function (change) {\n                    if (change.recreate) {\n                        throw new exceptions.Upgrade(\"Not yet support for changing primary key\");\n                    }\n                    else {\n                        var store_1 = idbUpgradeTrans.objectStore(change.name);\n                        change.add.forEach(function (idx) { return addIndex(store_1, idx); });\n                        change.change.forEach(function (idx) {\n                            store_1.deleteIndex(idx.name);\n                            addIndex(store_1, idx);\n                        });\n                        change.del.forEach(function (idxName) { return store_1.deleteIndex(idxName); });\n                    }\n                });\n                var contentUpgrade = version._cfg.contentUpgrade;\n                if (contentUpgrade && version._cfg.version > oldVersion) {\n                    generateMiddlewareStacks(db, idbUpgradeTrans);\n                    trans._memoizedTables = {};\n                    var upgradeSchema_1 = shallowClone(newSchema);\n                    diff.del.forEach(function (table) {\n                        upgradeSchema_1[table] = oldSchema[table];\n                    });\n                    removeTablesApi(db, [db.Transaction.prototype]);\n                    setApiOnPlace(db, [db.Transaction.prototype], keys(upgradeSchema_1), upgradeSchema_1);\n                    trans.schema = upgradeSchema_1;\n                    var contentUpgradeIsAsync_1 = isAsyncFunction(contentUpgrade);\n                    if (contentUpgradeIsAsync_1) {\n                        incrementExpectedAwaits();\n                    }\n                    var returnValue_1;\n                    var promiseFollowed = DexiePromise.follow(function () {\n                        returnValue_1 = contentUpgrade(trans);\n                        if (returnValue_1) {\n                            if (contentUpgradeIsAsync_1) {\n                                var decrementor = decrementExpectedAwaits.bind(null, null);\n                                returnValue_1.then(decrementor, decrementor);\n                            }\n                        }\n                    });\n                    return (returnValue_1 && typeof returnValue_1.then === 'function' ?\n                        DexiePromise.resolve(returnValue_1) : promiseFollowed.then(function () { return returnValue_1; }));\n                }\n            });\n            queue.push(function (idbtrans) {\n                var newSchema = version._cfg.dbschema;\n                deleteRemovedTables(newSchema, idbtrans);\n                removeTablesApi(db, [db.Transaction.prototype]);\n                setApiOnPlace(db, [db.Transaction.prototype], db._storeNames, db._dbSchema);\n                trans.schema = db._dbSchema;\n            });\n            queue.push(function (idbtrans) {\n                if (db.idbdb.objectStoreNames.contains('$meta')) {\n                    if (Math.ceil(db.idbdb.version / 10) === version._cfg.version) {\n                        db.idbdb.deleteObjectStore('$meta');\n                        delete db._dbSchema.$meta;\n                        db._storeNames = db._storeNames.filter(function (name) { return name !== '$meta'; });\n                    }\n                    else {\n                        idbtrans.objectStore('$meta').put(version._cfg.version, 'version');\n                    }\n                }\n            });\n        });\n        function runQueue() {\n            return queue.length ? DexiePromise.resolve(queue.shift()(trans.idbtrans)).then(runQueue) :\n                DexiePromise.resolve();\n        }\n        return runQueue().then(function () {\n            createMissingTables(globalSchema, idbUpgradeTrans);\n        });\n    }\n    function getSchemaDiff(oldSchema, newSchema) {\n        var diff = {\n            del: [],\n            add: [],\n            change: []\n        };\n        var table;\n        for (table in oldSchema) {\n            if (!newSchema[table])\n                diff.del.push(table);\n        }\n        for (table in newSchema) {\n            var oldDef = oldSchema[table], newDef = newSchema[table];\n            if (!oldDef) {\n                diff.add.push([table, newDef]);\n            }\n            else {\n                var change = {\n                    name: table,\n                    def: newDef,\n                    recreate: false,\n                    del: [],\n                    add: [],\n                    change: []\n                };\n                if ((\n                '' + (oldDef.primKey.keyPath || '')) !== ('' + (newDef.primKey.keyPath || '')) ||\n                    (oldDef.primKey.auto !== newDef.primKey.auto)) {\n                    change.recreate = true;\n                    diff.change.push(change);\n                }\n                else {\n                    var oldIndexes = oldDef.idxByName;\n                    var newIndexes = newDef.idxByName;\n                    var idxName = void 0;\n                    for (idxName in oldIndexes) {\n                        if (!newIndexes[idxName])\n                            change.del.push(idxName);\n                    }\n                    for (idxName in newIndexes) {\n                        var oldIdx = oldIndexes[idxName], newIdx = newIndexes[idxName];\n                        if (!oldIdx)\n                            change.add.push(newIdx);\n                        else if (oldIdx.src !== newIdx.src)\n                            change.change.push(newIdx);\n                    }\n                    if (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {\n                        diff.change.push(change);\n                    }\n                }\n            }\n        }\n        return diff;\n    }\n    function createTable(idbtrans, tableName, primKey, indexes) {\n        var store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ?\n            { keyPath: primKey.keyPath, autoIncrement: primKey.auto } :\n            { autoIncrement: primKey.auto });\n        indexes.forEach(function (idx) { return addIndex(store, idx); });\n        return store;\n    }\n    function createMissingTables(newSchema, idbtrans) {\n        keys(newSchema).forEach(function (tableName) {\n            if (!idbtrans.db.objectStoreNames.contains(tableName)) {\n                if (debug)\n                    console.debug('Dexie: Creating missing table', tableName);\n                createTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);\n            }\n        });\n    }\n    function deleteRemovedTables(newSchema, idbtrans) {\n        [].slice.call(idbtrans.db.objectStoreNames).forEach(function (storeName) {\n            return newSchema[storeName] == null && idbtrans.db.deleteObjectStore(storeName);\n        });\n    }\n    function addIndex(store, idx) {\n        store.createIndex(idx.name, idx.keyPath, { unique: idx.unique, multiEntry: idx.multi });\n    }\n    function buildGlobalSchema(db, idbdb, tmpTrans) {\n        var globalSchema = {};\n        var dbStoreNames = slice(idbdb.objectStoreNames, 0);\n        dbStoreNames.forEach(function (storeName) {\n            var store = tmpTrans.objectStore(storeName);\n            var keyPath = store.keyPath;\n            var primKey = createIndexSpec(nameFromKeyPath(keyPath), keyPath || \"\", true, false, !!store.autoIncrement, keyPath && typeof keyPath !== \"string\", true);\n            var indexes = [];\n            for (var j = 0; j < store.indexNames.length; ++j) {\n                var idbindex = store.index(store.indexNames[j]);\n                keyPath = idbindex.keyPath;\n                var index = createIndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== \"string\", false);\n                indexes.push(index);\n            }\n            globalSchema[storeName] = createTableSchema(storeName, primKey, indexes);\n        });\n        return globalSchema;\n    }\n    function readGlobalSchema(db, idbdb, tmpTrans) {\n        db.verno = idbdb.version / 10;\n        var globalSchema = db._dbSchema = buildGlobalSchema(db, idbdb, tmpTrans);\n        db._storeNames = slice(idbdb.objectStoreNames, 0);\n        setApiOnPlace(db, [db._allTables], keys(globalSchema), globalSchema);\n    }\n    function verifyInstalledSchema(db, tmpTrans) {\n        var installedSchema = buildGlobalSchema(db, db.idbdb, tmpTrans);\n        var diff = getSchemaDiff(installedSchema, db._dbSchema);\n        return !(diff.add.length || diff.change.some(function (ch) { return ch.add.length || ch.change.length; }));\n    }\n    function adjustToExistingIndexNames(db, schema, idbtrans) {\n        var storeNames = idbtrans.db.objectStoreNames;\n        for (var i = 0; i < storeNames.length; ++i) {\n            var storeName = storeNames[i];\n            var store = idbtrans.objectStore(storeName);\n            db._hasGetAll = 'getAll' in store;\n            for (var j = 0; j < store.indexNames.length; ++j) {\n                var indexName = store.indexNames[j];\n                var keyPath = store.index(indexName).keyPath;\n                var dexieName = typeof keyPath === 'string' ? keyPath : \"[\" + slice(keyPath).join('+') + \"]\";\n                if (schema[storeName]) {\n                    var indexSpec = schema[storeName].idxByName[dexieName];\n                    if (indexSpec) {\n                        indexSpec.name = indexName;\n                        delete schema[storeName].idxByName[dexieName];\n                        schema[storeName].idxByName[indexName] = indexSpec;\n                    }\n                }\n            }\n        }\n        if (typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n            !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n            _global.WorkerGlobalScope && _global instanceof _global.WorkerGlobalScope &&\n            [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604) {\n            db._hasGetAll = false;\n        }\n    }\n    function parseIndexSyntax(primKeyAndIndexes) {\n        return primKeyAndIndexes.split(',').map(function (index, indexNum) {\n            var _a;\n            var typeSplit = index.split(':');\n            var type = (_a = typeSplit[1]) === null || _a === void 0 ? void 0 : _a.trim();\n            index = typeSplit[0].trim();\n            var name = index.replace(/([&*]|\\+\\+)/g, \"\");\n            var keyPath = /^\\[/.test(name) ? name.match(/^\\[(.*)\\]$/)[1].split('+') : name;\n            return createIndexSpec(name, keyPath || null, /\\&/.test(index), /\\*/.test(index), /\\+\\+/.test(index), isArray(keyPath), indexNum === 0, type);\n        });\n    }\n\n    var Version =  (function () {\n        function Version() {\n        }\n        Version.prototype._createTableSchema = function (name, primKey, indexes) {\n            return createTableSchema(name, primKey, indexes);\n        };\n        Version.prototype._parseIndexSyntax = function (primKeyAndIndexes) {\n            return parseIndexSyntax(primKeyAndIndexes);\n        };\n        Version.prototype._parseStoresSpec = function (stores, outSchema) {\n            var _this = this;\n            keys(stores).forEach(function (tableName) {\n                if (stores[tableName] !== null) {\n                    var indexes = _this._parseIndexSyntax(stores[tableName]);\n                    var primKey = indexes.shift();\n                    if (!primKey) {\n                        throw new exceptions.Schema('Invalid schema for table ' + tableName + ': ' + stores[tableName]);\n                    }\n                    primKey.unique = true;\n                    if (primKey.multi)\n                        throw new exceptions.Schema('Primary key cannot be multiEntry*');\n                    indexes.forEach(function (idx) {\n                        if (idx.auto)\n                            throw new exceptions.Schema('Only primary key can be marked as autoIncrement (++)');\n                        if (!idx.keyPath)\n                            throw new exceptions.Schema('Index must have a name and cannot be an empty string');\n                    });\n                    var tblSchema = _this._createTableSchema(tableName, primKey, indexes);\n                    outSchema[tableName] = tblSchema;\n                }\n            });\n        };\n        Version.prototype.stores = function (stores) {\n            var db = this.db;\n            this._cfg.storesSource = this._cfg.storesSource\n                ? extend(this._cfg.storesSource, stores)\n                : stores;\n            var versions = db._versions;\n            var storesSpec = {};\n            var dbschema = {};\n            versions.forEach(function (version) {\n                extend(storesSpec, version._cfg.storesSource);\n                dbschema = version._cfg.dbschema = {};\n                version._parseStoresSpec(storesSpec, dbschema);\n            });\n            db._dbSchema = dbschema;\n            removeTablesApi(db, [db._allTables, db, db.Transaction.prototype]);\n            setApiOnPlace(db, [db._allTables, db, db.Transaction.prototype, this._cfg.tables], keys(dbschema), dbschema);\n            db._storeNames = keys(dbschema);\n            return this;\n        };\n        Version.prototype.upgrade = function (upgradeFunction) {\n            this._cfg.contentUpgrade = promisableChain(this._cfg.contentUpgrade || nop, upgradeFunction);\n            return this;\n        };\n        return Version;\n    }());\n\n    function createVersionConstructor(db) {\n        return makeClassConstructor(Version.prototype, function Version(versionNumber) {\n            this.db = db;\n            this._cfg = {\n                version: versionNumber,\n                storesSource: null,\n                dbschema: {},\n                tables: {},\n                contentUpgrade: null\n            };\n        });\n    }\n\n    function getDbNamesTable(indexedDB, IDBKeyRange) {\n        var dbNamesDB = indexedDB[\"_dbNamesDB\"];\n        if (!dbNamesDB) {\n            dbNamesDB = indexedDB[\"_dbNamesDB\"] = new Dexie$1(DBNAMES_DB, {\n                addons: [],\n                indexedDB: indexedDB,\n                IDBKeyRange: IDBKeyRange,\n            });\n            dbNamesDB.version(1).stores({ dbnames: \"name\" });\n        }\n        return dbNamesDB.table(\"dbnames\");\n    }\n    function hasDatabasesNative(indexedDB) {\n        return indexedDB && typeof indexedDB.databases === \"function\";\n    }\n    function getDatabaseNames(_a) {\n        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n        return hasDatabasesNative(indexedDB)\n            ? Promise.resolve(indexedDB.databases()).then(function (infos) {\n                return infos\n                    .map(function (info) { return info.name; })\n                    .filter(function (name) { return name !== DBNAMES_DB; });\n            })\n            : getDbNamesTable(indexedDB, IDBKeyRange).toCollection().primaryKeys();\n    }\n    function _onDatabaseCreated(_a, name) {\n        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n        !hasDatabasesNative(indexedDB) &&\n            name !== DBNAMES_DB &&\n            getDbNamesTable(indexedDB, IDBKeyRange).put({ name: name }).catch(nop);\n    }\n    function _onDatabaseDeleted(_a, name) {\n        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n        !hasDatabasesNative(indexedDB) &&\n            name !== DBNAMES_DB &&\n            getDbNamesTable(indexedDB, IDBKeyRange).delete(name).catch(nop);\n    }\n\n    function vip(fn) {\n        return newScope(function () {\n            PSD.letThrough = true;\n            return fn();\n        });\n    }\n\n    function idbReady() {\n        var isSafari = !navigator.userAgentData &&\n            /Safari\\//.test(navigator.userAgent) &&\n            !/Chrom(e|ium)\\//.test(navigator.userAgent);\n        if (!isSafari || !indexedDB.databases)\n            return Promise.resolve();\n        var intervalId;\n        return new Promise(function (resolve) {\n            var tryIdb = function () { return indexedDB.databases().finally(resolve); };\n            intervalId = setInterval(tryIdb, 100);\n            tryIdb();\n        }).finally(function () { return clearInterval(intervalId); });\n    }\n\n    var _a;\n    function isEmptyRange(node) {\n        return !(\"from\" in node);\n    }\n    var RangeSet = function (fromOrTree, to) {\n        if (this) {\n            extend(this, arguments.length ? { d: 1, from: fromOrTree, to: arguments.length > 1 ? to : fromOrTree } : { d: 0 });\n        }\n        else {\n            var rv = new RangeSet();\n            if (fromOrTree && (\"d\" in fromOrTree)) {\n                extend(rv, fromOrTree);\n            }\n            return rv;\n        }\n    };\n    props(RangeSet.prototype, (_a = {\n            add: function (rangeSet) {\n                mergeRanges(this, rangeSet);\n                return this;\n            },\n            addKey: function (key) {\n                addRange(this, key, key);\n                return this;\n            },\n            addKeys: function (keys) {\n                var _this = this;\n                keys.forEach(function (key) { return addRange(_this, key, key); });\n                return this;\n            },\n            hasKey: function (key) {\n                var node = getRangeSetIterator(this).next(key).value;\n                return node && cmp(node.from, key) <= 0 && cmp(node.to, key) >= 0;\n            }\n        },\n        _a[iteratorSymbol] = function () {\n            return getRangeSetIterator(this);\n        },\n        _a));\n    function addRange(target, from, to) {\n        var diff = cmp(from, to);\n        if (isNaN(diff))\n            return;\n        if (diff > 0)\n            throw RangeError();\n        if (isEmptyRange(target))\n            return extend(target, { from: from, to: to, d: 1 });\n        var left = target.l;\n        var right = target.r;\n        if (cmp(to, target.from) < 0) {\n            left\n                ? addRange(left, from, to)\n                : (target.l = { from: from, to: to, d: 1, l: null, r: null });\n            return rebalance(target);\n        }\n        if (cmp(from, target.to) > 0) {\n            right\n                ? addRange(right, from, to)\n                : (target.r = { from: from, to: to, d: 1, l: null, r: null });\n            return rebalance(target);\n        }\n        if (cmp(from, target.from) < 0) {\n            target.from = from;\n            target.l = null;\n            target.d = right ? right.d + 1 : 1;\n        }\n        if (cmp(to, target.to) > 0) {\n            target.to = to;\n            target.r = null;\n            target.d = target.l ? target.l.d + 1 : 1;\n        }\n        var rightWasCutOff = !target.r;\n        if (left && !target.l) {\n            mergeRanges(target, left);\n        }\n        if (right && rightWasCutOff) {\n            mergeRanges(target, right);\n        }\n    }\n    function mergeRanges(target, newSet) {\n        function _addRangeSet(target, _a) {\n            var from = _a.from, to = _a.to, l = _a.l, r = _a.r;\n            addRange(target, from, to);\n            if (l)\n                _addRangeSet(target, l);\n            if (r)\n                _addRangeSet(target, r);\n        }\n        if (!isEmptyRange(newSet))\n            _addRangeSet(target, newSet);\n    }\n    function rangesOverlap(rangeSet1, rangeSet2) {\n        var i1 = getRangeSetIterator(rangeSet2);\n        var nextResult1 = i1.next();\n        if (nextResult1.done)\n            return false;\n        var a = nextResult1.value;\n        var i2 = getRangeSetIterator(rangeSet1);\n        var nextResult2 = i2.next(a.from);\n        var b = nextResult2.value;\n        while (!nextResult1.done && !nextResult2.done) {\n            if (cmp(b.from, a.to) <= 0 && cmp(b.to, a.from) >= 0)\n                return true;\n            cmp(a.from, b.from) < 0\n                ? (a = (nextResult1 = i1.next(b.from)).value)\n                : (b = (nextResult2 = i2.next(a.from)).value);\n        }\n        return false;\n    }\n    function getRangeSetIterator(node) {\n        var state = isEmptyRange(node) ? null : { s: 0, n: node };\n        return {\n            next: function (key) {\n                var keyProvided = arguments.length > 0;\n                while (state) {\n                    switch (state.s) {\n                        case 0:\n                            state.s = 1;\n                            if (keyProvided) {\n                                while (state.n.l && cmp(key, state.n.from) < 0)\n                                    state = { up: state, n: state.n.l, s: 1 };\n                            }\n                            else {\n                                while (state.n.l)\n                                    state = { up: state, n: state.n.l, s: 1 };\n                            }\n                        case 1:\n                            state.s = 2;\n                            if (!keyProvided || cmp(key, state.n.to) <= 0)\n                                return { value: state.n, done: false };\n                        case 2:\n                            if (state.n.r) {\n                                state.s = 3;\n                                state = { up: state, n: state.n.r, s: 0 };\n                                continue;\n                            }\n                        case 3:\n                            state = state.up;\n                    }\n                }\n                return { done: true };\n            },\n        };\n    }\n    function rebalance(target) {\n        var _a, _b;\n        var diff = (((_a = target.r) === null || _a === void 0 ? void 0 : _a.d) || 0) - (((_b = target.l) === null || _b === void 0 ? void 0 : _b.d) || 0);\n        var r = diff > 1 ? \"r\" : diff < -1 ? \"l\" : \"\";\n        if (r) {\n            var l = r === \"r\" ? \"l\" : \"r\";\n            var rootClone = __assign({}, target);\n            var oldRootRight = target[r];\n            target.from = oldRootRight.from;\n            target.to = oldRootRight.to;\n            target[r] = oldRootRight[r];\n            rootClone[r] = oldRootRight[l];\n            target[l] = rootClone;\n            rootClone.d = computeDepth(rootClone);\n        }\n        target.d = computeDepth(target);\n    }\n    function computeDepth(_a) {\n        var r = _a.r, l = _a.l;\n        return (r ? (l ? Math.max(r.d, l.d) : r.d) : l ? l.d : 0) + 1;\n    }\n\n    function extendObservabilitySet(target, newSet) {\n        keys(newSet).forEach(function (part) {\n            if (target[part])\n                mergeRanges(target[part], newSet[part]);\n            else\n                target[part] = cloneSimpleObjectTree(newSet[part]);\n        });\n        return target;\n    }\n\n    function obsSetsOverlap(os1, os2) {\n        return os1.all || os2.all || Object.keys(os1).some(function (key) { return os2[key] && rangesOverlap(os2[key], os1[key]); });\n    }\n\n    var cache = {};\n\n    var unsignaledParts = {};\n    var isTaskEnqueued = false;\n    function signalSubscribersLazily(part, optimistic) {\n        extendObservabilitySet(unsignaledParts, part);\n        if (!isTaskEnqueued) {\n            isTaskEnqueued = true;\n            setTimeout(function () {\n                isTaskEnqueued = false;\n                var parts = unsignaledParts;\n                unsignaledParts = {};\n                signalSubscribersNow(parts, false);\n            }, 0);\n        }\n    }\n    function signalSubscribersNow(updatedParts, deleteAffectedCacheEntries) {\n        if (deleteAffectedCacheEntries === void 0) { deleteAffectedCacheEntries = false; }\n        var queriesToSignal = new Set();\n        if (updatedParts.all) {\n            for (var _i = 0, _a = Object.values(cache); _i < _a.length; _i++) {\n                var tblCache = _a[_i];\n                collectTableSubscribers(tblCache, updatedParts, queriesToSignal, deleteAffectedCacheEntries);\n            }\n        }\n        else {\n            for (var key in updatedParts) {\n                var parts = /^idb\\:\\/\\/(.*)\\/(.*)\\//.exec(key);\n                if (parts) {\n                    var dbName = parts[1], tableName = parts[2];\n                    var tblCache = cache[\"idb://\".concat(dbName, \"/\").concat(tableName)];\n                    if (tblCache)\n                        collectTableSubscribers(tblCache, updatedParts, queriesToSignal, deleteAffectedCacheEntries);\n                }\n            }\n        }\n        queriesToSignal.forEach(function (requery) { return requery(); });\n    }\n    function collectTableSubscribers(tblCache, updatedParts, outQueriesToSignal, deleteAffectedCacheEntries) {\n        var updatedEntryLists = [];\n        for (var _i = 0, _a = Object.entries(tblCache.queries.query); _i < _a.length; _i++) {\n            var _b = _a[_i], indexName = _b[0], entries = _b[1];\n            var filteredEntries = [];\n            for (var _c = 0, entries_1 = entries; _c < entries_1.length; _c++) {\n                var entry = entries_1[_c];\n                if (obsSetsOverlap(updatedParts, entry.obsSet)) {\n                    entry.subscribers.forEach(function (requery) { return outQueriesToSignal.add(requery); });\n                }\n                else if (deleteAffectedCacheEntries) {\n                    filteredEntries.push(entry);\n                }\n            }\n            if (deleteAffectedCacheEntries)\n                updatedEntryLists.push([indexName, filteredEntries]);\n        }\n        if (deleteAffectedCacheEntries) {\n            for (var _d = 0, updatedEntryLists_1 = updatedEntryLists; _d < updatedEntryLists_1.length; _d++) {\n                var _e = updatedEntryLists_1[_d], indexName = _e[0], filteredEntries = _e[1];\n                tblCache.queries.query[indexName] = filteredEntries;\n            }\n        }\n    }\n\n    function dexieOpen(db) {\n        var state = db._state;\n        var indexedDB = db._deps.indexedDB;\n        if (state.isBeingOpened || db.idbdb)\n            return state.dbReadyPromise.then(function () { return state.dbOpenError ?\n                rejection(state.dbOpenError) :\n                db; });\n        state.isBeingOpened = true;\n        state.dbOpenError = null;\n        state.openComplete = false;\n        var openCanceller = state.openCanceller;\n        var nativeVerToOpen = Math.round(db.verno * 10);\n        var schemaPatchMode = false;\n        function throwIfCancelled() {\n            if (state.openCanceller !== openCanceller)\n                throw new exceptions.DatabaseClosed('db.open() was cancelled');\n        }\n        var resolveDbReady = state.dbReadyResolve,\n        upgradeTransaction = null, wasCreated = false;\n        var tryOpenDB = function () { return new DexiePromise(function (resolve, reject) {\n            throwIfCancelled();\n            if (!indexedDB)\n                throw new exceptions.MissingAPI();\n            var dbName = db.name;\n            var req = state.autoSchema || !nativeVerToOpen ?\n                indexedDB.open(dbName) :\n                indexedDB.open(dbName, nativeVerToOpen);\n            if (!req)\n                throw new exceptions.MissingAPI();\n            req.onerror = eventRejectHandler(reject);\n            req.onblocked = wrap(db._fireOnBlocked);\n            req.onupgradeneeded = wrap(function (e) {\n                upgradeTransaction = req.transaction;\n                if (state.autoSchema && !db._options.allowEmptyDB) {\n                    req.onerror = preventDefault;\n                    upgradeTransaction.abort();\n                    req.result.close();\n                    var delreq = indexedDB.deleteDatabase(dbName);\n                    delreq.onsuccess = delreq.onerror = wrap(function () {\n                        reject(new exceptions.NoSuchDatabase(\"Database \".concat(dbName, \" doesnt exist\")));\n                    });\n                }\n                else {\n                    upgradeTransaction.onerror = eventRejectHandler(reject);\n                    var oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion;\n                    wasCreated = oldVer < 1;\n                    db.idbdb = req.result;\n                    if (schemaPatchMode) {\n                        patchCurrentVersion(db, upgradeTransaction);\n                    }\n                    runUpgraders(db, oldVer / 10, upgradeTransaction, reject);\n                }\n            }, reject);\n            req.onsuccess = wrap(function () {\n                upgradeTransaction = null;\n                var idbdb = db.idbdb = req.result;\n                var objectStoreNames = slice(idbdb.objectStoreNames);\n                if (objectStoreNames.length > 0)\n                    try {\n                        var tmpTrans = idbdb.transaction(safariMultiStoreFix(objectStoreNames), 'readonly');\n                        if (state.autoSchema)\n                            readGlobalSchema(db, idbdb, tmpTrans);\n                        else {\n                            adjustToExistingIndexNames(db, db._dbSchema, tmpTrans);\n                            if (!verifyInstalledSchema(db, tmpTrans) && !schemaPatchMode) {\n                                console.warn(\"Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this.\");\n                                idbdb.close();\n                                nativeVerToOpen = idbdb.version + 1;\n                                schemaPatchMode = true;\n                                return resolve(tryOpenDB());\n                            }\n                        }\n                        generateMiddlewareStacks(db, tmpTrans);\n                    }\n                    catch (e) {\n                    }\n                connections.push(db);\n                idbdb.onversionchange = wrap(function (ev) {\n                    state.vcFired = true;\n                    db.on(\"versionchange\").fire(ev);\n                });\n                idbdb.onclose = wrap(function () {\n                    db.close({ disableAutoOpen: false });\n                });\n                if (wasCreated)\n                    _onDatabaseCreated(db._deps, dbName);\n                resolve();\n            }, reject);\n        }).catch(function (err) {\n            switch (err === null || err === void 0 ? void 0 : err.name) {\n                case \"UnknownError\":\n                    if (state.PR1398_maxLoop > 0) {\n                        state.PR1398_maxLoop--;\n                        console.warn('Dexie: Workaround for Chrome UnknownError on open()');\n                        return tryOpenDB();\n                    }\n                    break;\n                case \"VersionError\":\n                    if (nativeVerToOpen > 0) {\n                        nativeVerToOpen = 0;\n                        return tryOpenDB();\n                    }\n                    break;\n            }\n            return DexiePromise.reject(err);\n        }); };\n        return DexiePromise.race([\n            openCanceller,\n            (typeof navigator === 'undefined' ? DexiePromise.resolve() : idbReady()).then(tryOpenDB)\n        ]).then(function () {\n            throwIfCancelled();\n            state.onReadyBeingFired = [];\n            return DexiePromise.resolve(vip(function () { return db.on.ready.fire(db.vip); })).then(function fireRemainders() {\n                if (state.onReadyBeingFired.length > 0) {\n                    var remainders_1 = state.onReadyBeingFired.reduce(promisableChain, nop);\n                    state.onReadyBeingFired = [];\n                    return DexiePromise.resolve(vip(function () { return remainders_1(db.vip); })).then(fireRemainders);\n                }\n            });\n        }).finally(function () {\n            if (state.openCanceller === openCanceller) {\n                state.onReadyBeingFired = null;\n                state.isBeingOpened = false;\n            }\n        }).catch(function (err) {\n            state.dbOpenError = err;\n            try {\n                upgradeTransaction && upgradeTransaction.abort();\n            }\n            catch (_a) { }\n            if (openCanceller === state.openCanceller) {\n                db._close();\n            }\n            return rejection(err);\n        }).finally(function () {\n            state.openComplete = true;\n            resolveDbReady();\n        }).then(function () {\n            if (wasCreated) {\n                var everything_1 = {};\n                db.tables.forEach(function (table) {\n                    table.schema.indexes.forEach(function (idx) {\n                        if (idx.name)\n                            everything_1[\"idb://\".concat(db.name, \"/\").concat(table.name, \"/\").concat(idx.name)] = new RangeSet(-Infinity, [[[]]]);\n                    });\n                    everything_1[\"idb://\".concat(db.name, \"/\").concat(table.name, \"/\")] = everything_1[\"idb://\".concat(db.name, \"/\").concat(table.name, \"/:dels\")] = new RangeSet(-Infinity, [[[]]]);\n                });\n                globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME).fire(everything_1);\n                signalSubscribersNow(everything_1, true);\n            }\n            return db;\n        });\n    }\n\n    function awaitIterator(iterator) {\n        var callNext = function (result) { return iterator.next(result); }, doThrow = function (error) { return iterator.throw(error); }, onSuccess = step(callNext), onError = step(doThrow);\n        function step(getNext) {\n            return function (val) {\n                var next = getNext(val), value = next.value;\n                return next.done ? value :\n                    (!value || typeof value.then !== 'function' ?\n                        isArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) :\n                        value.then(onSuccess, onError));\n            };\n        }\n        return step(callNext)();\n    }\n\n    function extractTransactionArgs(mode, _tableArgs_, scopeFunc) {\n        var i = arguments.length;\n        if (i < 2)\n            throw new exceptions.InvalidArgument(\"Too few arguments\");\n        var args = new Array(i - 1);\n        while (--i)\n            args[i - 1] = arguments[i];\n        scopeFunc = args.pop();\n        var tables = flatten(args);\n        return [mode, tables, scopeFunc];\n    }\n    function enterTransactionScope(db, mode, storeNames, parentTransaction, scopeFunc) {\n        return DexiePromise.resolve().then(function () {\n            var transless = PSD.transless || PSD;\n            var trans = db._createTransaction(mode, storeNames, db._dbSchema, parentTransaction);\n            trans.explicit = true;\n            var zoneProps = {\n                trans: trans,\n                transless: transless\n            };\n            if (parentTransaction) {\n                trans.idbtrans = parentTransaction.idbtrans;\n            }\n            else {\n                try {\n                    trans.create();\n                    trans.idbtrans._explicit = true;\n                    db._state.PR1398_maxLoop = 3;\n                }\n                catch (ex) {\n                    if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\n                        console.warn('Dexie: Need to reopen db');\n                        db.close({ disableAutoOpen: false });\n                        return db.open().then(function () { return enterTransactionScope(db, mode, storeNames, null, scopeFunc); });\n                    }\n                    return rejection(ex);\n                }\n            }\n            var scopeFuncIsAsync = isAsyncFunction(scopeFunc);\n            if (scopeFuncIsAsync) {\n                incrementExpectedAwaits();\n            }\n            var returnValue;\n            var promiseFollowed = DexiePromise.follow(function () {\n                returnValue = scopeFunc.call(trans, trans);\n                if (returnValue) {\n                    if (scopeFuncIsAsync) {\n                        var decrementor = decrementExpectedAwaits.bind(null, null);\n                        returnValue.then(decrementor, decrementor);\n                    }\n                    else if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {\n                        returnValue = awaitIterator(returnValue);\n                    }\n                }\n            }, zoneProps);\n            return (returnValue && typeof returnValue.then === 'function' ?\n                DexiePromise.resolve(returnValue).then(function (x) { return trans.active ?\n                    x\n                    : rejection(new exceptions.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\")); })\n                : promiseFollowed.then(function () { return returnValue; })).then(function (x) {\n                if (parentTransaction)\n                    trans._resolve();\n                return trans._completion.then(function () { return x; });\n            }).catch(function (e) {\n                trans._reject(e);\n                return rejection(e);\n            });\n        });\n    }\n\n    function pad(a, value, count) {\n        var result = isArray(a) ? a.slice() : [a];\n        for (var i = 0; i < count; ++i)\n            result.push(value);\n        return result;\n    }\n    function createVirtualIndexMiddleware(down) {\n        return __assign(__assign({}, down), { table: function (tableName) {\n                var table = down.table(tableName);\n                var schema = table.schema;\n                var indexLookup = {};\n                var allVirtualIndexes = [];\n                function addVirtualIndexes(keyPath, keyTail, lowLevelIndex) {\n                    var keyPathAlias = getKeyPathAlias(keyPath);\n                    var indexList = (indexLookup[keyPathAlias] = indexLookup[keyPathAlias] || []);\n                    var keyLength = keyPath == null ? 0 : typeof keyPath === 'string' ? 1 : keyPath.length;\n                    var isVirtual = keyTail > 0;\n                    var virtualIndex = __assign(__assign({}, lowLevelIndex), { name: isVirtual\n                            ? \"\".concat(keyPathAlias, \"(virtual-from:\").concat(lowLevelIndex.name, \")\")\n                            : lowLevelIndex.name, lowLevelIndex: lowLevelIndex, isVirtual: isVirtual, keyTail: keyTail, keyLength: keyLength, extractKey: getKeyExtractor(keyPath), unique: !isVirtual && lowLevelIndex.unique });\n                    indexList.push(virtualIndex);\n                    if (!virtualIndex.isPrimaryKey) {\n                        allVirtualIndexes.push(virtualIndex);\n                    }\n                    if (keyLength > 1) {\n                        var virtualKeyPath = keyLength === 2 ?\n                            keyPath[0] :\n                            keyPath.slice(0, keyLength - 1);\n                        addVirtualIndexes(virtualKeyPath, keyTail + 1, lowLevelIndex);\n                    }\n                    indexList.sort(function (a, b) { return a.keyTail - b.keyTail; });\n                    return virtualIndex;\n                }\n                var primaryKey = addVirtualIndexes(schema.primaryKey.keyPath, 0, schema.primaryKey);\n                indexLookup[\":id\"] = [primaryKey];\n                for (var _i = 0, _a = schema.indexes; _i < _a.length; _i++) {\n                    var index = _a[_i];\n                    addVirtualIndexes(index.keyPath, 0, index);\n                }\n                function findBestIndex(keyPath) {\n                    var result = indexLookup[getKeyPathAlias(keyPath)];\n                    return result && result[0];\n                }\n                function translateRange(range, keyTail) {\n                    return {\n                        type: range.type === 1  ?\n                            2  :\n                            range.type,\n                        lower: pad(range.lower, range.lowerOpen ? down.MAX_KEY : down.MIN_KEY, keyTail),\n                        lowerOpen: true,\n                        upper: pad(range.upper, range.upperOpen ? down.MIN_KEY : down.MAX_KEY, keyTail),\n                        upperOpen: true\n                    };\n                }\n                function translateRequest(req) {\n                    var index = req.query.index;\n                    return index.isVirtual ? __assign(__assign({}, req), { query: {\n                            index: index.lowLevelIndex,\n                            range: translateRange(req.query.range, index.keyTail)\n                        } }) : req;\n                }\n                var result = __assign(__assign({}, table), { schema: __assign(__assign({}, schema), { primaryKey: primaryKey, indexes: allVirtualIndexes, getIndexByKeyPath: findBestIndex }), count: function (req) {\n                        return table.count(translateRequest(req));\n                    }, query: function (req) {\n                        return table.query(translateRequest(req));\n                    }, openCursor: function (req) {\n                        var _a = req.query.index, keyTail = _a.keyTail, isVirtual = _a.isVirtual, keyLength = _a.keyLength;\n                        if (!isVirtual)\n                            return table.openCursor(req);\n                        function createVirtualCursor(cursor) {\n                            function _continue(key) {\n                                key != null ?\n                                    cursor.continue(pad(key, req.reverse ? down.MAX_KEY : down.MIN_KEY, keyTail)) :\n                                    req.unique ?\n                                        cursor.continue(cursor.key.slice(0, keyLength)\n                                            .concat(req.reverse\n                                            ? down.MIN_KEY\n                                            : down.MAX_KEY, keyTail)) :\n                                        cursor.continue();\n                            }\n                            var virtualCursor = Object.create(cursor, {\n                                continue: { value: _continue },\n                                continuePrimaryKey: {\n                                    value: function (key, primaryKey) {\n                                        cursor.continuePrimaryKey(pad(key, down.MAX_KEY, keyTail), primaryKey);\n                                    }\n                                },\n                                primaryKey: {\n                                    get: function () {\n                                        return cursor.primaryKey;\n                                    }\n                                },\n                                key: {\n                                    get: function () {\n                                        var key = cursor.key;\n                                        return keyLength === 1 ?\n                                            key[0] :\n                                            key.slice(0, keyLength);\n                                    }\n                                },\n                                value: {\n                                    get: function () {\n                                        return cursor.value;\n                                    }\n                                }\n                            });\n                            return virtualCursor;\n                        }\n                        return table.openCursor(translateRequest(req))\n                            .then(function (cursor) { return cursor && createVirtualCursor(cursor); });\n                    } });\n                return result;\n            } });\n    }\n    var virtualIndexMiddleware = {\n        stack: \"dbcore\",\n        name: \"VirtualIndexMiddleware\",\n        level: 1,\n        create: createVirtualIndexMiddleware\n    };\n\n    function getObjectDiff(a, b, rv, prfx) {\n        rv = rv || {};\n        prfx = prfx || '';\n        keys(a).forEach(function (prop) {\n            if (!hasOwn(b, prop)) {\n                rv[prfx + prop] = undefined;\n            }\n            else {\n                var ap = a[prop], bp = b[prop];\n                if (typeof ap === 'object' && typeof bp === 'object' && ap && bp) {\n                    var apTypeName = toStringTag(ap);\n                    var bpTypeName = toStringTag(bp);\n                    if (apTypeName !== bpTypeName) {\n                        rv[prfx + prop] = b[prop];\n                    }\n                    else if (apTypeName === 'Object') {\n                        getObjectDiff(ap, bp, rv, prfx + prop + '.');\n                    }\n                    else if (ap !== bp) {\n                        rv[prfx + prop] = b[prop];\n                    }\n                }\n                else if (ap !== bp)\n                    rv[prfx + prop] = b[prop];\n            }\n        });\n        keys(b).forEach(function (prop) {\n            if (!hasOwn(a, prop)) {\n                rv[prfx + prop] = b[prop];\n            }\n        });\n        return rv;\n    }\n\n    function getEffectiveKeys(primaryKey, req) {\n        if (req.type === 'delete')\n            return req.keys;\n        return req.keys || req.values.map(primaryKey.extractKey);\n    }\n\n    var hooksMiddleware = {\n        stack: \"dbcore\",\n        name: \"HooksMiddleware\",\n        level: 2,\n        create: function (downCore) { return (__assign(__assign({}, downCore), { table: function (tableName) {\n                var downTable = downCore.table(tableName);\n                var primaryKey = downTable.schema.primaryKey;\n                var tableMiddleware = __assign(__assign({}, downTable), { mutate: function (req) {\n                        var dxTrans = PSD.trans;\n                        var _a = dxTrans.table(tableName).hook, deleting = _a.deleting, creating = _a.creating, updating = _a.updating;\n                        switch (req.type) {\n                            case 'add':\n                                if (creating.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                            case 'put':\n                                if (creating.fire === nop && updating.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                            case 'delete':\n                                if (deleting.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                            case 'deleteRange':\n                                if (deleting.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return deleteRange(req); }, true);\n                        }\n                        return downTable.mutate(req);\n                        function addPutOrDelete(req) {\n                            var dxTrans = PSD.trans;\n                            var keys = req.keys || getEffectiveKeys(primaryKey, req);\n                            if (!keys)\n                                throw new Error(\"Keys missing\");\n                            req = req.type === 'add' || req.type === 'put' ? __assign(__assign({}, req), { keys: keys }) : __assign({}, req);\n                            if (req.type !== 'delete')\n                                req.values = __spreadArray([], req.values, true);\n                            if (req.keys)\n                                req.keys = __spreadArray([], req.keys, true);\n                            return getExistingValues(downTable, req, keys).then(function (existingValues) {\n                                var contexts = keys.map(function (key, i) {\n                                    var existingValue = existingValues[i];\n                                    var ctx = { onerror: null, onsuccess: null };\n                                    if (req.type === 'delete') {\n                                        deleting.fire.call(ctx, key, existingValue, dxTrans);\n                                    }\n                                    else if (req.type === 'add' || existingValue === undefined) {\n                                        var generatedPrimaryKey = creating.fire.call(ctx, key, req.values[i], dxTrans);\n                                        if (key == null && generatedPrimaryKey != null) {\n                                            key = generatedPrimaryKey;\n                                            req.keys[i] = key;\n                                            if (!primaryKey.outbound) {\n                                                setByKeyPath(req.values[i], primaryKey.keyPath, key);\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        var objectDiff = getObjectDiff(existingValue, req.values[i]);\n                                        var additionalChanges_1 = updating.fire.call(ctx, objectDiff, key, existingValue, dxTrans);\n                                        if (additionalChanges_1) {\n                                            var requestedValue_1 = req.values[i];\n                                            Object.keys(additionalChanges_1).forEach(function (keyPath) {\n                                                if (hasOwn(requestedValue_1, keyPath)) {\n                                                    requestedValue_1[keyPath] = additionalChanges_1[keyPath];\n                                                }\n                                                else {\n                                                    setByKeyPath(requestedValue_1, keyPath, additionalChanges_1[keyPath]);\n                                                }\n                                            });\n                                        }\n                                    }\n                                    return ctx;\n                                });\n                                return downTable.mutate(req).then(function (_a) {\n                                    var failures = _a.failures, results = _a.results, numFailures = _a.numFailures, lastResult = _a.lastResult;\n                                    for (var i = 0; i < keys.length; ++i) {\n                                        var primKey = results ? results[i] : keys[i];\n                                        var ctx = contexts[i];\n                                        if (primKey == null) {\n                                            ctx.onerror && ctx.onerror(failures[i]);\n                                        }\n                                        else {\n                                            ctx.onsuccess && ctx.onsuccess(req.type === 'put' && existingValues[i] ?\n                                                req.values[i] :\n                                                primKey\n                                            );\n                                        }\n                                    }\n                                    return { failures: failures, results: results, numFailures: numFailures, lastResult: lastResult };\n                                }).catch(function (error) {\n                                    contexts.forEach(function (ctx) { return ctx.onerror && ctx.onerror(error); });\n                                    return Promise.reject(error);\n                                });\n                            });\n                        }\n                        function deleteRange(req) {\n                            return deleteNextChunk(req.trans, req.range, 10000);\n                        }\n                        function deleteNextChunk(trans, range, limit) {\n                            return downTable.query({ trans: trans, values: false, query: { index: primaryKey, range: range }, limit: limit })\n                                .then(function (_a) {\n                                var result = _a.result;\n                                return addPutOrDelete({ type: 'delete', keys: result, trans: trans }).then(function (res) {\n                                    if (res.numFailures > 0)\n                                        return Promise.reject(res.failures[0]);\n                                    if (result.length < limit) {\n                                        return { failures: [], numFailures: 0, lastResult: undefined };\n                                    }\n                                    else {\n                                        return deleteNextChunk(trans, __assign(__assign({}, range), { lower: result[result.length - 1], lowerOpen: true }), limit);\n                                    }\n                                });\n                            });\n                        }\n                    } });\n                return tableMiddleware;\n            } })); }\n    };\n    function getExistingValues(table, req, effectiveKeys) {\n        return req.type === \"add\"\n            ? Promise.resolve([])\n            : table.getMany({ trans: req.trans, keys: effectiveKeys, cache: \"immutable\" });\n    }\n\n    function getFromTransactionCache(keys, cache, clone) {\n        try {\n            if (!cache)\n                return null;\n            if (cache.keys.length < keys.length)\n                return null;\n            var result = [];\n            for (var i = 0, j = 0; i < cache.keys.length && j < keys.length; ++i) {\n                if (cmp(cache.keys[i], keys[j]) !== 0)\n                    continue;\n                result.push(clone ? deepClone(cache.values[i]) : cache.values[i]);\n                ++j;\n            }\n            return result.length === keys.length ? result : null;\n        }\n        catch (_a) {\n            return null;\n        }\n    }\n    var cacheExistingValuesMiddleware = {\n        stack: \"dbcore\",\n        level: -1,\n        create: function (core) {\n            return {\n                table: function (tableName) {\n                    var table = core.table(tableName);\n                    return __assign(__assign({}, table), { getMany: function (req) {\n                            if (!req.cache) {\n                                return table.getMany(req);\n                            }\n                            var cachedResult = getFromTransactionCache(req.keys, req.trans[\"_cache\"], req.cache === \"clone\");\n                            if (cachedResult) {\n                                return DexiePromise.resolve(cachedResult);\n                            }\n                            return table.getMany(req).then(function (res) {\n                                req.trans[\"_cache\"] = {\n                                    keys: req.keys,\n                                    values: req.cache === \"clone\" ? deepClone(res) : res,\n                                };\n                                return res;\n                            });\n                        }, mutate: function (req) {\n                            if (req.type !== \"add\")\n                                req.trans[\"_cache\"] = null;\n                            return table.mutate(req);\n                        } });\n                },\n            };\n        },\n    };\n\n    function isCachableContext(ctx, table) {\n        return (ctx.trans.mode === 'readonly' &&\n            !!ctx.subscr &&\n            !ctx.trans.explicit &&\n            ctx.trans.db._options.cache !== 'disabled' &&\n            !table.schema.primaryKey.outbound);\n    }\n\n    function isCachableRequest(type, req) {\n        switch (type) {\n            case 'query':\n                return req.values && !req.unique;\n            case 'get':\n                return false;\n            case 'getMany':\n                return false;\n            case 'count':\n                return false;\n            case 'openCursor':\n                return false;\n        }\n    }\n\n    var observabilityMiddleware = {\n        stack: \"dbcore\",\n        level: 0,\n        name: \"Observability\",\n        create: function (core) {\n            var dbName = core.schema.name;\n            var FULL_RANGE = new RangeSet(core.MIN_KEY, core.MAX_KEY);\n            return __assign(__assign({}, core), { transaction: function (stores, mode, options) {\n                    if (PSD.subscr && mode !== 'readonly') {\n                        throw new exceptions.ReadOnly(\"Readwrite transaction in liveQuery context. Querier source: \".concat(PSD.querier));\n                    }\n                    return core.transaction(stores, mode, options);\n                }, table: function (tableName) {\n                    var table = core.table(tableName);\n                    var schema = table.schema;\n                    var primaryKey = schema.primaryKey, indexes = schema.indexes;\n                    var extractKey = primaryKey.extractKey, outbound = primaryKey.outbound;\n                    var indexesWithAutoIncPK = primaryKey.autoIncrement && indexes.filter(function (index) { return index.compound && index.keyPath.includes(primaryKey.keyPath); });\n                    var tableClone = __assign(__assign({}, table), { mutate: function (req) {\n                            var _a, _b;\n                            var trans = req.trans;\n                            var mutatedParts = req.mutatedParts || (req.mutatedParts = {});\n                            var getRangeSet = function (indexName) {\n                                var part = \"idb://\".concat(dbName, \"/\").concat(tableName, \"/\").concat(indexName);\n                                return (mutatedParts[part] ||\n                                    (mutatedParts[part] = new RangeSet()));\n                            };\n                            var pkRangeSet = getRangeSet(\"\");\n                            var delsRangeSet = getRangeSet(\":dels\");\n                            var type = req.type;\n                            var _c = req.type === \"deleteRange\"\n                                ? [req.range]\n                                : req.type === \"delete\"\n                                    ? [req.keys]\n                                    : req.values.length < 50\n                                        ? [getEffectiveKeys(primaryKey, req).filter(function (id) { return id; }), req.values]\n                                        : [], keys = _c[0], newObjs = _c[1];\n                            var oldCache = req.trans[\"_cache\"];\n                            if (isArray(keys)) {\n                                pkRangeSet.addKeys(keys);\n                                var oldObjs = type === 'delete' || keys.length === newObjs.length ? getFromTransactionCache(keys, oldCache) : null;\n                                if (!oldObjs) {\n                                    delsRangeSet.addKeys(keys);\n                                }\n                                if (oldObjs || newObjs) {\n                                    trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs);\n                                }\n                            }\n                            else if (keys) {\n                                var range = {\n                                    from: (_a = keys.lower) !== null && _a !== void 0 ? _a : core.MIN_KEY,\n                                    to: (_b = keys.upper) !== null && _b !== void 0 ? _b : core.MAX_KEY\n                                };\n                                delsRangeSet.add(range);\n                                pkRangeSet.add(range);\n                            }\n                            else {\n                                pkRangeSet.add(FULL_RANGE);\n                                delsRangeSet.add(FULL_RANGE);\n                                schema.indexes.forEach(function (idx) { return getRangeSet(idx.name).add(FULL_RANGE); });\n                            }\n                            return table.mutate(req).then(function (res) {\n                                if (keys && (req.type === 'add' || req.type === 'put')) {\n                                    pkRangeSet.addKeys(res.results);\n                                    if (indexesWithAutoIncPK) {\n                                        indexesWithAutoIncPK.forEach(function (idx) {\n                                            var idxVals = req.values.map(function (v) { return idx.extractKey(v); });\n                                            var pkPos = idx.keyPath.findIndex(function (prop) { return prop === primaryKey.keyPath; });\n                                            for (var i = 0, len = res.results.length; i < len; ++i) {\n                                                idxVals[i][pkPos] = res.results[i];\n                                            }\n                                            getRangeSet(idx.name).addKeys(idxVals);\n                                        });\n                                    }\n                                }\n                                trans.mutatedParts = extendObservabilitySet(trans.mutatedParts || {}, mutatedParts);\n                                return res;\n                            });\n                        } });\n                    var getRange = function (_a) {\n                        var _b, _c;\n                        var _d = _a.query, index = _d.index, range = _d.range;\n                        return [\n                            index,\n                            new RangeSet((_b = range.lower) !== null && _b !== void 0 ? _b : core.MIN_KEY, (_c = range.upper) !== null && _c !== void 0 ? _c : core.MAX_KEY),\n                        ];\n                    };\n                    var readSubscribers = {\n                        get: function (req) { return [primaryKey, new RangeSet(req.key)]; },\n                        getMany: function (req) { return [primaryKey, new RangeSet().addKeys(req.keys)]; },\n                        count: getRange,\n                        query: getRange,\n                        openCursor: getRange,\n                    };\n                    keys(readSubscribers).forEach(function (method) {\n                        tableClone[method] = function (req) {\n                            var subscr = PSD.subscr;\n                            var isLiveQuery = !!subscr;\n                            var cachable = isCachableContext(PSD, table) && isCachableRequest(method, req);\n                            var obsSet = cachable\n                                ? req.obsSet = {}\n                                : subscr;\n                            if (isLiveQuery) {\n                                var getRangeSet = function (indexName) {\n                                    var part = \"idb://\".concat(dbName, \"/\").concat(tableName, \"/\").concat(indexName);\n                                    return (obsSet[part] ||\n                                        (obsSet[part] = new RangeSet()));\n                                };\n                                var pkRangeSet_1 = getRangeSet(\"\");\n                                var delsRangeSet_1 = getRangeSet(\":dels\");\n                                var _a = readSubscribers[method](req), queriedIndex = _a[0], queriedRanges = _a[1];\n                                if (method === 'query' && queriedIndex.isPrimaryKey && !req.values) {\n                                    delsRangeSet_1.add(queriedRanges);\n                                }\n                                else {\n                                    getRangeSet(queriedIndex.name || \"\").add(queriedRanges);\n                                }\n                                if (!queriedIndex.isPrimaryKey) {\n                                    if (method === \"count\") {\n                                        delsRangeSet_1.add(FULL_RANGE);\n                                    }\n                                    else {\n                                        var keysPromise_1 = method === \"query\" &&\n                                            outbound &&\n                                            req.values &&\n                                            table.query(__assign(__assign({}, req), { values: false }));\n                                        return table[method].apply(this, arguments).then(function (res) {\n                                            if (method === \"query\") {\n                                                if (outbound && req.values) {\n                                                    return keysPromise_1.then(function (_a) {\n                                                        var resultingKeys = _a.result;\n                                                        pkRangeSet_1.addKeys(resultingKeys);\n                                                        return res;\n                                                    });\n                                                }\n                                                var pKeys = req.values\n                                                    ? res.result.map(extractKey)\n                                                    : res.result;\n                                                if (req.values) {\n                                                    pkRangeSet_1.addKeys(pKeys);\n                                                }\n                                                else {\n                                                    delsRangeSet_1.addKeys(pKeys);\n                                                }\n                                            }\n                                            else if (method === \"openCursor\") {\n                                                var cursor_1 = res;\n                                                var wantValues_1 = req.values;\n                                                return (cursor_1 &&\n                                                    Object.create(cursor_1, {\n                                                        key: {\n                                                            get: function () {\n                                                                delsRangeSet_1.addKey(cursor_1.primaryKey);\n                                                                return cursor_1.key;\n                                                            },\n                                                        },\n                                                        primaryKey: {\n                                                            get: function () {\n                                                                var pkey = cursor_1.primaryKey;\n                                                                delsRangeSet_1.addKey(pkey);\n                                                                return pkey;\n                                                            },\n                                                        },\n                                                        value: {\n                                                            get: function () {\n                                                                wantValues_1 && pkRangeSet_1.addKey(cursor_1.primaryKey);\n                                                                return cursor_1.value;\n                                                            },\n                                                        },\n                                                    }));\n                                            }\n                                            return res;\n                                        });\n                                    }\n                                }\n                            }\n                            return table[method].apply(this, arguments);\n                        };\n                    });\n                    return tableClone;\n                } });\n        },\n    };\n    function trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs) {\n        function addAffectedIndex(ix) {\n            var rangeSet = getRangeSet(ix.name || \"\");\n            function extractKey(obj) {\n                return obj != null ? ix.extractKey(obj) : null;\n            }\n            var addKeyOrKeys = function (key) { return ix.multiEntry && isArray(key)\n                ? key.forEach(function (key) { return rangeSet.addKey(key); })\n                : rangeSet.addKey(key); };\n            (oldObjs || newObjs).forEach(function (_, i) {\n                var oldKey = oldObjs && extractKey(oldObjs[i]);\n                var newKey = newObjs && extractKey(newObjs[i]);\n                if (cmp(oldKey, newKey) !== 0) {\n                    if (oldKey != null)\n                        addKeyOrKeys(oldKey);\n                    if (newKey != null)\n                        addKeyOrKeys(newKey);\n                }\n            });\n        }\n        schema.indexes.forEach(addAffectedIndex);\n    }\n\n    function adjustOptimisticFromFailures(tblCache, req, res) {\n        if (res.numFailures === 0)\n            return req;\n        if (req.type === 'deleteRange') {\n            return null;\n        }\n        var numBulkOps = req.keys\n            ? req.keys.length\n            : 'values' in req && req.values\n                ? req.values.length\n                : 1;\n        if (res.numFailures === numBulkOps) {\n            return null;\n        }\n        var clone = __assign({}, req);\n        if (isArray(clone.keys)) {\n            clone.keys = clone.keys.filter(function (_, i) { return !(i in res.failures); });\n        }\n        if ('values' in clone && isArray(clone.values)) {\n            clone.values = clone.values.filter(function (_, i) { return !(i in res.failures); });\n        }\n        return clone;\n    }\n\n    function isAboveLower(key, range) {\n        return range.lower === undefined\n            ? true\n            : range.lowerOpen\n                ? cmp(key, range.lower) > 0\n                : cmp(key, range.lower) >= 0;\n    }\n    function isBelowUpper(key, range) {\n        return range.upper === undefined\n            ? true\n            : range.upperOpen\n                ? cmp(key, range.upper) < 0\n                : cmp(key, range.upper) <= 0;\n    }\n    function isWithinRange(key, range) {\n        return isAboveLower(key, range) && isBelowUpper(key, range);\n    }\n\n    function applyOptimisticOps(result, req, ops, table, cacheEntry, immutable) {\n        if (!ops || ops.length === 0)\n            return result;\n        var index = req.query.index;\n        var multiEntry = index.multiEntry;\n        var queryRange = req.query.range;\n        var primaryKey = table.schema.primaryKey;\n        var extractPrimKey = primaryKey.extractKey;\n        var extractIndex = index.extractKey;\n        var extractLowLevelIndex = (index.lowLevelIndex || index).extractKey;\n        var finalResult = ops.reduce(function (result, op) {\n            var modifedResult = result;\n            var includedValues = [];\n            if (op.type === 'add' || op.type === 'put') {\n                var includedPKs = new RangeSet();\n                for (var i = op.values.length - 1; i >= 0; --i) {\n                    var value = op.values[i];\n                    var pk = extractPrimKey(value);\n                    if (includedPKs.hasKey(pk))\n                        continue;\n                    var key = extractIndex(value);\n                    if (multiEntry && isArray(key)\n                        ? key.some(function (k) { return isWithinRange(k, queryRange); })\n                        : isWithinRange(key, queryRange)) {\n                        includedPKs.addKey(pk);\n                        includedValues.push(value);\n                    }\n                }\n            }\n            switch (op.type) {\n                case 'add': {\n                    var existingKeys_1 = new RangeSet().addKeys(req.values ? result.map(function (v) { return extractPrimKey(v); }) : result);\n                    modifedResult = result.concat(req.values\n                        ? includedValues.filter(function (v) {\n                            var key = extractPrimKey(v);\n                            if (existingKeys_1.hasKey(key))\n                                return false;\n                            existingKeys_1.addKey(key);\n                            return true;\n                        })\n                        : includedValues\n                            .map(function (v) { return extractPrimKey(v); })\n                            .filter(function (k) {\n                            if (existingKeys_1.hasKey(k))\n                                return false;\n                            existingKeys_1.addKey(k);\n                            return true;\n                        }));\n                    break;\n                }\n                case 'put': {\n                    var keySet_1 = new RangeSet().addKeys(op.values.map(function (v) { return extractPrimKey(v); }));\n                    modifedResult = result\n                        .filter(\n                    function (item) { return !keySet_1.hasKey(req.values ? extractPrimKey(item) : item); })\n                        .concat(\n                    req.values\n                        ? includedValues\n                        : includedValues.map(function (v) { return extractPrimKey(v); }));\n                    break;\n                }\n                case 'delete':\n                    var keysToDelete_1 = new RangeSet().addKeys(op.keys);\n                    modifedResult = result.filter(function (item) {\n                        return !keysToDelete_1.hasKey(req.values ? extractPrimKey(item) : item);\n                    });\n                    break;\n                case 'deleteRange':\n                    var range_1 = op.range;\n                    modifedResult = result.filter(function (item) { return !isWithinRange(extractPrimKey(item), range_1); });\n                    break;\n            }\n            return modifedResult;\n        }, result);\n        if (finalResult === result)\n            return result;\n        finalResult.sort(function (a, b) {\n            return cmp(extractLowLevelIndex(a), extractLowLevelIndex(b)) ||\n                cmp(extractPrimKey(a), extractPrimKey(b));\n        });\n        if (req.limit && req.limit < Infinity) {\n            if (finalResult.length > req.limit) {\n                finalResult.length = req.limit;\n            }\n            else if (result.length === req.limit && finalResult.length < req.limit) {\n                cacheEntry.dirty = true;\n            }\n        }\n        return immutable ? Object.freeze(finalResult) : finalResult;\n    }\n\n    function areRangesEqual(r1, r2) {\n        return (cmp(r1.lower, r2.lower) === 0 &&\n            cmp(r1.upper, r2.upper) === 0 &&\n            !!r1.lowerOpen === !!r2.lowerOpen &&\n            !!r1.upperOpen === !!r2.upperOpen);\n    }\n\n    function compareLowers(lower1, lower2, lowerOpen1, lowerOpen2) {\n        if (lower1 === undefined)\n            return lower2 !== undefined ? -1 : 0;\n        if (lower2 === undefined)\n            return 1;\n        var c = cmp(lower1, lower2);\n        if (c === 0) {\n            if (lowerOpen1 && lowerOpen2)\n                return 0;\n            if (lowerOpen1)\n                return 1;\n            if (lowerOpen2)\n                return -1;\n        }\n        return c;\n    }\n    function compareUppers(upper1, upper2, upperOpen1, upperOpen2) {\n        if (upper1 === undefined)\n            return upper2 !== undefined ? 1 : 0;\n        if (upper2 === undefined)\n            return -1;\n        var c = cmp(upper1, upper2);\n        if (c === 0) {\n            if (upperOpen1 && upperOpen2)\n                return 0;\n            if (upperOpen1)\n                return -1;\n            if (upperOpen2)\n                return 1;\n        }\n        return c;\n    }\n    function isSuperRange(r1, r2) {\n        return (compareLowers(r1.lower, r2.lower, r1.lowerOpen, r2.lowerOpen) <= 0 &&\n            compareUppers(r1.upper, r2.upper, r1.upperOpen, r2.upperOpen) >= 0);\n    }\n\n    function findCompatibleQuery(dbName, tableName, type, req) {\n        var tblCache = cache[\"idb://\".concat(dbName, \"/\").concat(tableName)];\n        if (!tblCache)\n            return [];\n        var queries = tblCache.queries[type];\n        if (!queries)\n            return [null, false, tblCache, null];\n        var indexName = req.query ? req.query.index.name : null;\n        var entries = queries[indexName || ''];\n        if (!entries)\n            return [null, false, tblCache, null];\n        switch (type) {\n            case 'query':\n                var equalEntry = entries.find(function (entry) {\n                    return entry.req.limit === req.limit &&\n                        entry.req.values === req.values &&\n                        areRangesEqual(entry.req.query.range, req.query.range);\n                });\n                if (equalEntry)\n                    return [\n                        equalEntry,\n                        true,\n                        tblCache,\n                        entries,\n                    ];\n                var superEntry = entries.find(function (entry) {\n                    var limit = 'limit' in entry.req ? entry.req.limit : Infinity;\n                    return (limit >= req.limit &&\n                        (req.values ? entry.req.values : true) &&\n                        isSuperRange(entry.req.query.range, req.query.range));\n                });\n                return [superEntry, false, tblCache, entries];\n            case 'count':\n                var countQuery = entries.find(function (entry) {\n                    return areRangesEqual(entry.req.query.range, req.query.range);\n                });\n                return [countQuery, !!countQuery, tblCache, entries];\n        }\n    }\n\n    function subscribeToCacheEntry(cacheEntry, container, requery, signal) {\n        cacheEntry.subscribers.add(requery);\n        signal.addEventListener(\"abort\", function () {\n            cacheEntry.subscribers.delete(requery);\n            if (cacheEntry.subscribers.size === 0) {\n                enqueForDeletion(cacheEntry, container);\n            }\n        });\n    }\n    function enqueForDeletion(cacheEntry, container) {\n        setTimeout(function () {\n            if (cacheEntry.subscribers.size === 0) {\n                delArrayItem(container, cacheEntry);\n            }\n        }, 3000);\n    }\n\n    var cacheMiddleware = {\n        stack: 'dbcore',\n        level: 0,\n        name: 'Cache',\n        create: function (core) {\n            var dbName = core.schema.name;\n            var coreMW = __assign(__assign({}, core), { transaction: function (stores, mode, options) {\n                    var idbtrans = core.transaction(stores, mode, options);\n                    if (mode === 'readwrite') {\n                        var ac_1 = new AbortController();\n                        var signal = ac_1.signal;\n                        var endTransaction = function (wasCommitted) { return function () {\n                            ac_1.abort();\n                            if (mode === 'readwrite') {\n                                var affectedSubscribers_1 = new Set();\n                                for (var _i = 0, stores_1 = stores; _i < stores_1.length; _i++) {\n                                    var storeName = stores_1[_i];\n                                    var tblCache = cache[\"idb://\".concat(dbName, \"/\").concat(storeName)];\n                                    if (tblCache) {\n                                        var table = core.table(storeName);\n                                        var ops = tblCache.optimisticOps.filter(function (op) { return op.trans === idbtrans; });\n                                        if (idbtrans._explicit && wasCommitted && idbtrans.mutatedParts) {\n                                            for (var _a = 0, _b = Object.values(tblCache.queries.query); _a < _b.length; _a++) {\n                                                var entries = _b[_a];\n                                                for (var _c = 0, _d = entries.slice(); _c < _d.length; _c++) {\n                                                    var entry = _d[_c];\n                                                    if (obsSetsOverlap(entry.obsSet, idbtrans.mutatedParts)) {\n                                                        delArrayItem(entries, entry);\n                                                        entry.subscribers.forEach(function (requery) { return affectedSubscribers_1.add(requery); });\n                                                    }\n                                                }\n                                            }\n                                        }\n                                        else if (ops.length > 0) {\n                                            tblCache.optimisticOps = tblCache.optimisticOps.filter(function (op) { return op.trans !== idbtrans; });\n                                            for (var _e = 0, _f = Object.values(tblCache.queries.query); _e < _f.length; _e++) {\n                                                var entries = _f[_e];\n                                                for (var _g = 0, _h = entries.slice(); _g < _h.length; _g++) {\n                                                    var entry = _h[_g];\n                                                    if (entry.res != null &&\n                                                        idbtrans.mutatedParts\n    ) {\n                                                        if (wasCommitted && !entry.dirty) {\n                                                            var freezeResults = Object.isFrozen(entry.res);\n                                                            var modRes = applyOptimisticOps(entry.res, entry.req, ops, table, entry, freezeResults);\n                                                            if (entry.dirty) {\n                                                                delArrayItem(entries, entry);\n                                                                entry.subscribers.forEach(function (requery) { return affectedSubscribers_1.add(requery); });\n                                                            }\n                                                            else if (modRes !== entry.res) {\n                                                                entry.res = modRes;\n                                                                entry.promise = DexiePromise.resolve({ result: modRes });\n                                                            }\n                                                        }\n                                                        else {\n                                                            if (entry.dirty) {\n                                                                delArrayItem(entries, entry);\n                                                            }\n                                                            entry.subscribers.forEach(function (requery) { return affectedSubscribers_1.add(requery); });\n                                                        }\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                affectedSubscribers_1.forEach(function (requery) { return requery(); });\n                            }\n                        }; };\n                        idbtrans.addEventListener('abort', endTransaction(false), {\n                            signal: signal,\n                        });\n                        idbtrans.addEventListener('error', endTransaction(false), {\n                            signal: signal,\n                        });\n                        idbtrans.addEventListener('complete', endTransaction(true), {\n                            signal: signal,\n                        });\n                    }\n                    return idbtrans;\n                }, table: function (tableName) {\n                    var downTable = core.table(tableName);\n                    var primKey = downTable.schema.primaryKey;\n                    var tableMW = __assign(__assign({}, downTable), { mutate: function (req) {\n                            var trans = PSD.trans;\n                            if (primKey.outbound ||\n                                trans.db._options.cache === 'disabled' ||\n                                trans.explicit ||\n                                trans.idbtrans.mode !== 'readwrite'\n                            ) {\n                                return downTable.mutate(req);\n                            }\n                            var tblCache = cache[\"idb://\".concat(dbName, \"/\").concat(tableName)];\n                            if (!tblCache)\n                                return downTable.mutate(req);\n                            var promise = downTable.mutate(req);\n                            if ((req.type === 'add' || req.type === 'put') && (req.values.length >= 50 || getEffectiveKeys(primKey, req).some(function (key) { return key == null; }))) {\n                                promise.then(function (res) {\n                                    var reqWithResolvedKeys = __assign(__assign({}, req), { values: req.values.map(function (value, i) {\n                                            var _a;\n                                            if (res.failures[i])\n                                                return value;\n                                            var valueWithKey = ((_a = primKey.keyPath) === null || _a === void 0 ? void 0 : _a.includes('.'))\n                                                ? deepClone(value)\n                                                : __assign({}, value);\n                                            setByKeyPath(valueWithKey, primKey.keyPath, res.results[i]);\n                                            return valueWithKey;\n                                        }) });\n                                    var adjustedReq = adjustOptimisticFromFailures(tblCache, reqWithResolvedKeys, res);\n                                    tblCache.optimisticOps.push(adjustedReq);\n                                    queueMicrotask(function () { return req.mutatedParts && signalSubscribersLazily(req.mutatedParts); });\n                                });\n                            }\n                            else {\n                                tblCache.optimisticOps.push(req);\n                                req.mutatedParts && signalSubscribersLazily(req.mutatedParts);\n                                promise.then(function (res) {\n                                    if (res.numFailures > 0) {\n                                        delArrayItem(tblCache.optimisticOps, req);\n                                        var adjustedReq = adjustOptimisticFromFailures(tblCache, req, res);\n                                        if (adjustedReq) {\n                                            tblCache.optimisticOps.push(adjustedReq);\n                                        }\n                                        req.mutatedParts && signalSubscribersLazily(req.mutatedParts);\n                                    }\n                                });\n                                promise.catch(function () {\n                                    delArrayItem(tblCache.optimisticOps, req);\n                                    req.mutatedParts && signalSubscribersLazily(req.mutatedParts);\n                                });\n                            }\n                            return promise;\n                        }, query: function (req) {\n                            var _a;\n                            if (!isCachableContext(PSD, downTable) || !isCachableRequest(\"query\", req))\n                                return downTable.query(req);\n                            var freezeResults = ((_a = PSD.trans) === null || _a === void 0 ? void 0 : _a.db._options.cache) === 'immutable';\n                            var _b = PSD, requery = _b.requery, signal = _b.signal;\n                            var _c = findCompatibleQuery(dbName, tableName, 'query', req), cacheEntry = _c[0], exactMatch = _c[1], tblCache = _c[2], container = _c[3];\n                            if (cacheEntry && exactMatch) {\n                                cacheEntry.obsSet = req.obsSet;\n                            }\n                            else {\n                                var promise = downTable.query(req).then(function (res) {\n                                    var result = res.result;\n                                    if (cacheEntry)\n                                        cacheEntry.res = result;\n                                    if (freezeResults) {\n                                        for (var i = 0, l = result.length; i < l; ++i) {\n                                            Object.freeze(result[i]);\n                                        }\n                                        Object.freeze(result);\n                                    }\n                                    else {\n                                        res.result = deepClone(result);\n                                    }\n                                    return res;\n                                }).catch(function (error) {\n                                    if (container && cacheEntry)\n                                        delArrayItem(container, cacheEntry);\n                                    return Promise.reject(error);\n                                });\n                                cacheEntry = {\n                                    obsSet: req.obsSet,\n                                    promise: promise,\n                                    subscribers: new Set(),\n                                    type: 'query',\n                                    req: req,\n                                    dirty: false,\n                                };\n                                if (container) {\n                                    container.push(cacheEntry);\n                                }\n                                else {\n                                    container = [cacheEntry];\n                                    if (!tblCache) {\n                                        tblCache = cache[\"idb://\".concat(dbName, \"/\").concat(tableName)] = {\n                                            queries: {\n                                                query: {},\n                                                count: {},\n                                            },\n                                            objs: new Map(),\n                                            optimisticOps: [],\n                                            unsignaledParts: {}\n                                        };\n                                    }\n                                    tblCache.queries.query[req.query.index.name || ''] = container;\n                                }\n                            }\n                            subscribeToCacheEntry(cacheEntry, container, requery, signal);\n                            return cacheEntry.promise.then(function (res) {\n                                return {\n                                    result: applyOptimisticOps(res.result, req, tblCache === null || tblCache === void 0 ? void 0 : tblCache.optimisticOps, downTable, cacheEntry, freezeResults),\n                                };\n                            });\n                        } });\n                    return tableMW;\n                } });\n            return coreMW;\n        },\n    };\n\n    function vipify(target, vipDb) {\n        return new Proxy(target, {\n            get: function (target, prop, receiver) {\n                if (prop === 'db')\n                    return vipDb;\n                return Reflect.get(target, prop, receiver);\n            }\n        });\n    }\n\n    var Dexie$1 =  (function () {\n        function Dexie(name, options) {\n            var _this = this;\n            this._middlewares = {};\n            this.verno = 0;\n            var deps = Dexie.dependencies;\n            this._options = options = __assign({\n                addons: Dexie.addons, autoOpen: true,\n                indexedDB: deps.indexedDB, IDBKeyRange: deps.IDBKeyRange, cache: 'cloned' }, options);\n            this._deps = {\n                indexedDB: options.indexedDB,\n                IDBKeyRange: options.IDBKeyRange\n            };\n            var addons = options.addons;\n            this._dbSchema = {};\n            this._versions = [];\n            this._storeNames = [];\n            this._allTables = {};\n            this.idbdb = null;\n            this._novip = this;\n            var state = {\n                dbOpenError: null,\n                isBeingOpened: false,\n                onReadyBeingFired: null,\n                openComplete: false,\n                dbReadyResolve: nop,\n                dbReadyPromise: null,\n                cancelOpen: nop,\n                openCanceller: null,\n                autoSchema: true,\n                PR1398_maxLoop: 3,\n                autoOpen: options.autoOpen,\n            };\n            state.dbReadyPromise = new DexiePromise(function (resolve) {\n                state.dbReadyResolve = resolve;\n            });\n            state.openCanceller = new DexiePromise(function (_, reject) {\n                state.cancelOpen = reject;\n            });\n            this._state = state;\n            this.name = name;\n            this.on = Events(this, \"populate\", \"blocked\", \"versionchange\", \"close\", { ready: [promisableChain, nop] });\n            this.once = function (event, callback) {\n                var fn = function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    _this.on(event).unsubscribe(fn);\n                    callback.apply(_this, args);\n                };\n                return _this.on(event, fn);\n            };\n            this.on.ready.subscribe = override(this.on.ready.subscribe, function (subscribe) {\n                return function (subscriber, bSticky) {\n                    Dexie.vip(function () {\n                        var state = _this._state;\n                        if (state.openComplete) {\n                            if (!state.dbOpenError)\n                                DexiePromise.resolve().then(subscriber);\n                            if (bSticky)\n                                subscribe(subscriber);\n                        }\n                        else if (state.onReadyBeingFired) {\n                            state.onReadyBeingFired.push(subscriber);\n                            if (bSticky)\n                                subscribe(subscriber);\n                        }\n                        else {\n                            subscribe(subscriber);\n                            var db_1 = _this;\n                            if (!bSticky)\n                                subscribe(function unsubscribe() {\n                                    db_1.on.ready.unsubscribe(subscriber);\n                                    db_1.on.ready.unsubscribe(unsubscribe);\n                                });\n                        }\n                    });\n                };\n            });\n            this.Collection = createCollectionConstructor(this);\n            this.Table = createTableConstructor(this);\n            this.Transaction = createTransactionConstructor(this);\n            this.Version = createVersionConstructor(this);\n            this.WhereClause = createWhereClauseConstructor(this);\n            this.on(\"versionchange\", function (ev) {\n                if (ev.newVersion > 0)\n                    console.warn(\"Another connection wants to upgrade database '\".concat(_this.name, \"'. Closing db now to resume the upgrade.\"));\n                else\n                    console.warn(\"Another connection wants to delete database '\".concat(_this.name, \"'. Closing db now to resume the delete request.\"));\n                _this.close({ disableAutoOpen: false });\n            });\n            this.on(\"blocked\", function (ev) {\n                if (!ev.newVersion || ev.newVersion < ev.oldVersion)\n                    console.warn(\"Dexie.delete('\".concat(_this.name, \"') was blocked\"));\n                else\n                    console.warn(\"Upgrade '\".concat(_this.name, \"' blocked by other connection holding version \").concat(ev.oldVersion / 10));\n            });\n            this._maxKey = getMaxKey(options.IDBKeyRange);\n            this._createTransaction = function (mode, storeNames, dbschema, parentTransaction) { return new _this.Transaction(mode, storeNames, dbschema, _this._options.chromeTransactionDurability, parentTransaction); };\n            this._fireOnBlocked = function (ev) {\n                _this.on(\"blocked\").fire(ev);\n                connections\n                    .filter(function (c) { return c.name === _this.name && c !== _this && !c._state.vcFired; })\n                    .map(function (c) { return c.on(\"versionchange\").fire(ev); });\n            };\n            this.use(cacheExistingValuesMiddleware);\n            this.use(cacheMiddleware);\n            this.use(observabilityMiddleware);\n            this.use(virtualIndexMiddleware);\n            this.use(hooksMiddleware);\n            var vipDB = new Proxy(this, {\n                get: function (_, prop, receiver) {\n                    if (prop === '_vip')\n                        return true;\n                    if (prop === 'table')\n                        return function (tableName) { return vipify(_this.table(tableName), vipDB); };\n                    var rv = Reflect.get(_, prop, receiver);\n                    if (rv instanceof Table)\n                        return vipify(rv, vipDB);\n                    if (prop === 'tables')\n                        return rv.map(function (t) { return vipify(t, vipDB); });\n                    if (prop === '_createTransaction')\n                        return function () {\n                            var tx = rv.apply(this, arguments);\n                            return vipify(tx, vipDB);\n                        };\n                    return rv;\n                }\n            });\n            this.vip = vipDB;\n            addons.forEach(function (addon) { return addon(_this); });\n        }\n        Dexie.prototype.version = function (versionNumber) {\n            if (isNaN(versionNumber) || versionNumber < 0.1)\n                throw new exceptions.Type(\"Given version is not a positive number\");\n            versionNumber = Math.round(versionNumber * 10) / 10;\n            if (this.idbdb || this._state.isBeingOpened)\n                throw new exceptions.Schema(\"Cannot add version when database is open\");\n            this.verno = Math.max(this.verno, versionNumber);\n            var versions = this._versions;\n            var versionInstance = versions.filter(function (v) { return v._cfg.version === versionNumber; })[0];\n            if (versionInstance)\n                return versionInstance;\n            versionInstance = new this.Version(versionNumber);\n            versions.push(versionInstance);\n            versions.sort(lowerVersionFirst);\n            versionInstance.stores({});\n            this._state.autoSchema = false;\n            return versionInstance;\n        };\n        Dexie.prototype._whenReady = function (fn) {\n            var _this = this;\n            return (this.idbdb && (this._state.openComplete || PSD.letThrough || this._vip)) ? fn() : new DexiePromise(function (resolve, reject) {\n                if (_this._state.openComplete) {\n                    return reject(new exceptions.DatabaseClosed(_this._state.dbOpenError));\n                }\n                if (!_this._state.isBeingOpened) {\n                    if (!_this._state.autoOpen) {\n                        reject(new exceptions.DatabaseClosed());\n                        return;\n                    }\n                    _this.open().catch(nop);\n                }\n                _this._state.dbReadyPromise.then(resolve, reject);\n            }).then(fn);\n        };\n        Dexie.prototype.use = function (_a) {\n            var stack = _a.stack, create = _a.create, level = _a.level, name = _a.name;\n            if (name)\n                this.unuse({ stack: stack, name: name });\n            var middlewares = this._middlewares[stack] || (this._middlewares[stack] = []);\n            middlewares.push({ stack: stack, create: create, level: level == null ? 10 : level, name: name });\n            middlewares.sort(function (a, b) { return a.level - b.level; });\n            return this;\n        };\n        Dexie.prototype.unuse = function (_a) {\n            var stack = _a.stack, name = _a.name, create = _a.create;\n            if (stack && this._middlewares[stack]) {\n                this._middlewares[stack] = this._middlewares[stack].filter(function (mw) {\n                    return create ? mw.create !== create :\n                        name ? mw.name !== name :\n                            false;\n                });\n            }\n            return this;\n        };\n        Dexie.prototype.open = function () {\n            var _this = this;\n            return usePSD(globalPSD,\n            function () { return dexieOpen(_this); });\n        };\n        Dexie.prototype._close = function () {\n            this.on.close.fire(new CustomEvent('close'));\n            var state = this._state;\n            var idx = connections.indexOf(this);\n            if (idx >= 0)\n                connections.splice(idx, 1);\n            if (this.idbdb) {\n                try {\n                    this.idbdb.close();\n                }\n                catch (e) { }\n                this.idbdb = null;\n            }\n            if (!state.isBeingOpened) {\n                state.dbReadyPromise = new DexiePromise(function (resolve) {\n                    state.dbReadyResolve = resolve;\n                });\n                state.openCanceller = new DexiePromise(function (_, reject) {\n                    state.cancelOpen = reject;\n                });\n            }\n        };\n        Dexie.prototype.close = function (_a) {\n            var _b = _a === void 0 ? { disableAutoOpen: true } : _a, disableAutoOpen = _b.disableAutoOpen;\n            var state = this._state;\n            if (disableAutoOpen) {\n                if (state.isBeingOpened) {\n                    state.cancelOpen(new exceptions.DatabaseClosed());\n                }\n                this._close();\n                state.autoOpen = false;\n                state.dbOpenError = new exceptions.DatabaseClosed();\n            }\n            else {\n                this._close();\n                state.autoOpen = this._options.autoOpen ||\n                    state.isBeingOpened;\n                state.openComplete = false;\n                state.dbOpenError = null;\n            }\n        };\n        Dexie.prototype.delete = function (closeOptions) {\n            var _this = this;\n            if (closeOptions === void 0) { closeOptions = { disableAutoOpen: true }; }\n            var hasInvalidArguments = arguments.length > 0 && typeof arguments[0] !== 'object';\n            var state = this._state;\n            return new DexiePromise(function (resolve, reject) {\n                var doDelete = function () {\n                    _this.close(closeOptions);\n                    var req = _this._deps.indexedDB.deleteDatabase(_this.name);\n                    req.onsuccess = wrap(function () {\n                        _onDatabaseDeleted(_this._deps, _this.name);\n                        resolve();\n                    });\n                    req.onerror = eventRejectHandler(reject);\n                    req.onblocked = _this._fireOnBlocked;\n                };\n                if (hasInvalidArguments)\n                    throw new exceptions.InvalidArgument(\"Invalid closeOptions argument to db.delete()\");\n                if (state.isBeingOpened) {\n                    state.dbReadyPromise.then(doDelete);\n                }\n                else {\n                    doDelete();\n                }\n            });\n        };\n        Dexie.prototype.backendDB = function () {\n            return this.idbdb;\n        };\n        Dexie.prototype.isOpen = function () {\n            return this.idbdb !== null;\n        };\n        Dexie.prototype.hasBeenClosed = function () {\n            var dbOpenError = this._state.dbOpenError;\n            return dbOpenError && (dbOpenError.name === 'DatabaseClosed');\n        };\n        Dexie.prototype.hasFailed = function () {\n            return this._state.dbOpenError !== null;\n        };\n        Dexie.prototype.dynamicallyOpened = function () {\n            return this._state.autoSchema;\n        };\n        Object.defineProperty(Dexie.prototype, \"tables\", {\n            get: function () {\n                var _this = this;\n                return keys(this._allTables).map(function (name) { return _this._allTables[name]; });\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Dexie.prototype.transaction = function () {\n            var args = extractTransactionArgs.apply(this, arguments);\n            return this._transaction.apply(this, args);\n        };\n        Dexie.prototype._transaction = function (mode, tables, scopeFunc) {\n            var _this = this;\n            var parentTransaction = PSD.trans;\n            if (!parentTransaction || parentTransaction.db !== this || mode.indexOf('!') !== -1)\n                parentTransaction = null;\n            var onlyIfCompatible = mode.indexOf('?') !== -1;\n            mode = mode.replace('!', '').replace('?', '');\n            var idbMode, storeNames;\n            try {\n                storeNames = tables.map(function (table) {\n                    var storeName = table instanceof _this.Table ? table.name : table;\n                    if (typeof storeName !== 'string')\n                        throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");\n                    return storeName;\n                });\n                if (mode == \"r\" || mode === READONLY)\n                    idbMode = READONLY;\n                else if (mode == \"rw\" || mode == READWRITE)\n                    idbMode = READWRITE;\n                else\n                    throw new exceptions.InvalidArgument(\"Invalid transaction mode: \" + mode);\n                if (parentTransaction) {\n                    if (parentTransaction.mode === READONLY && idbMode === READWRITE) {\n                        if (onlyIfCompatible) {\n                            parentTransaction = null;\n                        }\n                        else\n                            throw new exceptions.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");\n                    }\n                    if (parentTransaction) {\n                        storeNames.forEach(function (storeName) {\n                            if (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {\n                                if (onlyIfCompatible) {\n                                    parentTransaction = null;\n                                }\n                                else\n                                    throw new exceptions.SubTransaction(\"Table \" + storeName +\n                                        \" not included in parent transaction.\");\n                            }\n                        });\n                    }\n                    if (onlyIfCompatible && parentTransaction && !parentTransaction.active) {\n                        parentTransaction = null;\n                    }\n                }\n            }\n            catch (e) {\n                return parentTransaction ?\n                    parentTransaction._promise(null, function (_, reject) { reject(e); }) :\n                    rejection(e);\n            }\n            var enterTransaction = enterTransactionScope.bind(null, this, idbMode, storeNames, parentTransaction, scopeFunc);\n            return (parentTransaction ?\n                parentTransaction._promise(idbMode, enterTransaction, \"lock\") :\n                PSD.trans ?\n                    usePSD(PSD.transless, function () { return _this._whenReady(enterTransaction); }) :\n                    this._whenReady(enterTransaction));\n        };\n        Dexie.prototype.table = function (tableName) {\n            if (!hasOwn(this._allTables, tableName)) {\n                throw new exceptions.InvalidTable(\"Table \".concat(tableName, \" does not exist\"));\n            }\n            return this._allTables[tableName];\n        };\n        return Dexie;\n    }());\n\n    var symbolObservable = typeof Symbol !== \"undefined\" && \"observable\" in Symbol\n        ? Symbol.observable\n        : \"@@observable\";\n    var Observable =  (function () {\n        function Observable(subscribe) {\n            this._subscribe = subscribe;\n        }\n        Observable.prototype.subscribe = function (x, error, complete) {\n            return this._subscribe(!x || typeof x === \"function\" ? { next: x, error: error, complete: complete } : x);\n        };\n        Observable.prototype[symbolObservable] = function () {\n            return this;\n        };\n        return Observable;\n    }());\n\n    var domDeps;\n    try {\n        domDeps = {\n            indexedDB: _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,\n            IDBKeyRange: _global.IDBKeyRange || _global.webkitIDBKeyRange\n        };\n    }\n    catch (e) {\n        domDeps = { indexedDB: null, IDBKeyRange: null };\n    }\n\n    function liveQuery(querier) {\n        var hasValue = false;\n        var currentValue;\n        var observable = new Observable(function (observer) {\n            var scopeFuncIsAsync = isAsyncFunction(querier);\n            function execute(ctx) {\n                var wasRootExec = beginMicroTickScope();\n                try {\n                    if (scopeFuncIsAsync) {\n                        incrementExpectedAwaits();\n                    }\n                    var rv = newScope(querier, ctx);\n                    if (scopeFuncIsAsync) {\n                        rv = rv.finally(decrementExpectedAwaits);\n                    }\n                    return rv;\n                }\n                finally {\n                    wasRootExec && endMicroTickScope();\n                }\n            }\n            var closed = false;\n            var abortController;\n            var accumMuts = {};\n            var currentObs = {};\n            var subscription = {\n                get closed() {\n                    return closed;\n                },\n                unsubscribe: function () {\n                    if (closed)\n                        return;\n                    closed = true;\n                    if (abortController)\n                        abortController.abort();\n                    if (startedListening)\n                        globalEvents.storagemutated.unsubscribe(mutationListener);\n                },\n            };\n            observer.start && observer.start(subscription);\n            var startedListening = false;\n            var doQuery = function () { return execInGlobalContext(_doQuery); };\n            function shouldNotify() {\n                return obsSetsOverlap(currentObs, accumMuts);\n            }\n            var mutationListener = function (parts) {\n                extendObservabilitySet(accumMuts, parts);\n                if (shouldNotify()) {\n                    doQuery();\n                }\n            };\n            var _doQuery = function () {\n                if (closed ||\n                    !domDeps.indexedDB)\n                 {\n                    return;\n                }\n                accumMuts = {};\n                var subscr = {};\n                if (abortController)\n                    abortController.abort();\n                abortController = new AbortController();\n                var ctx = {\n                    subscr: subscr,\n                    signal: abortController.signal,\n                    requery: doQuery,\n                    querier: querier,\n                    trans: null\n                };\n                var ret = execute(ctx);\n                Promise.resolve(ret).then(function (result) {\n                    hasValue = true;\n                    currentValue = result;\n                    if (closed || ctx.signal.aborted) {\n                        return;\n                    }\n                    accumMuts = {};\n                    currentObs = subscr;\n                    if (!objectIsEmpty(currentObs) && !startedListening) {\n                        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, mutationListener);\n                        startedListening = true;\n                    }\n                    execInGlobalContext(function () { return !closed && observer.next && observer.next(result); });\n                }, function (err) {\n                    hasValue = false;\n                    if (!['DatabaseClosedError', 'AbortError'].includes(err === null || err === void 0 ? void 0 : err.name)) {\n                        if (!closed)\n                            execInGlobalContext(function () {\n                                if (closed)\n                                    return;\n                                observer.error && observer.error(err);\n                            });\n                    }\n                });\n            };\n            setTimeout(doQuery, 0);\n            return subscription;\n        });\n        observable.hasValue = function () { return hasValue; };\n        observable.getValue = function () { return currentValue; };\n        return observable;\n    }\n\n    var Dexie = Dexie$1;\n    props(Dexie, __assign(__assign({}, fullNameExceptions), {\n        delete: function (databaseName) {\n            var db = new Dexie(databaseName, { addons: [] });\n            return db.delete();\n        },\n        exists: function (name) {\n            return new Dexie(name, { addons: [] }).open().then(function (db) {\n                db.close();\n                return true;\n            }).catch('NoSuchDatabaseError', function () { return false; });\n        },\n        getDatabaseNames: function (cb) {\n            try {\n                return getDatabaseNames(Dexie.dependencies).then(cb);\n            }\n            catch (_a) {\n                return rejection(new exceptions.MissingAPI());\n            }\n        },\n        defineClass: function () {\n            function Class(content) {\n                extend(this, content);\n            }\n            return Class;\n        }, ignoreTransaction: function (scopeFunc) {\n            return PSD.trans ?\n                usePSD(PSD.transless, scopeFunc) :\n                scopeFunc();\n        }, vip: vip, async: function (generatorFn) {\n            return function () {\n                try {\n                    var rv = awaitIterator(generatorFn.apply(this, arguments));\n                    if (!rv || typeof rv.then !== 'function')\n                        return DexiePromise.resolve(rv);\n                    return rv;\n                }\n                catch (e) {\n                    return rejection(e);\n                }\n            };\n        }, spawn: function (generatorFn, args, thiz) {\n            try {\n                var rv = awaitIterator(generatorFn.apply(thiz, args || []));\n                if (!rv || typeof rv.then !== 'function')\n                    return DexiePromise.resolve(rv);\n                return rv;\n            }\n            catch (e) {\n                return rejection(e);\n            }\n        },\n        currentTransaction: {\n            get: function () { return PSD.trans || null; }\n        }, waitFor: function (promiseOrFunction, optionalTimeout) {\n            var promise = DexiePromise.resolve(typeof promiseOrFunction === 'function' ?\n                Dexie.ignoreTransaction(promiseOrFunction) :\n                promiseOrFunction)\n                .timeout(optionalTimeout || 60000);\n            return PSD.trans ?\n                PSD.trans.waitFor(promise) :\n                promise;\n        },\n        Promise: DexiePromise,\n        debug: {\n            get: function () { return debug; },\n            set: function (value) {\n                setDebug(value);\n            }\n        },\n        derive: derive, extend: extend, props: props, override: override,\n        Events: Events, on: globalEvents, liveQuery: liveQuery, extendObservabilitySet: extendObservabilitySet,\n        getByKeyPath: getByKeyPath, setByKeyPath: setByKeyPath, delByKeyPath: delByKeyPath, shallowClone: shallowClone, deepClone: deepClone, getObjectDiff: getObjectDiff, cmp: cmp, asap: asap$1,\n        minKey: minKey,\n        addons: [],\n        connections: connections,\n        errnames: errnames,\n        dependencies: domDeps, cache: cache,\n        semVer: DEXIE_VERSION, version: DEXIE_VERSION.split('.')\n            .map(function (n) { return parseInt(n); })\n            .reduce(function (p, c, i) { return p + (c / Math.pow(10, i * 2)); }) }));\n    Dexie.maxKey = getMaxKey(Dexie.dependencies.IDBKeyRange);\n\n    if (typeof dispatchEvent !== 'undefined' && typeof addEventListener !== 'undefined') {\n        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (updatedParts) {\n            if (!propagatingLocally) {\n                var event_1;\n                event_1 = new CustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, {\n                    detail: updatedParts\n                });\n                propagatingLocally = true;\n                dispatchEvent(event_1);\n                propagatingLocally = false;\n            }\n        });\n        addEventListener(STORAGE_MUTATED_DOM_EVENT_NAME, function (_a) {\n            var detail = _a.detail;\n            if (!propagatingLocally) {\n                propagateLocally(detail);\n            }\n        });\n    }\n    function propagateLocally(updateParts) {\n        var wasMe = propagatingLocally;\n        try {\n            propagatingLocally = true;\n            globalEvents.storagemutated.fire(updateParts);\n            signalSubscribersNow(updateParts, true);\n        }\n        finally {\n            propagatingLocally = wasMe;\n        }\n    }\n    var propagatingLocally = false;\n\n    var bc;\n    var createBC = function () { };\n    if (typeof BroadcastChannel !== 'undefined') {\n        createBC = function () {\n            bc = new BroadcastChannel(STORAGE_MUTATED_DOM_EVENT_NAME);\n            bc.onmessage = function (ev) { return ev.data && propagateLocally(ev.data); };\n        };\n        createBC();\n        if (typeof bc.unref === 'function') {\n            bc.unref();\n        }\n        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (changedParts) {\n            if (!propagatingLocally) {\n                bc.postMessage(changedParts);\n            }\n        });\n    }\n\n    if (typeof addEventListener !== 'undefined') {\n        addEventListener('pagehide', function (event) {\n            if (!Dexie$1.disableBfCache && event.persisted) {\n                if (debug)\n                    console.debug('Dexie: handling persisted pagehide');\n                bc === null || bc === void 0 ? void 0 : bc.close();\n                for (var _i = 0, connections_1 = connections; _i < connections_1.length; _i++) {\n                    var db = connections_1[_i];\n                    db.close({ disableAutoOpen: false });\n                }\n            }\n        });\n        addEventListener('pageshow', function (event) {\n            if (!Dexie$1.disableBfCache && event.persisted) {\n                if (debug)\n                    console.debug('Dexie: handling persisted pageshow');\n                createBC();\n                propagateLocally({ all: new RangeSet(-Infinity, [[]]) });\n            }\n        });\n    }\n\n    function add(value) {\n        return new PropModification({ add: value });\n    }\n\n    function remove(value) {\n        return new PropModification({ remove: value });\n    }\n\n    function replacePrefix(a, b) {\n        return new PropModification({ replacePrefix: [a, b] });\n    }\n\n    DexiePromise.rejectionMapper = mapError;\n    setDebug(debug);\n\n    var namedExports = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        Dexie: Dexie$1,\n        liveQuery: liveQuery,\n        Entity: Entity,\n        cmp: cmp,\n        PropModification: PropModification,\n        replacePrefix: replacePrefix,\n        add: add,\n        remove: remove,\n        'default': Dexie$1,\n        RangeSet: RangeSet,\n        mergeRanges: mergeRanges,\n        rangesOverlap: rangesOverlap\n    });\n\n    __assign(Dexie$1, namedExports, { default: Dexie$1 });\n\n    return Dexie$1;\n\n}));\n//# sourceMappingURL=dexie.js.map\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}